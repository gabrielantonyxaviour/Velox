# Prompt 1: Deploy Contracts to Fresh Address

## Goal
Deploy the rewritten Velox contracts to a fresh Movement testnet address and update all configuration files.

## Steps

### 1. Create New Deployment Profile
```bash
cd contracts
movement init --profile velox-new
```

### 2. Fund the New Account
Get the new address from `.movement/config.yaml` and fund it via the Movement faucet.

### 3. Update Move.toml
Update the `velox` address in `Move.toml` to use the new address.

### 4. Compile and Deploy
```bash
movement move compile --skip-fetch-latest-git-deps
movement move publish --profile velox-new
```

### 5. Initialize Contracts
Run initialization transactions:
```bash
# Initialize submission registry
movement move run --function-id 'NEW_ADDRESS::submission::initialize' --profile velox-new

# Initialize solver registry
movement move run --function-id 'NEW_ADDRESS::solver_registry::initialize' --profile velox-new

# Initialize settlement fee config (treasury = deployer address)
movement move run --function-id 'NEW_ADDRESS::settlement::initialize' --args address:NEW_ADDRESS --profile velox-new

# Initialize test tokens
movement move run --function-id 'NEW_ADDRESS::test_tokens::initialize' --profile velox-new
```

### 6. Update Configuration Files
Update the VELOX_ADDRESS in:
- `frontend/app/lib/aptos.ts`
- `solver-sdk/.env` (if exists)
- `solver-sdk/src/config/SolverConfig.ts`

### 7. Record New Token Addresses
Get the new tUSDC and tMOVE token addresses from the deployed test_tokens module and update:
- `frontend/app/lib/aptos.ts` TOKEN_ADDRESSES
- `frontend/app/constants/tokens.ts`

### 8. Verify Deployment
```bash
# Check submission registry
movement move view --function-id 'NEW_ADDRESS::submission::get_total_intents' --args address:NEW_ADDRESS --profile velox-new

# Check solver registry
movement move view --function-id 'NEW_ADDRESS::solver_registry::get_total_solvers' --args address:NEW_ADDRESS --profile velox-new
```

## Deliverables
- [ ] New contract address deployed and funded
- [ ] All modules initialized
- [ ] Configuration files updated with new address
- [ ] Deployment verified via view functions
