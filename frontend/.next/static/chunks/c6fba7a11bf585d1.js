(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,254878,e=>{"use strict";var r=e.i(843476),t=e.i(271645),s=e.i(444785),l=e.i(48673),l=l,a=e.i(292656),n=e.i(407398);async function i(e,r){try{let t=e?.linkedAccounts?.find(e=>"wallet"===e.type&&"aptos"===e.chainType);if(t)return console.log("Movement wallet already exists:",t.address),t;console.log("Creating new Movement wallet for user...");let s=await r({chainType:"aptos"});return console.log("Movement wallet created successfully:",s.address),s}catch(e){throw console.error("Error creating Movement wallet:",e),e}}function o({onClose:e}){let[o,c]=(0,t.useState)(!1),{authenticated:d,user:u}=(0,s.usePrivy)(),{createWallet:m}=(0,a.useCreateWallet)(),x=u?.linkedAccounts?.find(e=>"wallet"===e.type&&"aptos"===e.chainType),h=async r=>{try{c(!0);let t=await i(r,m);return e(),t}catch(e){console.error("Wallet creation error:",e)}finally{c(!1)}},{login:p}=(0,l.y)({onComplete:async({user:e})=>{try{await h(e)}catch(e){console.error("Error in login completion:",e),c(!1)}},onError:e=>{console.error("Login failed:",e),c(!1)}}),f=async()=>{try{c(!0),d?await h(u):await p({loginMethods:["email","twitter","google","github","discord"],prefill:{type:"email",value:""},disableSignup:!1})}catch(e){console.error("Privy login error:",e),c(!1)}};return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Login with Privy"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Secure social login with automatic wallet creation"})]}),(0,r.jsx)(n.Button,{variant:"default",className:"w-full justify-center h-12 font-medium",onClick:f,disabled:o||d,children:o?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-foreground"}),(0,r.jsx)("span",{children:"Setting up wallet..."})]}):d?(0,r.jsx)("span",{children:"Setup Movement Wallet"}):(0,r.jsx)("span",{children:"Continue with Privy"})}),d&&u&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-sm text-muted-foreground text-center bg-muted/50 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-600 rounded-full"}),(0,r.jsxs)("span",{children:["Authenticated as: ",u.email?.address||u.phone?.number||"User"]})]})}),x?(0,r.jsxs)("div",{className:"text-sm text-center bg-muted border border-border p-3 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-primary rounded-full"}),(0,r.jsx)("span",{className:"font-medium text-foreground",children:"Movement Wallet Connected"})]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground font-mono",children:[x.address?.slice(0,6),"...",x.address?.slice(-4)]})]}):(0,r.jsx)("div",{className:"text-sm text-center bg-muted border border-border p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-yellow-600 rounded-full"}),(0,r.jsx)("span",{className:"text-muted-foreground",children:"Movement Wallet Not Created"})]})})]})]})}e.s(["default",()=>o],254878)},157773,e=>{e.n(e.i(254878))}]);