(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,364211,654544,797481,932763,194820,840796,763162,33867,576951,553106,651846,350838,718903,639111,600599,e=>{"use strict";let t={path:"/api/v1/apps/:app_id/smart_wallets",method:"GET"};class r{getConfig(){return this._privyInternal.config}async getSmartWalletConfig(){return this._smartWalletConfig||(this._smartWalletConfig=await this._privyInternal.fetch(t,{params:{app_id:this.appId}})),this._smartWalletConfig}get appId(){return this._privyInternal.appId}constructor(e){this._privyInternal=e}}e.s(["default",()=>r],364211);let n={path:"/api/v1/apps/:app_id/cross-app/connections",method:"GET"},i=crypto;e.s(["default",0,i,"isCryptoKey",0,e=>e instanceof CryptoKey],654544);let a=async(e,t)=>{let r=`SHA-${e.slice(-3)}`;return new Uint8Array(await i.subtle.digest(r,t))};e.s(["default",0,a],797481);let s=new TextEncoder,o=new TextDecoder;function c(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;return e.forEach(e=>{t.set(e,r),r+=e.length}),t}function l(e,t){return c(s.encode(e),new Uint8Array([0]),t)}function d(e,t,r){if(t<0||t>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function _(e){let t=Math.floor(e/0x100000000),r=new Uint8Array(8);return d(r,t,0),d(r,e%0x100000000,4),r}function f(e){let t=new Uint8Array(4);return d(t,e),t}function u(e){return c(f(e.length),e)}async function h(e,t,r){let n=Math.ceil((t>>3)/32),i=new Uint8Array(32*n);for(let t=0;t<n;t++){let n=new Uint8Array(4+e.length+r.length);n.set(f(t+1)),n.set(e,4),n.set(r,4+e.length),i.set(await a("sha256",n),32*t)}return i.slice(0,t>>3)}e.s(["concat",()=>c,"concatKdf",()=>h,"decoder",0,o,"encoder",0,s,"lengthAndInput",()=>u,"p2s",()=>l,"uint32be",()=>f,"uint64be",()=>_],932763);let p=e=>{let t=e;"string"==typeof t&&(t=s.encode(t));let r=[];for(let e=0;e<t.length;e+=32768)r.push(String.fromCharCode.apply(null,t.subarray(e,e+32768)));return btoa(r.join(""))},y=e=>p(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),E=e=>{let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r},A=e=>{let t=e;t instanceof Uint8Array&&(t=o.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return E(t)}catch(e){throw TypeError("The input to be decoded is not correctly encoded.")}};function g(e){if("object"!=typeof e||null===e||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}e.s(["decode",0,A,"decodeBase64",0,E,"encode",0,y,"encodeBase64",0,p],194820),e.s(["decode",0,A,"encode",0,y],840796),e.s(["default",()=>g],763162);class R extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null==(t=Error.captureStackTrace)||t.call(Error,this,this.constructor)}}class S extends R{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(e,t="unspecified",r="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=t,this.reason=r}}class I extends R{static get code(){return"ERR_JWT_EXPIRED"}constructor(e,t="unspecified",r="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=t,this.reason=r}}class m extends R{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class O extends R{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class v extends R{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class T extends R{constructor(){super(...arguments),this.code="ERR_JWE_DECOMPRESSION_FAILED",this.message="decompression operation failed"}static get code(){return"ERR_JWE_DECOMPRESSION_FAILED"}}class w extends R{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class N extends R{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class C extends R{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class b extends R{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class D extends R{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class L extends R{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class k extends R{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class P extends R{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class U extends R{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}function x(e){let t,r;if("string"!=typeof e)throw new C("JWTs must use Compact JWS serialization, JWT must be a string");let{1:n,length:i}=e.split(".");if(5===i)throw new C("Only JWTs using Compact JWS serialization can be decoded");if(3!==i)throw new C("Invalid JWT");if(!n)throw new C("JWTs must contain a payload");try{t=A(n)}catch(e){throw new C("Failed to base64url decode the payload")}try{r=JSON.parse(o.decode(t))}catch(e){throw new C("Failed to parse the decoded payload as JSON")}if(!g(r))throw new C("Invalid JWT Claims Set");return r}e.s(["JOSEAlgNotAllowed",()=>m,"JOSEError",()=>R,"JOSENotSupported",()=>O,"JWEDecompressionFailed",()=>T,"JWEDecryptionFailed",()=>v,"JWEInvalid",()=>w,"JWKInvalid",()=>b,"JWKSInvalid",()=>D,"JWKSMultipleMatchingKeys",()=>k,"JWKSNoMatchingKey",()=>L,"JWKSTimeout",()=>P,"JWSInvalid",()=>N,"JWSSignatureVerificationFailed",()=>U,"JWTClaimValidationFailed",()=>S,"JWTExpired",()=>I,"JWTInvalid",()=>C],33867),e.s(["decodeJwt",()=>x],576951);class M{static parse(e){try{return new M(e)}catch(e){return null}}get subject(){return this._decoded.sub}get expiration(){return this._decoded.exp}get issuer(){return this._decoded.iss}get audience(){return this._decoded.aud}isExpired(e=0){return Date.now()>=1e3*(this.expiration-e)}constructor(e){this.value=e,this._decoded=x(e)}}e.s(["Token",()=>M],553106);class F{async updateOnCrossAppAuthentication(e,t){let r=t.access_token,n=F.providerAccessTokenStorageKey(e);await this._storage.put(n,r)}async getProviderAccessToken(e){let t=F.providerAccessTokenStorageKey(e),r=await this._storage.get(t);if("string"!=typeof r)return null;try{if(new M(r).isExpired())throw Error("JWT is expired");return r}catch{return await this._storage.del(t),null}}async getCrossAppConnections(){return await this._privyInternal.fetch(n,{params:{app_id:this._privyInternal.appId}})}constructor(e,t){this._privyInternal=e,this._storage=t}}F.providerAccessTokenStorageKey=e=>`privy:cross-app:${e}`,e.s(["default",()=>F],651846);var z=e.i(944406);class G{async revoke(){await this._privyInternal.fetch(z.WalletsRevoke,{})}constructor(e){this._privyInternal=e}}e.s(["default",()=>G],350838);var B=e.i(63398);let V=e=>!!e.id&&"privy-v2"===e.recovery_method;e.s(["isUnifiedWallet",()=>V],718903);class W{async sign({message:e}){return await this.request({method:"sign",params:{message:new TextDecoder("utf8").decode(e)}})}async signTransaction({psbt:e}){return await this.request({method:"signTransaction",params:{psbt:e}})}async request(e){if(V(this._account))throw new B.PrivyClientError({code:"unsupported_wallet_type",error:"Bitcoin wallet providers are only supported for on-device execution and this app uses TEE execution. Use the useSignRawHash hook from @privy-io/expo/extended-chains to sign over a hash with this wallet. Learn more at https://docs.privy.io/recipes/tee-wallet-migration-guide"});if(!await this._privyInternal.getAccessTokenInternal())throw new B.PrivyClientError({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});return this.handleIFrameRpc(e)}async handleIFrameRpc(e){try{let t=await this._privyInternal.getAccessTokenInternal();if(!t)throw Error("Missing access token. User must be authenticated.");return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),(await this._proxy.rpcWallet({accessToken:t,request:e,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,hdWalletIndex:this._account.wallet_index,chainType:this._account.chain_type})).response.data}catch(r){console.error(r);let t=r instanceof Error?r.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:t}),new B.PrivyClientError({code:"embedded_wallet_request_error",error:t})}}toJSON(){return`PrivyEmbeddedBitcoinProvider { address: '${this._account.address}', request: [Function] }`}constructor({proxy:e,privyInternal:t,account:r,entropyId:n,entropyIdVerifier:i}){this._proxy=e,this._privyInternal=t,this._account=r,this._entropyId=n,this._entropyIdVerifier=i}}e.s(["EmbeddedBitcoinWalletProvider",()=>W],639111);var H=e.i(403555);async function K({context:e,chainType:t}){return{wallet:await (0,H.create)(e,{request:{chain_type:t,owner_id:void 0}})}}e.s(["walletCreate",()=>K],600599)},497530,e=>{"use strict";var t=e.i(309682),r=e.i(110163),n=e.i(180635);let i=(e,i,s,o)=>{let c=Number(e),l=i.find(e=>e.id===c);if(!l)throw new n.PrivyConnectorError(`Unsupported chainId ${e}`,4901);return(0,t.createPublicClient)({transport:(0,r.http)(a(l,s,o.appId)),chain:l})},a=(e,t,r)=>{let i,a=e.id,s=Number(e.id);if(e.rpcUrls.privyWalletOverride&&e.rpcUrls.privyWalletOverride.http[0])i=e.rpcUrls.privyWalletOverride.http[0];else if(t.rpcUrls&&t.rpcUrls[s])i=t.rpcUrls[s];else if(e.rpcUrls.privy?.http[0]){let t=new URL(e.rpcUrls.privy.http[0]);t.searchParams.append("privyAppId",r),i=t.toString()}else i=e.rpcUrls.public?.http[0]?e.rpcUrls.public.http[0]:e.rpcUrls.default?.http[0];if(!i)throw new n.PrivyConnectorError(`No RPC url found for ${a}`);return i};function s({currentRecoveryMethod:e,upgradeToRecoveryMethod:t}){switch(e){case"privy":case"user-passcode":case"recovery-encryption-key":return!0;case"icloud":case"google-drive":if(e===t)throw Error("Cannot upgrade to the existing cloud platform");return!0;default:throw Error("Unknown recovery method")}}e.s(["getJsonRpcEndpointFromChain",()=>a,"getPublicClient",()=>i,"throwIfInvalidRecoveryUpgradePath",()=>s])},732260,(e,t,r)=>{e.e,t.exports=function(){"use strict";function e(e){return Number.isInteger(e)&&e>=0}function t(e){this.name="ArgumentError",this.message=e}return function(r,n){if(n=n||{},"function"!=typeof r)throw new t("fetch must be a function");if("object"!=typeof n)throw new t("defaults must be an object");if(void 0!==n.retries&&!e(n.retries))throw new t("retries must be a positive integer");if(void 0!==n.retryDelay&&!e(n.retryDelay)&&"function"!=typeof n.retryDelay)throw new t("retryDelay must be a positive integer or a function returning a positive integer");if(void 0!==n.retryOn&&!Array.isArray(n.retryOn)&&"function"!=typeof n.retryOn)throw new t("retryOn property expects an array or function");return n=Object.assign({retries:3,retryDelay:1e3,retryOn:[]},n),function(i,a){var s=n.retries,o=n.retryDelay,c=n.retryOn;if(a&&void 0!==a.retries)if(e(a.retries))s=a.retries;else throw new t("retries must be a positive integer");if(a&&void 0!==a.retryDelay)if(e(a.retryDelay)||"function"==typeof a.retryDelay)o=a.retryDelay;else throw new t("retryDelay must be a positive integer or a function returning a positive integer");if(a&&a.retryOn)if(Array.isArray(a.retryOn)||"function"==typeof a.retryOn)c=a.retryOn;else throw new t("retryOn property expects an array or function");return new Promise(function(e,t){var n=function(n){r("undefined"!=typeof Request&&i instanceof Request?i.clone():i,a).then(function(r){if(Array.isArray(c)&&-1===c.indexOf(r.status))e(r);else if("function"==typeof c)try{return Promise.resolve(c(n,null,r)).then(function(t){t?l(n,null,r):e(r)}).catch(t)}catch(e){t(e)}else n<s?l(n,null,r):e(r)}).catch(function(e){if("function"==typeof c)try{Promise.resolve(c(n,e,null)).then(function(r){r?l(n,e,null):t(e)}).catch(function(e){t(e)})}catch(e){t(e)}else n<s?l(n,e,null):t(e)})};function l(e,t,r){setTimeout(function(){n(++e)},"function"==typeof o?o(e,t,r):o)}n(0)})}}}()},902910,740382,771567,382743,199220,117595,e=>{"use strict";let t;var r=e.i(364211),n=e.i(651846),i=e.i(350838),a=e.i(877225),s=e.i(906764),o=e.i(63398),c=e.i(639111),l=e.i(180635),d=e.i(600599),_=e.i(497530),f=e.i(718903);async function u(e,t,r,n,i=!1,a,s){let o=i,c=async a=>{if(o){a===+!i?n():r.current?.reject(new l.PrivyIframeError("missing_or_invalid_mfa","MFA verification failed, retry."));let o=await new Promise((e,n)=>{t.current={resolve:e,reject:n},setTimeout(()=>{let e=new l.PrivyIframeError("mfa_timeout","Timed out waiting for MFA code");r.current?.reject(e),n(e)},s)});return await e(o)}return await e()},d=null;for(let e=0;e<a;e++)try{d=await c(e),r.current?.resolve(void 0);break}catch(e){if("missing_or_invalid_mfa"!==e.type)throw r.current?.resolve(void 0),e;o=!0}if(null===d){let e=new l.PrivyIframeError("mfa_verification_max_attempts_reached","Max MFA verification attempts reached");throw r.current?.reject(e),e}return d}let h=(Y=0,()=>"id-"+Y++),p=(e,t)=>"bigint"==typeof t?t.toString():t,y=async(e,{ms:t,msg:r})=>{let n,i=new Promise((e,i)=>{n=setTimeout(()=>{i(Error(r))},t??15e3)});try{return await Promise.race([e,i])}finally{void 0!==n&&clearTimeout(n)}},E=new class{enqueue(e,t){this.callbacks[e]=t}dequeue(e,t){let r=this.callbacks[t];if(!r)throw Error(`cannot dequeue ${e} event: no event found for id ${t}`);switch(delete this.callbacks[t],e){case"privy:iframe:ready":case"privy:wallets:create":case"privy:user-signer:sign":case"privy:wallets:add":case"privy:wallets:set-recovery":case"privy:wallets:connect":case"privy:wallets:recover":case"privy:wallets:rpc":case"privy:wallet:create":case"privy:wallet:connect":case"privy:wallet:recover":case"privy:wallet:rpc":case"privy:solana-wallet:create":case"privy:solana-wallet:create-additional":case"privy:solana-wallet:connect":case"privy:solana-wallet:recover":case"privy:solana-wallet:rpc":case"privy:delegated-actions:consent":case"privy:mfa:verify":case"privy:mfa:init-enrollment":case"privy:mfa:submit-enrollment":case"privy:mfa:unenroll":case"privy:mfa:clear":return r;default:throw Error(`invalid wallet event type ${e}`)}}constructor(){this.callbacks={}}};class A{invokeWithMfa(e,t){return y(u(r=>y(this.waitForReady().then(()=>e(r)),{msg:t.timeoutMsg,ms:t.timeoutMs}),this.mfa.rootPromise,this.mfa.submitPromise,()=>this.mfa.emit("mfaRequired"),t.mfaAlwaysRequired??!1,4,3e5),{msg:"Operation reached timeout: MFA verification",ms:126e4})}reload(){return this.ready=!1,this._embeddedWalletMessagePoster.reload()}ping(e=15e3){return y(this.invoke("privy:iframe:ready",{}),{msg:"Ping reached timeout",ms:e})}create(e){return y(this.waitForReady().then(()=>this.invoke("privy:wallet:create",e)),{msg:"Operation reached timeout: create"})}rpc(e){return this.invokeWithMfa(t=>this.invoke("privy:wallet:rpc",{...t,...e}),{timeoutMsg:"Operation reached timeout: rpc"})}createSolana(e){return this.invokeWithMfa(t=>this.invoke("privy:solana-wallet:create",{...t,...e}),{timeoutMsg:"Operation reached timeout: create",timeoutMs:6e4})}createAdditionalSolana(e){return y(this.waitForReady().then(()=>this.invoke("privy:solana-wallet:create-additional",e)),{msg:"Operation reached timeout: create"})}solanaRpc(e){return this.invokeWithMfa(t=>this.invoke("privy:solana-wallet:rpc",{...t,...e}),{timeoutMsg:"Operation reached timeout: solana-rpc"})}delegateWallets(e){return this.invokeWithMfa(t=>this.invoke("privy:delegated-actions:consent",{...t,...e}),{timeoutMsg:"Operation reached timeout: delegated-actions:consent"})}verifyMfa(e){return this.invokeWithMfa(t=>this.invoke("privy:mfa:verify",{...t,...e}),{timeoutMsg:"Operation reached timeout: mfa:verify",mfaAlwaysRequired:!0})}initEnrollMfa(e){return this.invokeWithMfa(t=>this.invoke("privy:mfa:init-enrollment",{...t,...e}),{timeoutMsg:"Operation reached timeout: mfa:init-enrollment"})}submitEnrollMfa(e){return this.invokeWithMfa(t=>this.invoke("privy:mfa:submit-enrollment",{...t,...e}),{timeoutMsg:"Operation reached timeout: mfa:submit-enrollment"})}unenrollMfa(e){return this.invokeWithMfa(t=>this.invoke("privy:mfa:unenroll",{...t,...e}),{timeoutMsg:"Operation reached timeout: mfa:unenroll",mfaAlwaysRequired:!0})}clearMfa(e){return y(this.waitForReady().then(()=>this.invoke("privy:mfa:clear",e)),{msg:"Operation reached timeout: mfa:clear"})}createWallet(e){return this.invokeWithMfa(t=>this.invoke("privy:wallets:create",{...t,...e}),{timeoutMsg:"Operation reached timeout: create",timeoutMs:6e4})}signWithUserSigner(e){return this.invokeWithMfa(t=>this.invoke("privy:user-signer:sign",{...t,...e}),{timeoutMsg:"Operation reached timeout: user-signer:sign"})}addWallet(e){return y(this.waitForReady().then(()=>this.invoke("privy:wallets:add",e)),{msg:"Operation reached timeout: wallets:add"})}setRecovery(e){return this.invokeWithMfa(t=>this.invoke("privy:wallets:set-recovery",{...t,...e}),{timeoutMsg:"Operation reached timeout: wallets:set-recovery",timeoutMs:6e4})}connect(e){return y(this.waitForReady().then(()=>this.invoke("privy:wallets:connect",e)),{msg:"Operation reached timeout: wallets:connect"})}recover(e){return this.invokeWithMfa(t=>this.invoke("privy:wallets:recover",{...t,...e}),{timeoutMsg:"Operation reached timeout: wallets:recover",timeoutMs:6e4})}rpcWallet(e){return this.invokeWithMfa(t=>this.invoke("privy:wallets:rpc",{...t,...e}),{timeoutMsg:"Operation reached timeout: wallets:rpc"})}handleEmbeddedWalletMessages(e){if(!e.event.startsWith("privy:"))return void console.warn(`Unsupported event type: ${e.event}`);let{reject:t,resolve:r}=E.dequeue(e.event,e.id);return void 0!==e.error?t(new l.PrivyIframeError(e.error.type,e.error.message)):r(e.data)}waitForReady(){return this.ready?Promise.resolve():new Promise(async(e,t)=>{for(;!this.ready;)this.invoke("privy:iframe:ready",{}).then(()=>{this.ready=!0,e()}).catch(t),await new Promise(e=>{setTimeout(()=>{e()},150)})})}invoke(e,t){let r=`${e}${JSON.stringify(t,p)}`;if("privy:wallet:create"===e||"privy:solana-wallet:create"===e){let e=this.cache.get(r);if(e)return e}let n=new Promise((r,n)=>{let i=h();E.enqueue(i,{resolve:r,reject:n}),this._embeddedWalletMessagePoster.postMessage(JSON.stringify({id:i,event:e,data:t}),"*")}).finally(()=>{this.cache.delete(r)});return this.cache.set(r,n),n}constructor(e,t){this.ready=!1,this.cache=new Map,this._embeddedWalletMessagePoster=e,this.mfa=t}}var g=e.i(595932),R=e.i(675107),S=e.i(880841);let I={0:"legacy",1:"eip2930",2:"eip1559",3:"eip4844",4:"eip7702"},m={legacy:0,eip2930:1,eip1559:2,eip4844:3,eip7702:4},O=e=>void 0!==e?BigInt(e):void 0;function v(e){let t,{type:r=2,...n}="string"==typeof e?JSON.parse(e):e;n.accessList&&Array.isArray(n.accessList)?t=n.accessList.map(e=>Array.isArray(e)?{address:e[0],storageKeys:e[1]}:e):n.accessList&&(t=Object.entries(n.accessList).map(e=>({address:e[0],storageKeys:e[1]})));let i=Number(n.chainId??1),a=(0,S.isHex)(n.data)?n.data:n.data?(0,R.toHex)(Uint8Array.from(n.data)):void 0,s=n.nonce?Number(n.nonce):void 0,o={chainId:i,data:a,nonce:s,value:O(n.value),gas:O(n.gas??n.gasLimit)},c=Number(r);if(0===c)return{...n,type:I[c],...o,gasPrice:O(n.gasPrice),accessList:void 0,maxFeePerGas:void 0,maxPriorityFeePerGas:void 0};if(1===c)return{...n,type:I[c],...o,gasPrice:O(n.gasPrice),accessList:t,maxFeePerGas:void 0,maxPriorityFeePerGas:void 0};if(2===c)return{...n,type:I[c],...o,nonce:s,accessList:t,maxFeePerGas:O(n.maxFeePerGas),maxPriorityFeePerGas:O(n.maxPriorityFeePerGas),gasPrice:void 0,maxFeePerBlobGas:void 0};throw Error(`Unsupported transaction type: ${r}`)}e.s(["STRING_TO_NUMBER_TXN_TYPE",()=>m,"toViemTransactionSerializable",()=>v],740382);var T=e.i(467034);let w=e=>T.Buffer.from(e,"utf8"),N=e=>`0x${e.toString("hex")}`;var C=e.i(944406),b=e.i(31557);async function D(e,t,{wallet_id:r,...n}){let i={version:1,url:e.getCompiledPath(C.WalletRpc,{params:{wallet_id:r}}),method:C.WalletRpc.method,headers:{"privy-app-id":e.app.appId},body:{...n}},{signature:a}=await (0,b.generateAuthorizationSignature)(t,i);return await e.fetchPrivyRoute(C.WalletRpc,{body:n,params:{wallet_id:r},headers:{"privy-authorization-signature":a}})}function L(e){if("number"==typeof e||"bigint"==typeof e)return`0x${BigInt(e).toString(16)}`;if("string"==typeof e)return/^0x[0-9a-fA-F]*$/.test(e)?e:N(w(e))}async function k({context:e,account:t,rpcRequest:r}){switch(r.chainType){case"ethereum":return async function({context:e,account:t,rpcRequest:r}){var n;switch(r.method){case"personal_sign":{let[n]=r.params,i=await D(e,e.signRequest,{chain_type:"ethereum",method:"personal_sign",wallet_id:t.id,params:n.startsWith("0x")?{message:n.slice(2),encoding:"hex"}:{message:n,encoding:"utf-8"}});if("personal_sign"!==i.method)throw Error("Unable to sign message");return{data:i.data.signature}}case"eth_signTransaction":{let[n]=r.params,i=await D(e,e.signRequest,{chain_type:"ethereum",method:"eth_signTransaction",wallet_id:t.id,params:{transaction:{from:n.from,to:n.to??void 0,nonce:L(n.nonce),chain_id:L(n.chainId),data:function(e){if(void 0!==e)return"string"==typeof e?/^0x[0-9a-fA-F]*$/.test(e)?e:N(w(e)):N(T.Buffer.from(Uint8Array.from(e)))}(n.data),value:L(n.value),type:n.type,gas_limit:L(n.gasLimit),gas_price:L(n.gasPrice),max_fee_per_gas:L(n.maxFeePerGas),max_priority_fee_per_gas:L(n.maxPriorityFeePerGas)}}});if("eth_signTransaction"!==i.method)throw Error("Unable to sign transaction");return{data:i.data.signed_transaction}}case"eth_signTypedData_v4":{let[,i]=r.params,a=await D(e,e.signRequest,{chain_type:"ethereum",method:r.method,wallet_id:t.id,params:{typed_data:("string"==typeof(n=i)&&(n=JSON.parse(n)),{types:n.types,primary_type:String(n.primaryType),domain:n.domain,message:n.message})}});if("eth_signTypedData_v4"!==a.method)throw Error("Unable to sign typed data");return{data:a.data.signature}}case"eth_sign":{let[,n]=r.params,i=await D(e,e.signRequest,{chain_type:"ethereum",method:"secp256k1_sign",wallet_id:t.id,params:{hash:/^0x[0-9a-fA-F]*$/.test(n)?n:N(w(n))}});if("secp256k1_sign"!==i.method)throw Error("Unable to sign message");return{data:i.data.signature}}case"secp256k1_sign":{let[n]=r.params,i=await D(e,e.signRequest,{chain_type:"ethereum",method:"secp256k1_sign",wallet_id:t.id,params:{hash:/^0x[0-9a-fA-F]*$/.test(n)?n:N(w(n))}});if("secp256k1_sign"!==i.method)throw Error("Unable to sign message");return{data:i.data.signature}}case"csw_signUserOperation":case"eth_sendTransaction":case"eth_populateTransactionRequest":throw Error(`This wallet does not support the method: ${r.method}`)}}({context:e,account:t,rpcRequest:r.request});case"solana":return async function({context:e,account:t,rpcRequest:r}){if("signMessage"===r.method){let{message:n}=r.params,i=await D(e,e.signRequest,{chain_type:"solana",method:"signMessage",wallet_id:t.id,params:{message:n,encoding:"base64"}});if("signMessage"!==i.method)throw Error("Unable to sign message");return{data:i.data.signature}}}({context:e,account:t,rpcRequest:r.request})}}e.i(733821),e.s(["rpc",()=>D],771567);let P=new Set(["eth_sign","personal_sign","eth_signTypedData_v4","csw_signUserOperation","secp256k1_sign"]);class U extends g.default{async request(e){if(P.has(e.method))return this.handleIFrameRpc(e);switch(e.method){case"eth_accounts":case"eth_requestAccounts":return this._account.address?[this._account.address]:[];case"eth_chainId":return`0x${this._chainId.toString(16)}`;case"wallet_switchEthereumChain":return this.handleSwitchEthereumChain(e);case"eth_estimateGas":return this.handleEstimateGas(e);case"eth_signTransaction":{let t=e.params?.[0];return this.handleSignTransaction(t)}case"eth_sendTransaction":{let t=e.params?.[0];return this.handleSendTransaction(t)}case"eth_populateTransactionRequest":{let t=e.params?.[0];return this.handlePopulateTransaction(t)}default:return this.handleJsonRpc(e)}}ensureChainId(e){let t={chainId:this._chainId,...e};return this.internalSwitchEthereumChain(t.chainId),t}internalSwitchEthereumChain(e){e&&Number(e)!==this._chainId&&(this._chainId=Number(e),this._client=(0,_.getPublicClient)(this._chainId,this._chains,{rpcUrls:[]},{appId:this._privyInternal.appId}),this.emit("chainChanged",e))}async handlePopulateTransaction(e){let t=this.ensureChainId(e),r=v(t),{type:n,...i}=await this._client.prepareTransactionRequest({account:t.from??this._account.address,...r});return{...i,type:m[n]}}async handleSignTransaction(e){let t={...e};for(let e of Object.keys(t)){let r=t[e];r&&"bigint"==typeof r&&(t[e]=(0,R.toHex)(r))}return await this.handleIFrameRpc({method:"eth_signTransaction",params:[t]})}async handleSendTransaction(e){let t=await this.handlePopulateTransaction(e),r=await this.handleSignTransaction(t);return await this.handleJsonRpc({method:"eth_sendRawTransaction",params:[r]})}async handleEstimateGas(e){if(!e.params||!Array.isArray(e.params))throw Error("Invalid params for eth_estimateGas");let t=e.params?.[0],r=this.ensureChainId(t),n=v(r);return await this._client.estimateGas({account:r.from??this._account.address,...n})}handleSwitchEthereumChain(e){let t;if(!e.params||!Array.isArray(e.params))throw new l.EmbeddedProviderError(`Invalid params for ${e.method}`,4200);if("string"==typeof e.params[0])t=e.params[0];else{if(!("chainId"in e.params[0])||"string"!=typeof e.params[0].chainId)throw new l.EmbeddedProviderError(`Invalid params for ${e.method}`,4200);t=e.params[0].chainId}this.internalSwitchEthereumChain(t)}async handleIFrameRpc(e){try{let t=await this._privyInternal.getAccessTokenInternal();if(!t)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address});let r=this._account;if((0,f.isUnifiedWallet)(r)){let{data:n}=await k({context:{app:this._appApi,fetchPrivyRoute:(...e)=>this._privyInternal.fetch(...e),getCompiledPath:(...e)=>this._privyInternal.getPath(...e),signRequest:({message:e})=>this._walletProxy.signWithUserSigner({accessToken:t,message:e})},account:r,rpcRequest:{chainType:"ethereum",request:e}});return n}try{await this._walletProxy.connect({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:t})}catch(r){let e=(0,l.errorIndicatesRecoveryIsNeeded)(r);if(e&&"privy"===this._account.recovery_method)await this._walletProxy.recover({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:t});else{if(!e||!this._onNeedsRecovery)throw r;{let e;await new Promise(async(t,r)=>{e=setTimeout(()=>r(new o.PrivyClientError({code:"embedded_wallet_recovery_error",error:"User-owned recovery timed out"})),12e4),await this._onNeedsRecovery?.({recoveryMethod:this._account.recovery_method,onRecovered:()=>t(!0)})}).finally(()=>clearTimeout(e))}}}return(await this._walletProxy.rpcWallet({accessToken:t,request:e,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,hdWalletIndex:this._account.wallet_index,chainType:"ethereum"})).response.data}catch(r){console.error(r);let t=r instanceof Error?r.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:t}),new o.PrivyClientError({code:"embedded_wallet_request_error",error:t})}}async handleJsonRpc(e){return this._client.request(e)}toJSON(){return`PrivyEIP1193Provider { address: '${this._account.address}', chainId: ${this._chainId}, request: [Function] }`}constructor({walletProxy:e,privyInternal:t,account:r,entropyId:n,entropyIdVerifier:i,chains:a,onNeedsRecovery:s,chainId:o=a[0].id,appApi:c}){super(),this._walletProxy=e,this._privyInternal=t,this._account=r,this._entropyId=n,this._entropyIdVerifier=i,this._chainId=o,this._chains=a,this._onNeedsRecovery=s,this._client=(0,_.getPublicClient)(o,a,{rpcUrls:[]},{appId:c.appId}),this._appApi=c}}function x(e){return"version"in e}function M(e,t){let r=(x(e)?e.message:e.compileMessage()).staticAccountKeys.find(e=>e.toBase58()===t);if(!r)throw Error(`Transaction does not contain public key ${t}`);return r}class F{async request(e){if(!await this._privyInternal.getAccessTokenInternal())throw new o.PrivyClientError({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});switch(e.method){case"signAndSendTransaction":return await this.handleSignAndSendTransaction(e);case"signTransaction":return await this.handleSignTransaction(e);default:return await this.handleIFrameRpc(e)}}get _publicKey(){return this._account.address}async connectAndRecover(e){if("privy-v2"!==this._account.recovery_method)try{await this._proxy.connect({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:e})}catch(r){let t=(0,l.errorIndicatesRecoveryIsNeeded)(r);if(t&&"privy"===this._account.recovery_method)await this._proxy.recover({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:e});else{if(!t||!this._onNeedsRecovery)throw r;{let e;await new Promise(async(t,r)=>{e=setTimeout(()=>r(new o.PrivyClientError({code:"embedded_wallet_recovery_error",error:"User-owned recovery timed out"})),12e4),await this._onNeedsRecovery?.({recoveryMethod:this._account.recovery_method,onRecovered:()=>t(!0)})}).finally(()=>clearTimeout(e))}}}}async signMessageRpc(e,t){let r=this._account;if(!(0,f.isUnifiedWallet)(r))return(await this._proxy.rpcWallet({accessToken:t,request:e,chainType:"solana",hdWalletIndex:this._account.wallet_index,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier})).response.data;{let{data:n}=await k({context:{app:this._app,fetchPrivyRoute:(...e)=>this._privyInternal.fetch(...e),getCompiledPath:(...e)=>this._privyInternal.getPath(...e),signRequest:({message:e})=>this._proxy.signWithUserSigner({accessToken:t,message:e})},account:r,rpcRequest:{chainType:"solana",request:e}});return{signature:n}}}async handleIFrameRpc(e){try{let t=await this._privyInternal.getAccessTokenInternal();if(!t)throw Error("Missing privy token. User must be logged in");return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),await this.connectAndRecover(t),await this.signMessageRpc(e,t)}catch(r){console.error(r);let t=r instanceof Error?r.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:t}),new o.PrivyClientError({code:"embedded_wallet_request_error",error:t})}}async handleSignAndSendTransaction(e){try{let t=await this._privyInternal.getAccessTokenInternal();if(!t)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),await this.connectAndRecover(t);let{transaction:r,connection:n,options:i}=e.params,a=M(r,this._account.address),s=x(r)?T.Buffer.from(r.message.serialize()):r.serializeMessage(),{signature:o}=await this.signMessageRpc({method:"signMessage",params:{message:s.toString("base64")}},t);return r.addSignature(a,T.Buffer.from(o,"base64")),{signature:await n.sendRawTransaction(r.serialize(),i)}}catch(r){console.error(r);let t=r instanceof Error?r.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:t}),new o.PrivyClientError({code:"embedded_wallet_request_error",error:t})}}async handleSignTransaction(e){try{let t=await this._privyInternal.getAccessTokenInternal();if(!t)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),await this.connectAndRecover(t);let{transaction:r}=e.params,n=M(r,this._account.address),i=x(r)?T.Buffer.from(r.message.serialize()):r.serializeMessage(),{signature:a}=await this.signMessageRpc({method:"signMessage",params:{message:i.toString("base64")}},t);return r.addSignature(n,T.Buffer.from(a,"base64")),{signedTransaction:r}}catch(r){console.error(r);let t=r instanceof Error?r.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.wallet_index,error:t}),new o.PrivyClientError({code:"embedded_wallet_request_error",error:t})}}toJSON(){return`PrivyEmbeddedSolanaProvider { address: '${this._account.address}', request: [Function] }`}constructor({proxy:e,privyInternal:t,account:r,entropyId:n,entropyIdVerifier:i,onNeedsRecovery:a,app:s}){this._proxy=e,this._privyInternal=t,this._account=r,this._entropyId=n,this._entropyIdVerifier=i,this._onNeedsRecovery=a,this._app=s}}class z{setMessagePoster(e){this._proxy=new A(e,this._mfaPromises),this._mfa.setProxy(this._proxy)}async signWithUserSigner(e){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");let t=await this._privyInternal.getAccessTokenInternal();if(!t)throw new o.PrivyClientError({error:"User must be logged in to sign a message with the user signer",code:"user_signer_sign_error"});let{signature:r}=await this._proxy.signWithUserSigner({accessToken:t,message:e.message});return{signature:r}}async add(e){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if("user-controlled-server-wallets-only"===this._privyInternal.config?.embedded_wallet_config.mode)await (0,d.walletCreate)({context:{app:this._appApi,fetchPrivyRoute:(...e)=>this._privyInternal.fetch(...e),getCompiledPath:(...e)=>this._privyInternal.getPath(...e)},chainType:e.chainType});else{let t=await this._privyInternal.getAccessTokenInternal();if(!t)throw new o.PrivyClientError({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});await this._proxy.addWallet({accessToken:t,...e})}let{user:t}=await this._privyInternal.refreshSession();return{user:t}}async getBitcoinProvider({wallet:e,entropyId:t,entropyIdVerifier:r,recoveryPassword:n,recoveryAccessToken:i,recoverySecretOverride:a}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(!await this._privyInternal.getAccessTokenInternal())throw Error("User must be logged in to create an embedded wallet");return(0,f.isUnifiedWallet)(e)||await this._load({entropyId:t,entropyIdVerifier:r,wallet:e,recoveryPassword:n,recoveryAccessToken:i,recoverySecretOverride:a}),new c.EmbeddedBitcoinWalletProvider({account:e,privyInternal:this._privyInternal,proxy:this._proxy,entropyId:t,entropyIdVerifier:r})}async create({password:e,recoveryMethod:t,recoveryToken:r,recoveryKey:n,recoverySecretOverride:i,iCloudRecordNameOverride:a,solanaAccount:s,skipCallbacks:c}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if("user-controlled-server-wallets-only"===this._privyInternal.config?.embedded_wallet_config.mode){if(t&&!t.startsWith("privy"))throw new o.PrivyClientError({error:"User-controlled server wallets do not support custom recovery methods",code:"embedded_wallet_creation_error"});await (0,d.walletCreate)({context:{app:this._appApi,fetchPrivyRoute:(...e)=>this._privyInternal.fetch(...e),getCompiledPath:(...e)=>this._privyInternal.getPath(...e)},chainType:"ethereum"})}else{let o;if(o=t||(e?"user-passcode":"privy"),e&&"string"!=typeof e)throw Error("Invalid recovery password, must be a string");if("privy"===o&&this._privyInternal.config?.embedded_wallet_config.require_user_password_on_create)throw Error("Password not provided yet is required by App configuration");let c=await this._privyInternal.getAccessTokenInternal();if(!c)throw Error("User must be logged in to create an embedded wallet");let{address:l}=await this._proxy.create({accessToken:c,recoveryMethod:o,recoveryKey:n,recoveryPassword:e,recoveryAccessToken:r,recoverySecretOverride:i,iCloudRecordNameOverride:a,solanaAddress:s?.address});if(!l)throw Error("Failed to create wallet")}return await this._privyInternal.refreshSession(c)}async createSolana(e){if(!this._proxy)throw new o.PrivyClientError({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_creation_error"});if("user-controlled-server-wallets-only"===this._privyInternal.config?.embedded_wallet_config.mode)await (0,d.walletCreate)({context:{app:this._appApi,fetchPrivyRoute:(...e)=>this._privyInternal.fetch(...e),getCompiledPath:(...e)=>this._privyInternal.getPath(...e)},chainType:"solana"});else{let t=await this._privyInternal.getAccessTokenInternal();if(!t)throw new o.PrivyClientError({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});e?.ethereumAccount&&await this.getProvider(e.ethereumAccount);let{publicKey:r}=await this._proxy.createSolana({accessToken:t,ethereumAddress:e?.ethereumAccount?.address});if(!r)throw new o.PrivyClientError({error:"Failed to create wallet",code:"embedded_wallet_creation_error"})}return await this._privyInternal.refreshSession()}async delegateWallets({delegatedWallets:e,rootWallet:t}){if(!this._proxy)throw new o.PrivyClientError({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_creation_error"});let r=await this._privyInternal.getAccessTokenInternal();if(!r)throw new o.PrivyClientError({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});await this._proxy.delegateWallets({accessToken:r,delegatedWallets:e,rootWallet:t})}async getProvider(e,t,r,n,i){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return(0,f.isUnifiedWallet)(e)||await this._load({wallet:e,entropyId:e.address,entropyIdVerifier:"ethereum-address-verifier",recoveryPassword:t,recoveryKey:i,recoveryAccessToken:r,recoverySecretOverride:n}),new U({account:e,entropyId:e.address,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,appApi:this._appApi})}async getEthereumProvider({wallet:e,entropyId:t,entropyIdVerifier:r,recoveryPassword:n,recoveryAccessToken:i,recoverySecretOverride:a,recoveryKey:s,onNeedsRecovery:o}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(!await this._privyInternal.getAccessTokenInternal())throw Error("User must be logged in to create an embedded wallet");return(0,f.isUnifiedWallet)(e)||(!o||n||i||a||s)&&await this._load({entropyId:t,entropyIdVerifier:r,wallet:e,recoveryPassword:n,recoveryAccessToken:i,recoverySecretOverride:a,recoveryKey:s}),new U({account:e,entropyId:t,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,onNeedsRecovery:o,appApi:this._appApi})}async getSolanaProvider(e,t,r,n,i,a,s){if(!this._proxy)throw new o.PrivyClientError({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return(0,f.isUnifiedWallet)(e)||(!s||n||i||a)&&await this._load({wallet:e,entropyId:t,entropyIdVerifier:r,recoveryPassword:n,recoveryAccessToken:i,recoverySecretOverride:a}),new F({account:e,privyInternal:this._privyInternal,proxy:this._proxy,entropyId:t,entropyIdVerifier:r,onNeedsRecovery:s,app:this._appApi})}async setRecovery(e){let{wallet:t,...r}=e;if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if((0,f.isUnifiedWallet)(t))throw new o.PrivyClientError({error:"This wallet does not support setting recovery methods",code:"unsupported_recovery_method"});(0,_.throwIfInvalidRecoveryUpgradePath)({currentRecoveryMethod:t.recovery_method,upgradeToRecoveryMethod:"icloud-native"===r.recoveryMethod?"icloud":r.recoveryMethod}),await this._load("solana"===t.chain_type?{wallet:t,entropyId:t.address,entropyIdVerifier:"solana-address-verifier"}:{wallet:t,entropyId:t.address,entropyIdVerifier:"ethereum-address-verifier"});let n=await this._privyInternal.getAccessTokenInternal();if(!n)throw Error("User must be logged in to interact with embedded wallets");let i=t.recovery_method;this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_started",{address:t.address,target_recovery_method:r.recoveryMethod,existing_recovery_method:i});try{let e;if("user-passcode"===r.recoveryMethod)e={recoveryMethod:"user-passcode",recoveryPassword:r.password};else if("google-drive"===r.recoveryMethod)e={recoveryMethod:"google-drive",recoveryAccessToken:r.recoveryAccessToken};else if("icloud"===r.recoveryMethod)e={recoveryMethod:"icloud",recoveryAccessToken:r.recoveryAccessToken};else if("icloud-native"===r.recoveryMethod)e={recoveryMethod:"icloud-native",iCloudRecordNameOverride:r.iCloudRecordNameOverride,recoverySecretOverride:r.recoverySecretOverride};else if("recovery-encryption-key"===r.recoveryMethod)e={recoveryMethod:"recovery-encryption-key",recoveryKey:r.recoveryKey};else{if("privy"!==r.recoveryMethod)throw Error(`Unknown recovery method: ${r.recoveryMethod}`);e={recoveryMethod:"privy"}}await this._proxy.setRecovery({accessToken:n,entropyId:t.address,entropyIdVerifier:"solana"===t.chain_type?"solana-address-verifier":"ethereum-address-verifier",...e}),this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_completed",{address:t.address,target_recovery_method:r.recoveryMethod,existing_recovery_method:i});let{user:a}=await this._privyInternal.refreshSession();return{user:a,provider:"ethereum"!==t.chain_type?null:new U({account:t,entropyId:t.address,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,appApi:this._appApi})}}catch(e){throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_failed",{address:t.address,recovery_method:t.recovery_method,error:e instanceof Error?e.message:"Unable to recover wallet"}),e}}getURL(){let e=new URL(`${this._privyInternal.baseUrl}/apps/${this._privyInternal.appId}/embedded-wallets`);return this._privyInternal.caid&&e.searchParams.append("caid",this._privyInternal.caid),this._privyInternal.appClientId&&e.searchParams.append("client_id",this._privyInternal.appClientId),e.href}get chains(){return this._chains}onMessage(e){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return this._proxy.handleEmbeddedWalletMessages(e)}reload(){this._proxy?this._proxy.reload():console.warn("Attempted to reload proxy before initialized")}async ping(e){try{if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return await this._proxy.ping(e),!0}catch(e){return console.error(e),!1}}async _load({entropyId:e,entropyIdVerifier:t,wallet:r,recoveryPassword:n,recoveryKey:i,recoveryAccessToken:a,recoverySecretOverride:s}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");let o=await this._privyInternal.getAccessTokenInternal();if(!o)throw Error("User must be logged in to interact with embedded wallets");try{return await this._proxy.connect({accessToken:o,entropyId:e,entropyIdVerifier:t}),e}catch(c){if((0,l.errorIndicatesRecoveryIsNeeded)(c))try{if("privy"===r.recovery_method){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:r.recovery_method});let n=await this._proxy.recover({accessToken:o,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:r.recovery_method}),n.entropyId}if("user-passcode"===r.recovery_method&&n){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:r.recovery_method});let i=await this._proxy.recover({accessToken:o,recoveryPassword:n,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:r.recovery_method}),i.entropyId}if(["google-drive","icloud"].includes(r.recovery_method)&&a){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:r.recovery_method});let n=await this._proxy.recover({accessToken:o,recoveryAccessToken:a,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:r.recovery_method}),n.entropyId}if("icloud"===r.recovery_method&&s){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:"icloud-native"});let n=await this._proxy.recover({accessToken:o,recoverySecretOverride:s,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:"icloud-native"}),n.entropyId}if("recovery-encryption-key"===r.recovery_method&&i){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:r.recovery_method});let n=await this._proxy.recover({accessToken:o,recoveryKey:i,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:r.recovery_method}),n.entropyId}}catch(t){throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_failed",{address:r.address,recovery_method:r.recovery_method,error:t instanceof Error?t.message:`Unable to recover wallet: ${e}`}),t}throw c}}constructor(e,t,r,n,i,o){if(this._chains=Array.from(a.DEFAULT_SUPPORTED_CHAINS),this._privyInternal=e,t&&(this._proxy=new A(t,i),n.setProxy(this._proxy)),r){let e=(0,s.dedupeSupportedChains)(r);this._chains=e}this._mfa=n,this._mfaPromises=i,this._appApi=o}}var G=g;class B extends G.default{constructor(){super(),this.rootPromise={current:null},this.submitPromise={current:null}}}var V=e.i(732260);let W="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),H=new Uint8Array(16),K=[];for(let e=0;e<256;++e)K.push((e+256).toString(16).slice(1));let j=function(e,r,n){if(W&&!r&&!e)return W();let i=(e=e||{}).random||(e.rng||function(){if(!t&&!(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(H)})();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,r){n=n||0;for(let e=0;e<16;++e)r[n+e]=i[e];return r}return function(e,t=0){return K[e[t+0]]+K[e[t+1]]+K[e[t+2]]+K[e[t+3]]+"-"+K[e[t+4]]+K[e[t+5]]+"-"+K[e[t+6]]+K[e[t+7]]+"-"+K[e[t+8]]+K[e[t+9]]+"-"+K[e[t+10]]+K[e[t+11]]+K[e[t+12]]+K[e[t+13]]+K[e[t+14]]+K[e[t+15]]}(i)};var Y,q,J=((q={}).OAUTH_ACCOUNT_SUSPENDED="oauth_account_suspended",q.MISSING_OR_INVALID_PRIVY_APP_ID="missing_or_invalid_privy_app_id",q.MISSING_OR_INVALID_PRIVY_CLIENT_ID="missing_or_invalid_privy_client_id",q.MISSING_OR_INVALID_PRIVY_ACCOUNT_ID="missing_or_invalid_privy_account_id",q.MISSING_OR_INVALID_TOKEN="missing_or_invalid_token",q.MISSING_MFA_ENROLLMENT="missing_mfa_enrollment",q.MISSING_OR_INVALID_MFA="missing_or_invalid_mfa",q.EXPIRED_OR_INVALID_MFA_TOKEN="expired_or_invalid_mfa_token",q.INVALID_DATA="invalid_data",q.INVALID_CREDENTIALS="invalid_credentials",q.INVALID_CAPTCHA="invalid_captcha",q.LINKED_TO_ANOTHER_USER="linked_to_another_user",q.ALLOWLIST_REJECTED="allowlist_rejected",q.CANNOT_UNLINK_EMBEDDED_WALLET="cannot_unlink_embedded_wallet",q.CANNOT_UNLINK_SOLE_ACCOUNT="cannot_unlink_sole_account",q.CANNOT_LINK_MORE_OF_TYPE="cannot_link_more_of_type",q.LINKED_ACCOUNT_NOT_FOUND="linked_account_not_found",q.TOO_MANY_REQUESTS="too_many_requests",q.RESOURCE_CONFLICT="resource_conflict",q.INVALID_ORIGIN="invalid_origin",q.MISSING_ORIGIN="missing_origin",q.INVALID_NATIVE_APP_ID="invalid_native_app_id",q.TOKEN_ALREADY_USED="token_already_used",q.ALREADY_LOGGED_OUT="already_logged_out",q.NOT_SUPPORTED="not_supported",q.USER_UNSUBSCRIBED="user_unsubscribed",q.MAX_APPS_REACHED="max_apps_reached",q.USER_LIMIT_REACHED="max_accounts_reached",q.DEVICE_REVOKED="device_revoked",q.WALLET_PASSWORD_EXISTS="wallet_password_exists",q.OAUTH_STATE_MISMATCH="oauth_state_mismatch",q.MAX_DENYLIST_ENTRIES_REACHED="max_denylist_entries_reached",q.MAX_TEST_ACCOUNTS_REACHED="max_test_accounts_reached",q.DISALLOWED_LOGIN_METHOD="disallowed_login_method",q.DISALLOWED_PLUS_EMAIL="disallowed_plus_email",q.DISALLOWED_RECOVERY_METHOD="disallowed_recovery_method",q.LEGACY_DASHBOARD_LOGIN_CONFIGURATION="legacy_dashboard_login_configuration",q.CANNOT_SET_PASSWORD="cannot_set_password",q.INVALID_PKCE_PARAMETERS="invalid_pkce_parameters",q.INVALID_APP_URL_SCHEME_CONFIGURATION="invalid_app_url_scheme_configuration",q.CROSS_APP_CONNECTION_NOT_ALLOWED="cross_app_connection_not_allowed",q.USER_DOES_NOT_EXIST="user_does_not_exist",q.ALREADY_EXISTS="resource_already_exists",q.ACCOUNT_TRANSFER_REQUIRED="account_transfer_required",q.USER_HAS_NOT_DELEGATED_WALLET="user_has_not_delegated_wallet",q.FEATURE_NOT_ENABLED="feature_not_enabled",q.INSUFFICIENT_FUNDS="insufficient_funds",q.TRANSACTION_BROADCAST_FAILURE="transaction_broadcast_failure",q.TRANSACTION_EXECUTION_FAILURE="transaction_execution_failure",q.INVALID_POLICY_FORMAT="invalid_policy_format",q.POLICY_VIOLATION="policy_violation",q.AUTHORIZATION_KEY_HAS_ASSOCIATED_WALLETS="authorization_key_has_associated_wallets",q.INVALID_REQUEST="invalid_request",q.SIGNUP_DISABLED="signup_disabled",q);e.s(["PrivyErrorCode",()=>J],382743);let $={path:"/api/v1/apps/:app_id",method:"GET"},X={path:"/api/v1/analytics_events",method:"POST"},Z={path:"/api/v1/sessions",method:"POST"},Q={path:"/api/v1/sessions/logout",method:"POST"};var ee=g,et=e.i(840796);e.s(["base64url",0,et],199220);var et=et;function er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var en=function e(t,r){function n(e,n,i){if("undefined"!=typeof document){"number"==typeof(i=er({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in i)i[s]&&(a+="; "+s,!0!==i[s]&&(a+="="+i[s].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+a}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},i=0;i<r.length;i++){var a=r[i].split("="),s=a.slice(1).join("=");try{var o=decodeURIComponent(a[0]);if(n[o]=t.read(s,o),e===o)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",er({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,er({},this.attributes,t))},withConverter:function(t){return e(er({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});e.s(["default",()=>en],117595);var ei=e.i(553106);let ea=Promise.allSettled.bind(Promise)??(e=>Promise.all(e.map(e=>e.then(e=>({status:"fulfilled",value:e})).catch(e=>({status:"rejected",reason:e}))))),es="privy:token",eo="privy-token",ec="privy:pat",el="privy:refresh_token",ed="privy-refresh-token",e_="privy:id-token",ef="privy-id-token",eu="privy-session";class eh extends ee.default{set isUsingServerCookies(e){this._isUsingServerCookies=e}async getCustomerAccessToken(){let e=await this._storage.get(es);try{return"string"==typeof e?new ei.Token(e).value:null}catch(e){return console.error(e),await this.destroyLocalState({reason:"getToken_error"}),null}}async getPrivyAccessToken(){let e=await this._storage.get(ec);try{return"string"==typeof e?new ei.Token(e).value:null}catch(e){return console.error(e),await this.destroyLocalState({reason:"getToken_error"}),null}}async getRefreshToken(){let e=await this._storage.get(el);return"string"==typeof e?e:null}async getIdentityToken(){let e=await this._storage.get(e_);return"string"==typeof e?e:null}get mightHaveServerCookies(){try{let e=en.get(eu);return void 0!==e&&e.length>0}catch(e){console.error(e)}return!1}hasRefreshCredentials(e,t){return this.mightHaveServerCookies||"string"==typeof e&&"string"==typeof t}tokenIsActive(e){if(!e)return!1;let t=ei.Token.parse(e);return null!==t&&!t.isExpired(30)}async destroyLocalState(e){await ea([this._storage.del(es),this._storage.del(el),this._storage.del(e_),this._storage.del(this.GUEST_CREDENTIAL_STORAGE_KEY)]),en.remove(eo),en.remove(ed),en.remove(ef),en.remove(eu),e?.reason&&this.emit("storage_cleared",{reason:e.reason})}async storeCustomerAccessToken(e){if("string"==typeof e){let t=await this._storage.get(es);if(await this._storage.put(es,e),!this._isUsingServerCookies){let t=ei.Token.parse(e)?.expiration;en.set(eo,e,{sameSite:"Strict",secure:!0,expires:t?new Date(1e3*t):void 0})}t!==e&&this.emit("token_stored",{cookiesEnabled:this._isUsingServerCookies})}else{let e=await this._storage.get(es);await this._storage.del(es),en.remove(eo),null!==e&&this.emit("token_cleared",{reason:"set_with_non_string_value"})}}async storePrivyAccessToken(e){"string"==typeof e?await this._storage.put(ec,e):await this._storage.del(ec)}async storeRefreshToken(e){"string"==typeof e?(await this._storage.put(el,e),this._isUsingServerCookies||(en.set(eu,"t",{sameSite:"Strict",secure:!0,expires:30}),en.set(ed,e,{sameSite:"Strict",secure:!0,expires:30})),this.emit("refresh_token_stored",{cookiesEnabled:this._isUsingServerCookies})):(await this._storage.del(el),en.remove(ed),en.remove(eu),this.emit("refresh_token_cleared",{reason:"set_with_non_string_value"}))}async updateWithTokensResponse(e){let t=(await ea([this.storeCustomerAccessToken(e.token),this.storePrivyAccessToken(e.privy_access_token),this.storeRefreshToken(e.refresh_token),this.storeIdentityToken(e.identity_token),this.processOAuthTokens(e.oauth_tokens)])).filter(e=>"rejected"===e.status);t.length>0&&this.emit("error_storing_tokens",t.map(e=>String(e.reason)).join(", "))}async processOAuthTokens(e){e&&this.emit("oauth_tokens_granted",e)}async storeIdentityToken(e){if("string"==typeof e){let t=await this._storage.get(e_);if(await this._storage.put(e_,e),!this._isUsingServerCookies){let t=ei.Token.parse(e)?.expiration;en.set(ef,e,{sameSite:"Strict",secure:!0,expires:t?new Date(1e3*t):void 0})}t!==e&&this.emit("identity_token_stored",{cookiesEnabled:this._isUsingServerCookies})}else{let e=await this._storage.get(e_);await this._storage.del(e_),en.remove(ef),null!==e&&this.emit("identity_token_cleared",{reason:"set_with_non_string_value"})}}async getOrCreateGuestCredential(){let e=this._storage.get(this.GUEST_CREDENTIAL_STORAGE_KEY);if(e&&"string"==typeof e)return e;let t=et.encode(crypto.getRandomValues(new Uint8Array(32)));return await this._storage.put(this.GUEST_CREDENTIAL_STORAGE_KEY,t),t}constructor(e){super(),this._isUsingServerCookies=!1,this._storage=e.storage,this.GUEST_CREDENTIAL_STORAGE_KEY=`privy:guest:${e.appId}`}}eh.events=["storage_cleared","token_cleared","refresh_token_cleared","identity_token_cleared","token_stored","refresh_token_stored","identity_token_stored","oauth_tokens_granted","error_storing_tokens"];let ep=()=>{},ey={NONE:-1/0,ERROR:1,WARN:2,INFO:3,DEBUG:1/0},eE="privy:caid";class eA{setCallbacks(e){this.callbacks={...this.callbacks,...e}}get isReady(){return!!this._config}get config(){return this._config}get caid(){return this._analyticsId}async _initialize(){if(this.isReady)this.callbacks?.setIsReady?.(!0);else{if(!await this.isStorageAccessible())throw new o.PrivyClientError({code:"storage_error",error:"Unable to access storage"});this._config=await this.getAppConfig(),this._config?.custom_api_url&&(this.baseUrl=this._config.custom_api_url,this.session.isUsingServerCookies=!0),this.callbacks?.setIsReady?.(!0),this._sdkVersion.startsWith("react-auth:")||this.createAnalyticsEvent("sdk_initialize",{})}}getPath(e,{params:t,query:r}){let n;return`${this.baseUrl}${n=e.path,t?Object.entries(t).reduce((e,[t,r])=>e.replace(`:${t}`,`${r}`),n):n}${function(e){let t=new URLSearchParams;for(let r in e)null!=e[r]&&t.append(r,String(e[r]));return Array.from(t).length?"?"+t.toString():""}(r)}`}async fetch(e,{body:t,params:r,query:n,headers:i,onRequest:a=this._beforeRequest.bind(this)}){let s=new Request(this.getPath(e,{params:r,query:n}),{method:e.method,body:JSON.stringify(t),headers:i}),c=await a(s),l=await this._fetch(s,c),d=await l.json();if(l.status>299)throw new o.PrivyApiError(d);return d}async _beforeRequestWithoutInitialize(e){let t,r=await this.session.getPrivyAccessToken()??await this.session.getCustomerAccessToken(),n=new Headers(e.headers);n.set("privy-app-id",this.appId),this.appClientId&&n.set("privy-client-id",this.appClientId),n.set("privy-client",this._sdkVersion),r&&n.set("Authorization",`Bearer ${r}`),n.set("Content-Type","application/json"),n.set("Accept","application/json");let i=await this._getOrGenerateClientAnalyticsId();return i&&n.set("privy-ca-id",i),this.nativeAppIdentifier&&n.set("x-native-app-identifier",this.nativeAppIdentifier),{signal:(t=new AbortController,setTimeout(()=>t.abort(),2e4),t.signal),headers:n,credentials:"include"}}async beforeRequestWithoutRefresh(e){return await this._initialize(),this._beforeRequestWithoutInitialize(e)}async _beforeRequest(e){return await this._initialize(),await this.getAccessTokenInternal(),this.beforeRequestWithoutRefresh(e)}async getAppConfig(){return await this.fetch($,{params:{app_id:this.appId},onRequest:this._beforeRequestWithoutInitialize.bind(this)})}async _getOrGenerateClientAnalyticsId(){if(this._analyticsId)return this._analyticsId;try{let e=await this._storage.get(eE);if("string"==typeof e&&e.length>0)return this._analyticsId=e,e}catch(e){this.logger.error("Unable to load clientId",e)}try{this._analyticsId=j()}catch(e){this.logger.error("Unable to generate uuidv4",e)}if(this._analyticsId){try{await this._storage.put(eE,this._analyticsId)}catch(e){this.logger.error(`Unable to store clientId: ${this._analyticsId}`,e)}return this._analyticsId}}async destroyClientAnalyticsId(){try{return await this._storage.del(eE)}catch(e){this.logger.error("Unable to delete clientId",e)}}async createAnalyticsEvent(e,t){try{await this.fetch(X,{body:{event_name:e,client_id:await this._getOrGenerateClientAnalyticsId(),payload:t},onRequest:this.beforeRequestWithoutRefresh.bind(this)})}catch(e){}}async refreshSession(e=!1){if(!await this.isStorageAccessible())throw new o.PrivyClientError({code:"storage_error",error:"Unable to access storage"});let t=await this.session.getRefreshToken()??void 0,r=t??"key",n=this._cache.get(r);if(n)return this.logger.debug("[privy:refresh] found in-flight session refresh request, deduping"),await n;let i=this._refreshSession(t,e);this._cache.set(r,i);try{return await i}finally{this._cache.delete(r)}}async _refreshSession(e,t){let r=await this.session.getCustomerAccessToken();if(!this.session.hasRefreshCredentials(r,e??null))throw this.logger.debug("[privy:refresh] missing tokens, skipping request"),await this._initialize(),new o.PrivyApiError({code:J.MISSING_OR_INVALID_TOKEN,error:"No tokens found in storage"});try{this.logger.debug(`[privy:refresh] fetching: ${Z.path}`);let r=await this.fetch(Z,{body:{refresh_token:e},onRequest:this.beforeRequestWithoutRefresh.bind(this)}),n=r.session_update_action;return this.logger.debug(`[privy:refresh] response: ${n}`),t||this.callbacks?.setUser?.(r.user),"set"===n&&(await this.session.updateWithTokensResponse(r),this.logger.debug("[privy:refresh] tokens stored")),"clear"===n&&(await this.session.destroyLocalState(),this.logger.debug("[privy:refresh] tokens cleared"),t||this.callbacks?.setUser?.(null)),"ignore"===n&&r.token&&(await this.session.storeCustomerAccessToken(r.token),await this.session.storePrivyAccessToken(r.privy_access_token),this.logger.debug("[privy:refresh] access token stored"),r.identity_token&&(this.logger.debug("[privy:refresh] identity token stored"),await this.session.storeIdentityToken(r.identity_token))),this.logger.debug("[privy:refresh] returning response"),r}catch(e){throw this.logger.debug(`[privy:refresh] error: ${e.message??"unknown error"}`),e instanceof o.PrivyApiError&&e.code===J.MISSING_OR_INVALID_TOKEN&&(await this.session.destroyLocalState(),t||this.callbacks?.setUser?.(null)),e}}async getAccessToken(){let[e,t]=await Promise.all([this.session.getCustomerAccessToken(),this.session.getRefreshToken()]);if(!this.session.tokenIsActive(e)&&this.session.hasRefreshCredentials(e,t)){let t=await this.refreshSession(),r=await this.session.getCustomerAccessToken();return t.token||this.logger.debug("[privy:getAccessToken] expected token received null"),t.token===e&&this.logger.debug("[privy:getAccessToken] expected new token in response received existing"),r===e&&this.logger.debug("[privy:getAccessToken] expected new token in storage received existing"),t.token??r}return e}async getAccessTokenInternal(){let e=await this.getAccessToken();return await this.session.getPrivyAccessToken()??e}async getIdentityToken(){return await this.session.getIdentityToken()}async isStorageAccessible(){try{let e=`privy:__storage__test-${j()}`,t="blobby";await this._storage.put(e,t);let r=await this._storage.get(e);return await this._storage.del(e),r===t}catch(e){return this.logger.error(e),!1}}constructor(e){this._sdkVersion="js-sdk-core:0.58.5",this._cache=new Map,this.logger=(({level:e}={level:"ERROR"})=>({get level(){return e},error:ey[e]>=ey.ERROR?console.error:ep,warn:ey[e]>=ey.WARN?console.warn:ep,info:ey[e]>=ey.INFO?console.info:ep,debug:ey[e]>=ey.DEBUG?console.debug:ep}))({level:e.logLevel??"ERROR"}),this._storage=e.storage,this._analyticsId=null,this._getOrGenerateClientAnalyticsId(),this.baseUrl=e.baseUrl??"https://auth.privy.io",this.appId=e.appId,this.appClientId=e.appClientId,this._sdkVersion=e.sdkVersion??this._sdkVersion,this.callbacks=e.callbacks,this.nativeAppIdentifier=e.nativeAppIdentifier,this.session=new eh({storage:this._storage,isUsingServerCookies:!1,appId:e.appId}),this._fetch=(0,V.default)(globalThis.fetch,{retries:3,retryDelay:e=>3**e*500,retryOn:[408,409,425,500,502,503,504]}),this.session.on("error_storing_tokens",e=>{this.createAnalyticsEvent("error_updating_tokens_in_storage",{reason:e})})}}let eg={path:"/api/v1/users/me/accept_terms",method:"POST"};class eR{async get(){let{user:e}=await this._privyInternal.refreshSession();return{user:e}}async acceptTerms(){return{user:await this._privyInternal.fetch(eg,{})}}constructor(e){this._privyInternal=e}}let eS={path:"/api/v1/custom_jwt_account/authenticate",method:"POST"},eI=e=>"wallet"===e.type&&"privy"===e.wallet_client_type&&"embedded"===e.connector_type,em=e=>e?e.linked_accounts.filter(eI).filter(e=>"ethereum"===e.chain_type).sort((e,t)=>e.wallet_index-t.wallet_index):[],eO=e=>em(e).find(e=>0===e.wallet_index)??null,ev=e=>e?e.linked_accounts.filter(eI).filter(e=>"solana"===e.chain_type).sort((e,t)=>e.wallet_index-t.wallet_index):[],eT=async(e,t,r)=>{let n,i,a,s,o=(n=t.user,!("off"===(i=r?.ethereum?.createOnLogin??"off")||em(n).length>0||n.linked_accounts.filter(e=>"wallet"===e.type&&"ethereum"===e.chain_type).length>0&&"all-users"!==i)),c=(a=t.user,!("off"===(s=r?.solana?.createOnLogin??"off")||ev(a).length>0||a.linked_accounts.filter(e=>"wallet"===e.type&&"solana"===e.chain_type).length>0&&"all-users"!==s));if(o&&c){let r=await e.create({recoveryMethod:"privy",skipCallbacks:!0});return{...await e.createSolana({ethereumAccount:eO(r.user)??void 0}),is_new_user:t.is_new_user,oauth_tokens:t.oauth_tokens}}return o?{...await e.create({recoveryMethod:"privy",solanaAccount:ev(t.user).find(e=>0===e.wallet_index)??null??void 0}),is_new_user:t.is_new_user,oauth_tokens:t.oauth_tokens}:c?{...await e.createSolana({ethereumAccount:eO(t.user)??void 0}),is_new_user:t.is_new_user,oauth_tokens:t.oauth_tokens}:t};class ew{async syncWithToken(e,t,r){let n=await this._privyInternal.fetch(eS,{body:{token:e,mode:r}});await this._privyInternal.session.updateWithTokensResponse(n);let i=await eT(this._embedded,n,t?.embedded);return this._privyInternal.callbacks?.setUser?.(i.user),i}constructor(e,t){this._privyInternal=e,this._embedded=t}}let eN={path:"/api/v1/passwordless/authenticate",method:"POST"},eC={path:"/api/v1/passwordless/init",method:"POST"},eb={path:"/api/v1/passwordless/link",method:"POST"},eD={path:"/api/v1/passwordless/unlink",method:"POST"},eL={path:"/api/v1/passwordless/update",method:"POST"};class ek{async sendCode(e,t){return this._privyInternal.fetch(eC,{body:{email:e,token:t}})}async loginWithCode(e,t,r,n){let i=await this._privyInternal.fetch(eN,{body:{email:e,code:t,mode:r}});await this._privyInternal.session.updateWithTokensResponse(i);let a=await eT(this._embedded,i,n?.embedded);return this._privyInternal.callbacks?.setUser?.(a.user),a}async linkWithCode(e,t){await this._privyInternal.fetch(eb,{body:{email:e,code:t}});let r=await this._privyInternal.refreshSession();return{user:r.user,identity_token:r.identity_token}}async updateEmail({oldEmailAddress:e,newEmailAddress:t,code:r}){await this._privyInternal.fetch(eL,{body:{oldAddress:e,newAddress:t,code:r}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}async unlink(e){await this._privyInternal.fetch(eD,{body:{address:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}constructor(e,t){this._privyInternal=e,this._embedded=t}}let eP={path:"/api/v1/farcaster/init",method:"POST"},eU={path:"/api/v1/farcaster/authenticate",method:"POST"},ex={path:"/api/v1/farcaster/link",method:"POST"},eM={path:"/api/v1/farcaster/unlink",method:"POST"},eF={path:"/api/v1/farcaster/status",method:"GET"},ez={path:"/api/v2/farcaster/init",method:"POST"},eG={path:"/api/v2/farcaster/authenticate",method:"POST"};class eB{async initializeAuth({relyingParty:e,redirectUrl:t,token:r}){return await this._privyInternal.fetch(eP,{body:{relying_party:e,redirect_url:t,token:r}})}async getFarcasterStatus({channel_token:e}){return await this._privyInternal.fetch(eF,{headers:{"farcaster-channel-token":e}})}async authenticate({channel_token:e,message:t,signature:r,fid:n,mode:i},a){let s=await this._privyInternal.fetch(eU,{body:{channel_token:e,message:t,signature:r,fid:n,mode:i}});await this._privyInternal.session.updateWithTokensResponse(s);let o=await eT(this._embedded,s,a?.embedded);return this._privyInternal.callbacks?.setUser?.(o.user),o}async link({channel_token:e,message:t,signature:r,fid:n}){await this._privyInternal.fetch(ex,{body:{channel_token:e,message:t,signature:r,fid:n}});let i=await this._privyInternal.refreshSession();return{user:i.user,identity_token:i.identity_token}}async unlink({fid:e}){await this._privyInternal.fetch(eM,{body:{fid:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}constructor(e,t){this._privyInternal=e,this._embedded=t}}class eV{async initializeAuth(){return await this._privyInternal.fetch(ez,{body:{}})}async authenticate({message:e,signature:t,fid:r},n){let i=await this._privyInternal.fetch(eG,{body:{message:e,signature:t,fid:r}});await this._privyInternal.session.updateWithTokensResponse(i);let a=await eT(this._embedded,i,n?.embedded);return this._privyInternal.callbacks?.setUser?.(a.user),a}constructor(e,t){this._privyInternal=e,this._embedded=t}}let eW={path:"/api/v1/guest/authenticate",method:"POST"};class eH{async create(e){let t=await this._privyInternal.session.getOrCreateGuestCredential(),r=await this._privyInternal.fetch(eW,{body:{guest_credential:t}});await this._privyInternal.session.updateWithTokensResponse(r);let n=await eT(this._embedded,r,e?.embedded);return this._privyInternal.callbacks?.setUser?.(n.user),n}constructor(e,t){this._privyInternal=e,this._embedded=t}}let eK={path:"/api/v1/oauth/authenticate",method:"POST"},ej={path:"/api/v1/oauth/init",method:"POST"},eY={path:"/api/v1/oauth/link",method:"POST"},eq={path:"/api/v1/oauth/unlink",method:"POST"};var et=et;let eJ="privy:state_code",e$="privy:code_verifier";async function eX(e,t){let r=(new TextEncoder).encode(e);return new Uint8Array(await t("SHA-256",r))}function eZ(){return et.encode(crypto.getRandomValues(new Uint8Array(36)))}async function eQ({codeVerifier:e,method:t="S256",digest:r=crypto.subtle.digest.bind(crypto.subtle)}){if("S256"!=t)return e;{let t=await eX(e,r);return et.encode(t)}}class e0{async generateURL(e,t){let r=eZ(),n=eZ(),i=await eQ({codeVerifier:r,digest:this._crypto?.digest});return await Promise.all([this._storage.put(e$,r),this._storage.put(eJ,n)]),this._privyInternal.fetch(ej,{body:{redirect_to:t,provider:e,code_challenge:i,state_code:n}})}async loginWithCode(e,t,r,n,i,a){let[s,c]=await Promise.all([this._storage.get(e$),this._storage.get(eJ)]);if(c!==t)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"oauth",provider:r,storedStateCode:c??"",returnedStateCode:t??""}),new o.PrivyClientError({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let l=await this._privyInternal.fetch(eK,{body:{authorization_code:e,code_type:n,state_code:c,code_verifier:s,mode:i}});await this._privyInternal.session.updateWithTokensResponse(l);let d=await eT(this._embedded,l,a?.embedded);return await Promise.all([this._storage.del(e$),this._storage.del(eJ)]),this._privyInternal.callbacks?.setUser?.(d.user),d}async linkWithCode(e,t,r,n){let[i,a]=await Promise.all([this._storage.get(e$),this._storage.get(eJ)]);if(a!==t)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"oauth",provider:r,storedStateCode:a??"",returnedStateCode:t??""}),new o.PrivyClientError({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let s=await this._privyInternal.fetch(eY,{body:{authorization_code:e,code_type:n,state_code:a,code_verifier:i}});await this._privyInternal.session.processOAuthTokens(s.oauth_tokens);let c=await this._privyInternal.refreshSession();return await Promise.all([this._storage.del(e$),this._storage.del(eJ)]),{user:c.user,identity_token:c.identity_token}}async unlink(e,t){await this._privyInternal.fetch(eq,{body:{provider:e,subject:t}});let r=await this._privyInternal.refreshSession();return{user:r.user,identity_token:r.identity_token}}constructor(e,t,r,n){this._privyInternal=e,this._embedded=t,this._storage=r,this._crypto=n}}let e1={path:"/api/v1/passkeys/link",method:"POST"},e6={path:"/api/v1/passkeys/authenticate",method:"POST"},e2={path:"/api/v1/passkeys/register",method:"POST"},e8={path:"/api/v1/passkeys/authenticate/init",method:"POST"},e3={path:"/api/v1/passkeys/register/init",method:"POST"},e4={path:"/api/v1/passkeys/link/init",method:"POST"};class e5{async generateRegistrationOptions(e){return await this._privyInternal.fetch(e4,{body:{relying_party:e}})}async generateAuthenticationOptions(e){return await this._privyInternal.fetch(e8,{body:{relying_party:e}})}async generateSignupOptions(e){return await this._privyInternal.fetch(e3,{body:{relying_party:e}})}async loginWithPasskey(e,t,r,n){let i=await this._privyInternal.fetch(e6,{body:{relying_party:r,challenge:t,authenticator_response:this._transformAuthenticationResponseToSnakeCase(e)}});await this._privyInternal.session.updateWithTokensResponse(i);let a=await eT(this._embedded,i,n?.embedded);return this._privyInternal.callbacks?.setUser?.(a.user),a}async signupWithPasskey(e,t,r){let n=await this._privyInternal.fetch(e2,{body:{relying_party:t,authenticator_response:this._transformRegistrationResponseToSnakeCase(e)}});await this._privyInternal.session.updateWithTokensResponse(n);let i=await eT(this._embedded,n,r?.embedded);return this._privyInternal.callbacks?.setUser?.(i.user),i}async linkWithPasskey(e,t){await this._privyInternal.fetch(e1,{body:{relying_party:t,authenticator_response:this._transformRegistrationResponseToSnakeCase(e)}});let r=await this._privyInternal.refreshSession();return{user:r.user,identity_token:r.identity_token}}_transformRegistrationResponseToSnakeCase(e){return{type:e.type,id:e.id,raw_id:e.rawId,response:{client_data_json:e.response.clientDataJSON,attestation_object:e.response.attestationObject,authenticator_data:e.response.authenticatorData||void 0,transports:e.response.transports||void 0,public_key:e.response.publicKey||void 0,public_key_algorithm:e.response.publicKeyAlgorithm||void 0},authenticator_attachment:e.authenticatorAttachment||void 0,client_extension_results:{app_id:e.clientExtensionResults.appid||void 0,cred_props:e.clientExtensionResults.credProps||void 0,hmac_create_secret:e.clientExtensionResults.hmacCreateSecret||void 0}}}_transformAuthenticationResponseToSnakeCase(e){return{type:e.type,id:e.id,raw_id:e.rawId,response:{signature:e.response.signature,client_data_json:e.response.clientDataJSON,authenticator_data:e.response.authenticatorData,user_handle:e.response.userHandle||void 0},authenticator_attachment:e.authenticatorAttachment||void 0,client_extension_results:{app_id:e.clientExtensionResults.appid||void 0,cred_props:e.clientExtensionResults.credProps||void 0,hmac_create_secret:e.clientExtensionResults.hmacCreateSecret||void 0}}}constructor(e,t){this._privyInternal=e,this._embedded=t}}let e7={path:"/api/v1/passwordless_sms/authenticate",method:"POST"},e9={path:"/api/v1/passwordless_sms/init",method:"POST"},te={path:"/api/v1/passwordless_sms/link",method:"POST"},tt={path:"/api/v1/passwordless_sms/unlink",method:"POST"},tr={path:"/api/v1/passwordless_sms/update",method:"POST"};class tn{async sendCode(e,t){return this._privyInternal.fetch(e9,{body:{phoneNumber:e,token:t}})}async loginWithCode(e,t,r,n){let i=await this._privyInternal.fetch(e7,{body:{phoneNumber:e,code:t,mode:r}});await this._privyInternal.session.updateWithTokensResponse(i);let a=await eT(this._embedded,i,n?.embedded);return this._privyInternal.callbacks?.setUser?.(a.user),a}async linkWithCode(e,t){await this._privyInternal.fetch(te,{body:{phoneNumber:e,code:t}});let r=await this._privyInternal.refreshSession();return{user:r.user,identity_token:r.identity_token}}async updatePhone({oldPhoneNumber:e,newPhoneNumber:t,code:r}){await this._privyInternal.fetch(tr,{body:{old_phone_number:e,new_phone_number:t,code:r}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}async unlink(e){await this._privyInternal.fetch(tt,{body:{phoneNumber:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}constructor(e,t){this._privyInternal=e,this._embedded=t}}let ti={path:"/api/v1/siwe/init",method:"POST"},ta={path:"/api/v1/siwe/authenticate",method:"POST"},ts={path:"/api/v1/siwe/link",method:"POST"},to={path:"/api/v1/siwe/link_smart_wallet",method:"POST"},tc={path:"/api/v1/siwe/unlink",method:"POST"};class tl{async unlinkWallet(e){await this._privyInternal.fetch(tc,{body:{address:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}async linkWithSiwe(e,t,r){let n=t||this._wallet,i=r||this._preparedMessage;if(!n)throw Error("A wallet must be provided in the init step or as an argument to linkWithSiwe");if(!i)throw Error("A message must be generated and signed before being used to link a wallet to privy");await this._privyInternal.fetch(ts,{body:{message:i,signature:e,chainId:n.chainId,walletClientType:n.walletClientType??null,connectorType:n.connectorType??null}});let a=await this._privyInternal.refreshSession();return{user:a.user,identity_token:a.identity_token}}async loginWithSiwe(e,t,r,n,i){let a=t||this._wallet,s=r||this._preparedMessage;if(!a)throw Error("A wallet must be provided in the init step or as an argument to loginWithSiwe");if(!s)throw Error("A message must be generated and signed before being used to login to privy with a wallet");let o=await this._privyInternal.fetch(ta,{body:{signature:e,message:s,chainId:a.chainId,walletClientType:a.walletClientType??null,connectorType:a.connectorType??null,mode:n}});await this._privyInternal.session.updateWithTokensResponse(o);let c=await eT(this._embedded,o,i?.embedded);return this._privyInternal.callbacks?.setUser?.(c.user),c}async init(e,t,r){var n;this._wallet=e;let{nonce:i}=await this._privyInternal.fetch(ti,{body:{address:e.address}}),a=`${(n={chainId:e.chainId.toString().replace("eip155:",""),address:e.address,issuedAt:(new Date).toISOString(),statement:"By signing, you are proving you own this wallet and logging in. This does not initiate a transaction or cost any fees.",domain:t,nonce:i,uri:r}).domain} wants you to sign in with your Ethereum account:
${n.address}

${n.statement}

URI: ${n.uri}
Version: 1
Chain ID: ${n.chainId}
Nonce: ${n.nonce}
Issued At: ${n.issuedAt}
Resources:
- https://privy.io`;return this._preparedMessage=a,{nonce:i,message:a}}constructor(e,t){this._wallet=void 0,this._privyInternal=e,this._embedded=t}}let td={path:"/api/v1/siws/init",method:"POST"},t_={path:"/api/v1/siws/authenticate",method:"POST"},tf={path:"/api/v1/siws/link",method:"POST"},tu={path:"/api/v1/siws/unlink",method:"POST"};class th{async unlink({address:e}){await this._privyInternal.fetch(tu,{body:{address:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}async link({message:e,signature:t,walletClientType:r,connectorType:n}){await this._privyInternal.fetch(tf,{body:{message:e,signature:t,walletClientType:r??null,connectorType:n??null}});let i=await this._privyInternal.refreshSession();return{user:i.user,identity_token:i.identity_token}}async login({mode:e,message:t,signature:r,walletClientType:n,connectorType:i,opts:a}){let s=await this._privyInternal.fetch(t_,{body:{signature:r,message:t,walletClientType:n??null,connectorType:i??null,mode:e}});await this._privyInternal.session.updateWithTokensResponse(s);let o=await eT(this._embedded,s,a?.embedded);return this._privyInternal.callbacks?.setUser?.(o.user),o}async fetchNonce({address:e}){let{nonce:t}=await this._privyInternal.fetch(td,{body:{address:e}});return{nonce:t}}constructor(e,t){this._privyInternal=e,this._embedded=t}}class tp{async link(e,t,r,n){await this._privyInternal.fetch(to,{body:{message:e,signature:t,smart_wallet_type:r,smart_wallet_version:n}});let i=await this._privyInternal.refreshSession();return{user:i.user,identity_token:i.identity_token}}async init(e){var t;let{nonce:r}=await this._privyInternal.fetch(ti,{body:{address:e.address}});return{nonce:r,message:`${(t={chainId:e.chainId.toString().replace("eip155:",""),address:e.address,issuedAt:(new Date).toISOString(),statement:"By signing, you are proving you own this wallet and logging in. This does not initiate a transaction or cost any fees.",domain:"privy.io",uri:"https://auth.privy.io",nonce:r}).domain} wants you to sign in with your Ethereum account:
${t.address}

${t.statement}

URI: ${t.uri}
Version: 1
Chain ID: ${t.chainId}
Nonce: ${t.nonce}
Issued At: ${t.issuedAt}
Resources:
- https://privy.io`}}constructor(e){this._privyInternal=e}}class ty{async logout(e){try{let e=await this._privyInternal.session.getRefreshToken()??void 0;await this._privyInternal.fetch(Q,{body:{refresh_token:e}})}catch(e){console.warn("Error destroying session")}await Promise.all([this._privyInternal.session.destroyLocalState({reason:"logout"}),this._privyInternal.destroyClientAnalyticsId(),e?.userId&&this._mfa.clearMfa({userId:e.userId})]),this._privyInternal.callbacks?.setUser?.(null)}constructor(e,t,r,n,i){this._privyInternal=e,this._mfa=i,this.customProvider=new ew(this._privyInternal,t),this.phone=new tn(this._privyInternal,t),this.email=new ek(this._privyInternal,t),this.oauth=new e0(this._privyInternal,t,r,n),this.guest=new eH(this._privyInternal,t),this.siwe=new tl(this._privyInternal,t),this.siws=new th(this._privyInternal,t),this.smartWallet=new tp(this._privyInternal),this.passkey=new e5(this._privyInternal,t),this.farcaster=new eB(this._privyInternal,t),this.farcasterV2=new eV(this._privyInternal,t)}}let tE={path:"/api/v1/funding/coinbase_on_ramp/init",method:"POST"},tA={path:"/api/v1/funding/coinbase_on_ramp/status",method:"GET"};class tg{async initOnRampSession(e){return await this._privyInternal.fetch(tE,{body:e})}async getStatus(e){return await this._privyInternal.fetch(tA,{query:{partnerUserId:e}})}constructor(e){this._privyInternal=e}}let tR={path:"/api/v1/plugins/moonpay_on_ramp/sign",method:"POST"};var tS=e.i(920209);class tI{async sign(e){return await this._privyInternal.fetch(tR,{body:e})}async getTransactionStatus({transactionId:e,useSandbox:t}){let{url:r,key:n}=tS.MoonpayEnvironments[t?"sandbox":"prod"],i=await (0,V.default)(fetch,{retries:3,retryDelay:500})(`${r}/transactions/ext/${e}?apiKey=${n}`);if(!i.ok)throw new o.MoonpayApiError({error:`Failed to fetch transaction status for Transaction ${e}`,code:"failed_to_fetch_moonpay_transaction_status",response:i});let a=await i.json();return Array.isArray(a)?a.at(0):void 0}constructor(e){this._privyInternal=e}}class tm{constructor(e){this.moonpay=new tI(e),this.coinbase=new tg(e)}}let tO={path:"/api/v1/mfa/passkeys/init",method:"POST"};class tv{async generateAuthenticationOptions(e){return await this._privyInternal.fetch(tO,{body:e})}constructor(e){this._privyInternal=e}}let tT={path:"/api/v1/mfa/passwordless_sms/init",method:"POST"};class tw{async sendCode(e){return await this._privyInternal.fetch(tT,{body:e})}constructor(e){this._privyInternal=e}}class tN{setProxy(e){this.proxy=e}async getAccessTokenInternal(){let e=await this.privyInternal.getAccessTokenInternal();if(!e)throw new o.PrivyClientError({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});return e}async verifyMfa(){if(!this.proxy)throw new o.PrivyClientError({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.verifyMfa({accessToken:await this.getAccessTokenInternal()})}async initEnrollMfa(e){if(!this.proxy)throw new o.PrivyClientError({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.initEnrollMfa({...e,accessToken:await this.getAccessTokenInternal()})}async submitEnrollMfa(e){if(!this.proxy)throw new o.PrivyClientError({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});let t=await this.proxy.submitEnrollMfa({...e,accessToken:await this.getAccessTokenInternal()});return await this.privyInternal.refreshSession(),t}async unenrollMfa(e){if(!this.proxy)throw new o.PrivyClientError({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});let t=await this.proxy.unenrollMfa({method:e,accessToken:await this.getAccessTokenInternal()});return await this.privyInternal.refreshSession(),t}async clearMfa(e){if(!this.proxy)throw new o.PrivyClientError({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.clearMfa(e)}constructor(e,t){this.proxy=t,this.privyInternal=e,this.sms=new tw(e),this.passkey=new tv(e)}}let tC={path:"/api/v1/embedded_wallets/:address/recovery/key_material",method:"POST"},tb={path:"/api/v1/recovery/oauth/init",method:"POST"},tD={path:"/api/v1/recovery/oauth/authenticate",method:"POST"},tL={path:"/api/v1/recovery/oauth/init_icloud",method:"POST"},tk={path:"/api/v1/recovery/configuration_icloud",method:"POST"},tP=class{async init(e){return this._privyInternal.fetch(tL,{body:{client_type:e}})}async getICloudConfiguration(e){return this._privyInternal.fetch(tk,{body:{client_type:e}})}constructor(e){this._privyInternal=e}};class tU{async generateURL(e){let t=eZ(),r=eZ(),n=await eQ({codeVerifier:t,digest:this._crypto?.digest});return await Promise.all([this._storage.put(e$,t),this._storage.put(eJ,r)]),this._privyInternal.fetch(tb,{body:{redirect_to:e,code_challenge:n,state_code:r}})}async authorize(e,t){let[r,n]=await Promise.all([this._storage.get(e$),this._storage.get(eJ)]);if(n!==t)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"recovery_oauth",storedStateCode:n??"",returnedStateCode:t??""}),new o.PrivyClientError({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let i=await this._privyInternal.fetch(tD,{body:{authorization_code:e,state_code:n,code_verifier:r}});return await Promise.all([this._storage.del(e$),this._storage.del(eJ)]),i}constructor(e,t,r){this._privyInternal=e,this._storage=t,this._crypto=r}}class tx{async getRecoveryKeyMaterial(e,t){return this._privyInternal.fetch(tC,{body:{chain_type:t},params:{address:e}})}constructor(e,t,r){this._privyInternal=e,this.auth=new tU(this._privyInternal,t,r),this.icloudAuth=new tP(this._privyInternal)}}class tM{async initialize(){await this._privyInternal._initialize()}setMessagePoster(e){this.embeddedWallet.setMessagePoster(e)}addOAuthTokensListener(e){return this._privyInternal.session.on("oauth_tokens_granted",e),{unsubscribe:()=>{this._privyInternal.session.removeListener("oauth_tokens_granted",e)}}}setCallbacks(e){this._privyInternal.setCallbacks(e)}getAccessToken(){return this._privyInternal.getAccessToken()}getIdentityToken(){return this._privyInternal.getIdentityToken()}getCompiledPath(e,t){return this._privyInternal.getPath(e,t)}async fetchPrivyRoute(e,t){return this._privyInternal.fetch(e,t)}get logger(){return this._privyInternal.logger}constructor({clientId:e,...t}){this._privyInternal=new eA({...t,appClientId:e}),this.mfa=new tN(this._privyInternal),this.mfaPromises=new B,this.app=new r.default(this._privyInternal),this.embeddedWallet=new z(this._privyInternal,t.embeddedWalletMessagePoster,t.supportedChains,this.mfa,this.mfaPromises,this.app),this.user=new eR(this._privyInternal),this.auth=new ty(this._privyInternal,this.embeddedWallet,t.storage,t.crypto,this.mfa),this.recovery=new tx(this._privyInternal,t.storage,t.crypto),this.funding=new tm(this._privyInternal),this.delegated=new i.default(this._privyInternal),this.crossApp=new n.default(this._privyInternal,t.storage)}}e.s(["default",()=>tM],902910)},642108,e=>{"use strict";function t([e,t]){return`${e}=${function e(t){return Array.isArray(t)?"%5B"+t.map(e).join("%2C%20")+"%5D":"bigint"==typeof t?`${t}n`:encodeURIComponent(String(null!=t&&null===Object.getPrototypeOf(t)?{...t}:t))}(t)}`}function r(e,t){return e instanceof Error&&"SolanaError"===e.name&&(void 0===t||e.context.__code===t)}var n=class extends Error{cause=this.cause;context;constructor(...[e,r]){let n,i;r&&Object.entries(Object.getOwnPropertyDescriptors(r)).forEach(([t,r])=>{"cause"===t?i={cause:r.value}:(void 0===n&&(n={__code:e}),Object.defineProperty(n,t,r))}),super(function(e,r={}){{let n=`Solana error #${e}; Decode this error by running \`npx @solana/errors decode -- ${e}`;return Object.keys(r).length&&(n+=` '${btoa(Object.entries(r).map(t).join("&"))}'`),`${n}\``}}(e,n),i),this.context=Object.freeze(void 0===n?{__code:e}:n),this.name="SolanaError"}};function i(...e){"captureStackTrace"in Error&&"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(...e)}function a({errorCodeBaseOffset:e,getErrorContext:t,orderedErrorNames:r,rpcEnumError:a},s){let o,c;"string"==typeof a?o=a:(o=Object.keys(a)[0],c=a[o]);let l=e+r.indexOf(o),d=t(l,o,c),_=new n(l,d);return i(_,s),_}var s=["GenericError","InvalidArgument","InvalidInstructionData","InvalidAccountData","AccountDataTooSmall","InsufficientFunds","IncorrectProgramId","MissingRequiredSignature","AccountAlreadyInitialized","UninitializedAccount","UnbalancedInstruction","ModifiedProgramId","ExternalAccountLamportSpend","ExternalAccountDataModified","ReadonlyLamportChange","ReadonlyDataModified","DuplicateAccountIndex","ExecutableModified","RentEpochModified","NotEnoughAccountKeys","AccountDataSizeChanged","AccountNotExecutable","AccountBorrowFailed","AccountBorrowOutstanding","DuplicateAccountOutOfSync","Custom","InvalidError","ExecutableDataModified","ExecutableLamportChange","ExecutableAccountNotRentExempt","UnsupportedProgramId","CallDepth","MissingAccount","ReentrancyNotAllowed","MaxSeedLengthExceeded","InvalidSeeds","InvalidRealloc","ComputationalBudgetExceeded","PrivilegeEscalation","ProgramEnvironmentSetupFailure","ProgramFailedToComplete","ProgramFailedToCompile","Immutable","IncorrectAuthority","BorshIoError","AccountNotRentExempt","InvalidAccountOwner","ArithmeticOverflow","UnsupportedSysvar","IllegalOwner","MaxAccountsDataAllocationsExceeded","MaxAccountsExceeded","MaxInstructionTraceLengthExceeded","BuiltinProgramsMustConsumeComputeUnits"],o=["AccountInUse","AccountLoadedTwice","AccountNotFound","ProgramAccountNotFound","InsufficientFundsForFee","InvalidAccountForFee","AlreadyProcessed","BlockhashNotFound","CallChainTooDeep","MissingSignatureForFee","InvalidAccountIndex","SignatureFailure","InvalidProgramForExecution","SanitizeFailure","ClusterMaintenance","AccountBorrowOutstanding","WouldExceedMaxBlockCostLimit","UnsupportedVersion","InvalidWritableAccount","WouldExceedMaxAccountCostLimit","WouldExceedAccountDataBlockLimit","TooManyAccountLocks","AddressLookupTableNotFound","InvalidAddressLookupTableOwner","InvalidAddressLookupTableData","InvalidAddressLookupTableIndex","InvalidRentPayingAccount","WouldExceedMaxVoteCostLimit","WouldExceedAccountDataTotalLimit","DuplicateInstruction","InsufficientFundsForRent","MaxLoadedAccountsDataSizeExceeded","InvalidLoadedAccountsDataSizeLimit","ResanitizationNeeded","ProgramExecutionTemporarilyRestricted","UnbalancedTransaction"];function c(e){return"object"==typeof e&&"InstructionError"in e?function e(t,r){let n=Number(t);return a({errorCodeBaseOffset:4615001,getErrorContext:(e,t,r)=>4615e3===e?{errorName:t,index:n,...void 0!==r?{instructionErrorContext:r}:null}:4615026===e?{code:Number(r),index:n}:{index:n},orderedErrorNames:s,rpcEnumError:r},e)}(...e.InstructionError):a({errorCodeBaseOffset:7050001,getErrorContext:(e,t,r)=>705e4===e?{errorName:t,...void 0!==r?{transactionErrorContext:r}:null}:7050030===e?{index:Number(r)}:7050031===e||7050035===e?{accountIndex:Number(r.account_index)}:void 0,orderedErrorNames:o,rpcEnumError:e},c)}function l(e){var t;let r;if("object"==typeof(t=e)&&null!==t&&"code"in t&&"message"in t&&("number"==typeof t.code||"bigint"==typeof t.code)&&"string"==typeof t.message){let{code:t,data:i,message:a}=e,s=Number(t);if(-32002===s){let{err:e,...t}=i,a=e?{cause:c(e)}:null;r=new n(-32002,{...t,...a})}else{let e;switch(s){case -32603:case -32602:case -32600:case -32601:case -32700:case -32012:case -32001:case -32004:case -32014:case -32010:case -32009:case -32007:case -32006:case -32015:e={__serverMessage:a};break;default:"object"!=typeof i||Array.isArray(i)||(e=i)}r=new n(s,e)}}else{let t="object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message?e.message:"Malformed JSON-RPC error with no message attribute";r=new n(10,{error:e,message:t})}return i(r,l),r}e.s(["SOLANA_ERROR__ACCOUNTS__ACCOUNT_NOT_FOUND",()=>323e4,"SOLANA_ERROR__ACCOUNTS__EXPECTED_ALL_ACCOUNTS_TO_BE_DECODED",()=>3230004,"SOLANA_ERROR__ACCOUNTS__EXPECTED_DECODED_ACCOUNT",()=>3230003,"SOLANA_ERROR__ACCOUNTS__FAILED_TO_DECODE_ACCOUNT",()=>3230002,"SOLANA_ERROR__ACCOUNTS__ONE_OR_MORE_ACCOUNTS_NOT_FOUND",()=>0x1ecdbe1,"SOLANA_ERROR__ADDRESSES__FAILED_TO_FIND_VIABLE_PDA_BUMP_SEED",()=>2800009,"SOLANA_ERROR__ADDRESSES__INVALID_BYTE_LENGTH",()=>28e5,"SOLANA_ERROR__ADDRESSES__INVALID_ED25519_PUBLIC_KEY",()=>2800003,"SOLANA_ERROR__ADDRESSES__INVALID_OFF_CURVE_ADDRESS",()=>2800011,"SOLANA_ERROR__ADDRESSES__INVALID_SEEDS_POINT_ON_CURVE",()=>2800008,"SOLANA_ERROR__ADDRESSES__MALFORMED_PDA",()=>2800004,"SOLANA_ERROR__ADDRESSES__MAX_NUMBER_OF_PDA_SEEDS_EXCEEDED",()=>2800006,"SOLANA_ERROR__ADDRESSES__MAX_PDA_SEED_LENGTH_EXCEEDED",()=>2800007,"SOLANA_ERROR__ADDRESSES__PDA_BUMP_SEED_OUT_OF_RANGE",()=>2800005,"SOLANA_ERROR__ADDRESSES__PDA_ENDS_WITH_PDA_MARKER",()=>2800010,"SOLANA_ERROR__ADDRESSES__STRING_LENGTH_OUT_OF_RANGE",()=>2800001,"SOLANA_ERROR__BLOCKHASH_STRING_LENGTH_OUT_OF_RANGE",()=>4,"SOLANA_ERROR__BLOCK_HEIGHT_EXCEEDED",()=>1,"SOLANA_ERROR__CODECS__CANNOT_DECODE_EMPTY_BYTE_ARRAY",()=>8078e3,"SOLANA_ERROR__CODECS__CANNOT_USE_LEXICAL_VALUES_AS_ENUM_DISCRIMINATORS",()=>8078022,"SOLANA_ERROR__CODECS__ENCODED_BYTES_MUST_NOT_INCLUDE_SENTINEL",()=>8078020,"SOLANA_ERROR__CODECS__ENCODER_DECODER_FIXED_SIZE_MISMATCH",()=>8078005,"SOLANA_ERROR__CODECS__ENCODER_DECODER_MAX_SIZE_MISMATCH",()=>8078006,"SOLANA_ERROR__CODECS__ENCODER_DECODER_SIZE_COMPATIBILITY_MISMATCH",()=>8078004,"SOLANA_ERROR__CODECS__ENUM_DISCRIMINATOR_OUT_OF_RANGE",()=>8078008,"SOLANA_ERROR__CODECS__EXPECTED_DECODER_TO_CONSUME_ENTIRE_BYTE_ARRAY",()=>8078023,"SOLANA_ERROR__CODECS__EXPECTED_FIXED_LENGTH",()=>8078002,"SOLANA_ERROR__CODECS__EXPECTED_POSITIVE_BYTE_LENGTH",()=>8078013,"SOLANA_ERROR__CODECS__EXPECTED_VARIABLE_LENGTH",()=>8078003,"SOLANA_ERROR__CODECS__INVALID_BYTE_LENGTH",()=>8078001,"SOLANA_ERROR__CODECS__INVALID_CONSTANT",()=>8078018,"SOLANA_ERROR__CODECS__INVALID_DISCRIMINATED_UNION_VARIANT",()=>8078009,"SOLANA_ERROR__CODECS__INVALID_ENUM_VARIANT",()=>8078010,"SOLANA_ERROR__CODECS__INVALID_LITERAL_UNION_VARIANT",()=>8078015,"SOLANA_ERROR__CODECS__INVALID_NUMBER_OF_ITEMS",()=>8078007,"SOLANA_ERROR__CODECS__INVALID_STRING_FOR_BASE",()=>8078012,"SOLANA_ERROR__CODECS__LITERAL_UNION_DISCRIMINATOR_OUT_OF_RANGE",()=>8078016,"SOLANA_ERROR__CODECS__NUMBER_OUT_OF_RANGE",()=>8078011,"SOLANA_ERROR__CODECS__OFFSET_OUT_OF_RANGE",()=>8078014,"SOLANA_ERROR__CODECS__SENTINEL_MISSING_IN_DECODED_BYTES",()=>8078021,"SOLANA_ERROR__CODECS__UNION_VARIANT_OUT_OF_RANGE",()=>8078017,"SOLANA_ERROR__CRYPTO__RANDOM_VALUES_FUNCTION_UNIMPLEMENTED",()=>3611e3,"SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM",()=>4615026,"SOLANA_ERROR__INSTRUCTION_PLANS__EMPTY_INSTRUCTION_PLAN",()=>7618002,"SOLANA_ERROR__INSTRUCTION_PLANS__FAILED_TO_EXECUTE_TRANSACTION_PLAN",()=>7618003,"SOLANA_ERROR__INSTRUCTION_PLANS__MESSAGE_CANNOT_ACCOMMODATE_PLAN",()=>7618e3,"SOLANA_ERROR__INSTRUCTION_PLANS__MESSAGE_PACKER_ALREADY_COMPLETE",()=>7618001,"SOLANA_ERROR__INSTRUCTION__EXPECTED_TO_HAVE_ACCOUNTS",()=>4128e3,"SOLANA_ERROR__INSTRUCTION__EXPECTED_TO_HAVE_DATA",()=>4128001,"SOLANA_ERROR__INSTRUCTION__PROGRAM_ID_MISMATCH",()=>4128002,"SOLANA_ERROR__INVALID_BLOCKHASH_BYTE_LENGTH",()=>5,"SOLANA_ERROR__INVALID_NONCE",()=>2,"SOLANA_ERROR__INVARIANT_VIOLATION__DATA_PUBLISHER_CHANNEL_UNIMPLEMENTED",()=>9900004,"SOLANA_ERROR__INVARIANT_VIOLATION__INVALID_INSTRUCTION_PLAN_KIND",()=>9900005,"SOLANA_ERROR__INVARIANT_VIOLATION__INVALID_TRANSACTION_PLAN_KIND",()=>9900006,"SOLANA_ERROR__INVARIANT_VIOLATION__SUBSCRIPTION_ITERATOR_MUST_NOT_POLL_BEFORE_RESOLVING_EXISTING_MESSAGE_PROMISE",()=>9900001,"SOLANA_ERROR__INVARIANT_VIOLATION__SUBSCRIPTION_ITERATOR_STATE_MISSING",()=>99e5,"SOLANA_ERROR__INVARIANT_VIOLATION__SWITCH_MUST_BE_EXHAUSTIVE",()=>9900003,"SOLANA_ERROR__KEYS__INVALID_KEY_PAIR_BYTE_LENGTH",()=>3704e3,"SOLANA_ERROR__KEYS__INVALID_PRIVATE_KEY_BYTE_LENGTH",()=>3704001,"SOLANA_ERROR__KEYS__INVALID_SIGNATURE_BYTE_LENGTH",()=>3704002,"SOLANA_ERROR__KEYS__PUBLIC_KEY_MUST_MATCH_PRIVATE_KEY",()=>3704004,"SOLANA_ERROR__KEYS__SIGNATURE_STRING_LENGTH_OUT_OF_RANGE",()=>3704003,"SOLANA_ERROR__LAMPORTS_OUT_OF_RANGE",()=>6,"SOLANA_ERROR__MALFORMED_BIGINT_STRING",()=>7,"SOLANA_ERROR__MALFORMED_NUMBER_STRING",()=>8,"SOLANA_ERROR__NONCE_ACCOUNT_NOT_FOUND",()=>3,"SOLANA_ERROR__OFFCHAIN_MESSAGE__ADDRESSES_CANNOT_SIGN_OFFCHAIN_MESSAGE",()=>5607013,"SOLANA_ERROR__OFFCHAIN_MESSAGE__APPLICATION_DOMAIN_STRING_LENGTH_OUT_OF_RANGE",()=>5607002,"SOLANA_ERROR__OFFCHAIN_MESSAGE__ENVELOPE_SIGNERS_MISMATCH",()=>5607012,"SOLANA_ERROR__OFFCHAIN_MESSAGE__INVALID_APPLICATION_DOMAIN_BYTE_LENGTH",()=>5607003,"SOLANA_ERROR__OFFCHAIN_MESSAGE__MAXIMUM_LENGTH_EXCEEDED",()=>5607e3,"SOLANA_ERROR__OFFCHAIN_MESSAGE__MESSAGE_FORMAT_MISMATCH",()=>5607007,"SOLANA_ERROR__OFFCHAIN_MESSAGE__MESSAGE_LENGTH_MISMATCH",()=>5607008,"SOLANA_ERROR__OFFCHAIN_MESSAGE__MESSAGE_MUST_BE_NON_EMPTY",()=>5607009,"SOLANA_ERROR__OFFCHAIN_MESSAGE__NUM_ENVELOPE_SIGNATURES_CANNOT_BE_ZERO",()=>5607010,"SOLANA_ERROR__OFFCHAIN_MESSAGE__NUM_REQUIRED_SIGNERS_CANNOT_BE_ZERO",()=>5607005,"SOLANA_ERROR__OFFCHAIN_MESSAGE__NUM_SIGNATURES_MISMATCH",()=>5607004,"SOLANA_ERROR__OFFCHAIN_MESSAGE__RESTRICTED_ASCII_BODY_CHARACTER_OUT_OF_RANGE",()=>5607001,"SOLANA_ERROR__OFFCHAIN_MESSAGE__SIGNATORIES_MUST_BE_SORTED",()=>5607015,"SOLANA_ERROR__OFFCHAIN_MESSAGE__SIGNATORIES_MUST_BE_UNIQUE",()=>5607016,"SOLANA_ERROR__OFFCHAIN_MESSAGE__SIGNATURES_MISSING",()=>5607011,"SOLANA_ERROR__OFFCHAIN_MESSAGE__SIGNATURE_VERIFICATION_FAILURE",()=>5607017,"SOLANA_ERROR__OFFCHAIN_MESSAGE__UNEXPECTED_VERSION",()=>5607014,"SOLANA_ERROR__OFFCHAIN_MESSAGE__VERSION_NUMBER_NOT_SUPPORTED",()=>5607006,"SOLANA_ERROR__RPC_SUBSCRIPTIONS__CANNOT_CREATE_SUBSCRIPTION_PLAN",()=>819e4,"SOLANA_ERROR__RPC_SUBSCRIPTIONS__CHANNEL_CLOSED_BEFORE_MESSAGE_BUFFERED",()=>8190002,"SOLANA_ERROR__RPC_SUBSCRIPTIONS__CHANNEL_CONNECTION_CLOSED",()=>8190003,"SOLANA_ERROR__RPC_SUBSCRIPTIONS__CHANNEL_FAILED_TO_CONNECT",()=>8190004,"SOLANA_ERROR__RPC_SUBSCRIPTIONS__EXPECTED_SERVER_SUBSCRIPTION_ID",()=>8190001,"SOLANA_ERROR__RPC__API_PLAN_MISSING_FOR_RPC_METHOD",()=>8100003,"SOLANA_ERROR__RPC__INTEGER_OVERFLOW",()=>81e5,"SOLANA_ERROR__RPC__TRANSPORT_HTTP_ERROR",()=>8100002,"SOLANA_ERROR__RPC__TRANSPORT_HTTP_HEADER_FORBIDDEN",()=>8100001,"SOLANA_ERROR__SIGNER__ADDRESS_CANNOT_HAVE_MULTIPLE_SIGNERS",()=>5508e3,"SOLANA_ERROR__SIGNER__EXPECTED_KEY_PAIR_SIGNER",()=>5508001,"SOLANA_ERROR__SIGNER__EXPECTED_MESSAGE_MODIFYING_SIGNER",()=>5508003,"SOLANA_ERROR__SIGNER__EXPECTED_MESSAGE_PARTIAL_SIGNER",()=>5508004,"SOLANA_ERROR__SIGNER__EXPECTED_MESSAGE_SIGNER",()=>5508002,"SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_MODIFYING_SIGNER",()=>5508006,"SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_PARTIAL_SIGNER",()=>5508007,"SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_SENDING_SIGNER",()=>5508008,"SOLANA_ERROR__SIGNER__EXPECTED_TRANSACTION_SIGNER",()=>5508005,"SOLANA_ERROR__SIGNER__TRANSACTION_CANNOT_HAVE_MULTIPLE_SENDING_SIGNERS",()=>5508009,"SOLANA_ERROR__SIGNER__TRANSACTION_SENDING_SIGNER_MISSING",()=>5508010,"SOLANA_ERROR__SUBTLE_CRYPTO__CANNOT_EXPORT_NON_EXTRACTABLE_KEY",()=>3610007,"SOLANA_ERROR__SUBTLE_CRYPTO__DIGEST_UNIMPLEMENTED",()=>3610001,"SOLANA_ERROR__SUBTLE_CRYPTO__DISALLOWED_IN_INSECURE_CONTEXT",()=>361e4,"SOLANA_ERROR__SUBTLE_CRYPTO__ED25519_ALGORITHM_UNIMPLEMENTED",()=>3610002,"SOLANA_ERROR__SUBTLE_CRYPTO__EXPORT_FUNCTION_UNIMPLEMENTED",()=>3610003,"SOLANA_ERROR__SUBTLE_CRYPTO__GENERATE_FUNCTION_UNIMPLEMENTED",()=>3610004,"SOLANA_ERROR__SUBTLE_CRYPTO__SIGN_FUNCTION_UNIMPLEMENTED",()=>3610005,"SOLANA_ERROR__SUBTLE_CRYPTO__VERIFY_FUNCTION_UNIMPLEMENTED",()=>3610006,"SOLANA_ERROR__TIMESTAMP_OUT_OF_RANGE",()=>9,"SOLANA_ERROR__TRANSACTION__ADDRESSES_CANNOT_SIGN_TRANSACTION",()=>5663015,"SOLANA_ERROR__TRANSACTION__CANNOT_ENCODE_WITH_EMPTY_SIGNATURES",()=>5663016,"SOLANA_ERROR__TRANSACTION__EXCEEDS_SIZE_LIMIT",()=>5663020,"SOLANA_ERROR__TRANSACTION__EXPECTED_BLOCKHASH_LIFETIME",()=>5663002,"SOLANA_ERROR__TRANSACTION__EXPECTED_NONCE_LIFETIME",()=>5663003,"SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_ADDRESS_LOOKUP_TABLE_CONTENTS_MISSING",()=>5663005,"SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_ADDRESS_LOOKUP_TABLE_INDEX_OUT_OF_RANGE",()=>5663006,"SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_FEE_PAYER_MISSING",()=>5663008,"SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_INSTRUCTION_PROGRAM_ADDRESS_NOT_FOUND",()=>5663007,"SOLANA_ERROR__TRANSACTION__FAILED_TO_ESTIMATE_COMPUTE_LIMIT",()=>5663018,"SOLANA_ERROR__TRANSACTION__FAILED_WHEN_SIMULATING_TO_ESTIMATE_COMPUTE_LIMIT",()=>5663019,"SOLANA_ERROR__TRANSACTION__FEE_PAYER_SIGNATURE_MISSING",()=>5663012,"SOLANA_ERROR__TRANSACTION__INVOKED_PROGRAMS_CANNOT_PAY_FEES",()=>5663e3,"SOLANA_ERROR__TRANSACTION__INVOKED_PROGRAMS_MUST_NOT_BE_WRITABLE",()=>5663001,"SOLANA_ERROR__TRANSACTION__MESSAGE_SIGNATURES_MISMATCH",()=>5663017,"SOLANA_ERROR__TRANSACTION__NONCE_ACCOUNT_CANNOT_BE_IN_LOOKUP_TABLE",()=>5663022,"SOLANA_ERROR__TRANSACTION__SIGNATURES_MISSING",()=>5663009,"SOLANA_ERROR__TRANSACTION__VERSION_NUMBER_NOT_SUPPORTED",()=>5663021,"SOLANA_ERROR__TRANSACTION__VERSION_NUMBER_OUT_OF_RANGE",()=>5663004,"SolanaError",()=>n,"getSolanaErrorFromJsonRpcError",()=>l,"getSolanaErrorFromTransactionError",()=>c,"isSolanaError",()=>r,"safeCaptureStackTrace",()=>i])},441960,e=>{"use strict";e.i(642108);var t,r=((t=r||{})[t.WRITABLE_SIGNER=3]="WRITABLE_SIGNER",t[t.READONLY_SIGNER=2]="READONLY_SIGNER",t[t.WRITABLE=1]="WRITABLE",t[t.READONLY=0]="READONLY",t);function n(e){return e>=2}function i(e){return(1&e)!=0}function a(e,t){return e|t}function s(e){return 2|e}e.s(["AccountRole",()=>r,"isSignerRole",()=>n,"isWritableRole",()=>i,"mergeRoles",()=>a,"upgradeRoleToSigner",()=>s])},912440,587896,994999,503403,e=>{"use strict";var t,r,n,i=e.i(642108);function a(e,t,r){return s(0===r&&e.length===t.length?e:e.slice(r,r+t.length),t)}function s(e,t){return e.length===t.length&&e.every((e,r)=>e===t[r])}function o(e,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(e)}function c(e){return Object.freeze({...e,encode:t=>{let r=new Uint8Array(o(t,e));return e.write(t,r,0),r}})}function l(e){return Object.freeze({...e,decode:(t,r=0)=>e.read(t,r)[0]})}function d(e){return"fixedSize"in e&&"number"==typeof e.fixedSize}function _(e){if(!d(e))throw new i.SolanaError(i.SOLANA_ERROR__CODECS__EXPECTED_FIXED_LENGTH)}function f(e,t){if(d(e)!==d(t))throw new i.SolanaError(i.SOLANA_ERROR__CODECS__ENCODER_DECODER_SIZE_COMPATIBILITY_MISMATCH);if(d(e)&&d(t)&&e.fixedSize!==t.fixedSize)throw new i.SolanaError(i.SOLANA_ERROR__CODECS__ENCODER_DECODER_FIXED_SIZE_MISMATCH,{decoderFixedSize:t.fixedSize,encoderFixedSize:e.fixedSize});if(!d(e)&&!d(t)&&e.maxSize!==t.maxSize)throw new i.SolanaError(i.SOLANA_ERROR__CODECS__ENCODER_DECODER_MAX_SIZE_MISMATCH,{decoderMaxSize:t.maxSize,encoderMaxSize:e.maxSize});return{...t,...e,decode:t.decode,encode:e.encode,read:t.read,write:e.write}}function u(e,t,r=0){if(t.length-r<=0)throw new i.SolanaError(i.SOLANA_ERROR__CODECS__CANNOT_DECODE_EMPTY_BYTE_ARRAY,{codecDescription:e})}function h(e,t,r,n=0){let a=r.length-n;if(a<t)throw new i.SolanaError(i.SOLANA_ERROR__CODECS__INVALID_BYTE_LENGTH,{bytesLength:a,codecDescription:e,expected:t})}function p(e,t,r){if(t<0||t>r)throw new i.SolanaError(i.SOLANA_ERROR__CODECS__OFFSET_OUT_OF_RANGE,{bytesLength:r,codecDescription:e,offset:t})}function y(e,t){let r=(r,n,i)=>{let a=e.encode(r);return i=t.write(a.length,n,i),n.set(a,i),i+a.length};if(d(t)&&d(e))return c({...e,fixedSize:t.fixedSize+e.fixedSize,write:r});let n=d(t)?t.fixedSize:t.maxSize??null,i=d(e)?e.fixedSize:e.maxSize??null,a=null!==n&&null!==i?n+i:null;return c({...e,...null!==a?{maxSize:a}:{},getSizeFromValue:r=>{let n=o(r,e);return o(n,t)+n},write:r})}function E(e,t){let r=(r,n)=>{let[i,a]=t.read(r,n),s=Number(i);return((n=a)>0||r.length>s)&&(r=r.slice(n,n+s)),h("addDecoderSizePrefix",s,r),[e.decode(r),n+s]};if(d(t)&&d(e))return l({...e,fixedSize:t.fixedSize+e.fixedSize,read:r});let n=d(t)?t.fixedSize:t.maxSize??null,i=d(e)?e.fixedSize:e.maxSize??null,a=null!==n&&null!==i?n+i:null;return l({...e,...null!==a?{maxSize:a}:{},read:r})}function A(e,t){return c({fixedSize:t,write:(r,n,i)=>{let a=e.encode(r),s=a.length>t?a.slice(0,t):a;return n.set(s,i),i+t}})}function g(e,t){return l({fixedSize:t,read:(r,n)=>{let i,a;h("fixCodecSize",t,r,n),(n>0||r.length>t)&&(r=r.slice(n,n+t)),d(e)&&(i=r,a=e.fixedSize,r=function(e,t){if(e.length>=t)return e;let r=new Uint8Array(t).fill(0);return r.set(e),r}(i.length<=a?i:i.slice(0,a),a));let[s]=e.read(r,0);return[s,n+t]}})}function R(e,t){return l({...e,read:(r,n)=>{let i=e=>S(e,r.length),a=t.preOffset?t.preOffset({bytes:r,preOffset:n,wrapBytes:i}):n;p("offsetDecoder",a,r.length);let[s,o]=e.read(r,a),c=t.postOffset?t.postOffset({bytes:r,newPreOffset:a,postOffset:o,preOffset:n,wrapBytes:i}):o;return p("offsetDecoder",c,r.length),[s,c]}})}function S(e,t){return 0===t?0:(e%t+t)%t}function I(e,t){var r,n;return r=function(e,t){if(d(e)){let r=t(e.fixedSize);if(r<0)throw new i.SolanaError(i.SOLANA_ERROR__CODECS__EXPECTED_POSITIVE_BYTE_LENGTH,{bytesLength:r,codecDescription:"resizeEncoder"});return c({...e,fixedSize:r})}return c({...e,getSizeFromValue:r=>{let n=t(e.getSizeFromValue(r));if(n<0)throw new i.SolanaError(i.SOLANA_ERROR__CODECS__EXPECTED_POSITIVE_BYTE_LENGTH,{bytesLength:n,codecDescription:"resizeEncoder"});return n}})}(e,e=>e+t),n={preOffset:({preOffset:e})=>e+t},c({...r,write:(e,t,i)=>{let a=e=>S(e,t.length),s=n.preOffset?n.preOffset({bytes:t,preOffset:i,wrapBytes:a}):i;p("offsetEncoder",s,t.length);let o=r.write(e,t,s),c=n.postOffset?n.postOffset({bytes:t,newPreOffset:s,postOffset:o,preOffset:i,wrapBytes:a}):o;return p("offsetEncoder",c,t.length),c}})}function m(e,t){return R(function(e,t){if(d(e)){let r=t(e.fixedSize);if(r<0)throw new i.SolanaError(i.SOLANA_ERROR__CODECS__EXPECTED_POSITIVE_BYTE_LENGTH,{bytesLength:r,codecDescription:"resizeDecoder"});return l({...e,fixedSize:r})}return e}(e,e=>e+t),{postOffset:({postOffset:e})=>e+t})}function O(e,t){return c({...!d(e)?{...e,getSizeFromValue:r=>e.getSizeFromValue(t(r))}:e,write:(r,n,i)=>e.write(t(r),n,i)})}function v(e,t){return l({...e,read:(r,n)=>{let[i,a]=e.read(r,n);return[t(i,r,n),a]}})}function T(e,t){let[r,n]=e.split(RegExp(`((?!${t}).*)`));return[r,n]}function w(e,t){let r=BigInt(t.length),n=0n;for(let i of e)n*=r,n+=BigInt(t.indexOf(i));return n}e.s(["addDecoderSizePrefix",()=>E,"addEncoderSizePrefix",()=>y,"assertByteArrayHasEnoughBytesForCodec",()=>h,"assertByteArrayIsNotEmptyForCodec",()=>u,"assertIsFixedSize",()=>_,"bytesEqual",()=>s,"combineCodec",()=>f,"containsBytes",()=>a,"createDecoder",()=>l,"createEncoder",()=>c,"fixDecoderSize",()=>g,"fixEncoderSize",()=>A,"getEncodedSize",()=>o,"isFixedSize",()=>d,"offsetDecoder",()=>R,"padLeftEncoder",()=>I,"padRightDecoder",()=>m,"transformDecoder",()=>v,"transformEncoder",()=>O],587896);var N="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",C=()=>c({getSizeFromValue:e=>{let[t,r]=T(e,N[0]);if(!r)return e.length;let n=w(r,N);return t.length+Math.ceil(n.toString(16).length/2)},write(e,t,r){if(!function(e,t,r=t){if(!t.match(RegExp(`^[${e}]*$`)))throw new i.SolanaError(i.SOLANA_ERROR__CODECS__INVALID_STRING_FOR_BASE,{alphabet:e,base:e.length,value:r})}(N,e),""===e)return r;let[n,a]=T(e,N[0]);if(!a)return t.set(new Uint8Array(n.length).fill(0),r),r+n.length;let s=w(a,N),o=[];for(;s>0n;)o.unshift(Number(s%256n)),s/=256n;let c=[...Array(n.length).fill(0),...o];return t.set(c,r),r+c.length}}),b=()=>l({read(e,t){let r=0===t?e:e.slice(t);if(0===r.length)return["",0];let n=r.findIndex(e=>0!==e);n=-1===n?r.length:n;let i=N[0].repeat(n);return n===r.length?[i,e.length]:[i+function(e,t){let r=BigInt(t.length),n=[];for(;e>0n;)n.unshift(t[Number(e%r)]),e/=r;return n.join("")}(r.slice(n).reduce((e,t)=>256n*e+BigInt(t),0n),N),e.length]}}),D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L=()=>c({getSizeFromValue:e=>{try{return atob(e).length}catch{throw new i.SolanaError(i.SOLANA_ERROR__CODECS__INVALID_STRING_FOR_BASE,{alphabet:D,base:64,value:e})}},write(e,t,r){try{let n=atob(e).split("").map(e=>e.charCodeAt(0));return t.set(n,r),n.length+r}catch{throw new i.SolanaError(i.SOLANA_ERROR__CODECS__INVALID_STRING_FOR_BASE,{alphabet:D,base:64,value:e})}}}),k=()=>l({read:(e,t=0)=>[btoa(String.fromCharCode(...e.slice(t))),e.length]}),P=globalThis.TextDecoder,U=globalThis.TextEncoder,x=()=>{let e;return c({getSizeFromValue:t=>(e||=new U).encode(t).length,write:(t,r,n)=>{let i=(e||=new U).encode(t);return r.set(i,n),n+i.length}})},M=()=>{let e;return l({read:(t,r)=>[(e||=new P).decode(t.slice(r)).replace(/\u0000/g,""),t.length]})};function F(){if(void 0===globalThis.crypto||"function"!=typeof globalThis.crypto.getRandomValues)throw new i.SolanaError(i.SOLANA_ERROR__CRYPTO__RANDOM_VALUES_FUNCTION_UNIMPLEMENTED)}function z(){if(!globalThis.isSecureContext)throw new i.SolanaError(i.SOLANA_ERROR__SUBTLE_CRYPTO__DISALLOWED_IN_INSECURE_CONTEXT)}async function G(e){return(void 0===t&&(t=new Promise(r=>{e.generateKey("Ed25519",!1,["sign","verify"]).then(()=>{r(t=!0)}).catch(()=>{r(t=!1)})})),"boolean"==typeof t)?t:await t}function B(){if(z(),void 0===globalThis.crypto||"function"!=typeof globalThis.crypto.subtle?.digest)throw new i.SolanaError(i.SOLANA_ERROR__SUBTLE_CRYPTO__DIGEST_UNIMPLEMENTED)}async function V(){if(z(),void 0===globalThis.crypto||"function"!=typeof globalThis.crypto.subtle?.generateKey)throw new i.SolanaError(i.SOLANA_ERROR__SUBTLE_CRYPTO__GENERATE_FUNCTION_UNIMPLEMENTED);if(!await G(globalThis.crypto.subtle))throw new i.SolanaError(i.SOLANA_ERROR__SUBTLE_CRYPTO__ED25519_ALGORITHM_UNIMPLEMENTED)}function W(){if(z(),void 0===globalThis.crypto||"function"!=typeof globalThis.crypto.subtle?.exportKey)throw new i.SolanaError(i.SOLANA_ERROR__SUBTLE_CRYPTO__EXPORT_FUNCTION_UNIMPLEMENTED)}function H(){if(z(),void 0===globalThis.crypto||"function"!=typeof globalThis.crypto.subtle?.sign)throw new i.SolanaError(i.SOLANA_ERROR__SUBTLE_CRYPTO__SIGN_FUNCTION_UNIMPLEMENTED)}function K(){if(z(),void 0===globalThis.crypto||"function"!=typeof globalThis.crypto.subtle?.verify)throw new i.SolanaError(i.SOLANA_ERROR__SUBTLE_CRYPTO__VERIFY_FUNCTION_UNIMPLEMENTED)}function j(){return r||(r=C()),r}function Y(e){if(e.length<32||e.length>44)return!1;let t=j();try{return 32===t.encode(e).byteLength}catch{return!1}}function q(e){if(e.length<32||e.length>44)throw new i.SolanaError(i.SOLANA_ERROR__ADDRESSES__STRING_LENGTH_OUT_OF_RANGE,{actualLength:e.length});let t=j().encode(e).byteLength;if(32!==t)throw new i.SolanaError(i.SOLANA_ERROR__ADDRESSES__INVALID_BYTE_LENGTH,{actualLength:t})}function J(e){return q(e),e}function $(){return O(A(j(),32),e=>J(e))}function X(){return g((n||(n=b()),n),32)}function Z(){return new Intl.Collator("en",{caseFirst:"lower",ignorePunctuation:!1,localeMatcher:"best fit",numeric:!1,sensitivity:"variant",usage:"sort"}).compare}function Q(e){let t=e%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn;return t>=0n?t:0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn+t}function ee(e,t){let r=e;for(;t-- >0n;)r*=r,r%=0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn;return r}e.s(["getBase58Decoder",()=>b,"getBase58Encoder",()=>C,"getBase64Decoder",()=>k,"getBase64Encoder",()=>L,"getUtf8Decoder",()=>M,"getUtf8Encoder",()=>x],994999),e.s(["assertDigestCapabilityIsAvailable",()=>B,"assertKeyExporterIsAvailable",()=>W,"assertKeyGenerationIsAvailable",()=>V,"assertPRNGIsAvailable",()=>F,"assertSigningCapabilityIsAvailable",()=>H,"assertVerificationCapabilityIsAvailable",()=>K],503403);var et=[80,114,111,103,114,97,109,68,101,114,105,118,101,100,65,100,100,114,101,115,115];async function er({programAddress:e,seeds:t}){let r;if(B(),t.length>16)throw new i.SolanaError(i.SOLANA_ERROR__ADDRESSES__MAX_NUMBER_OF_PDA_SEEDS_EXCEEDED,{actual:t.length,maxSeeds:16});let n=t.reduce((e,t,n)=>{let a="string"==typeof t?(r||=new TextEncoder).encode(t):t;if(a.byteLength>32)throw new i.SolanaError(i.SOLANA_ERROR__ADDRESSES__MAX_PDA_SEED_LENGTH_EXCEEDED,{actual:a.byteLength,index:n,maxSeedLength:32});return e.push(...a),e},[]),a=f($(),X()),s=a.encode(e),o=await crypto.subtle.digest("SHA-256",new Uint8Array([...n,...s,...et])),c=new Uint8Array(o);if(function(e){var t,r,n;let i,a,s,o,c,l,d,_,f,u,h,p,y,E,A,g,R,S,I,m,O,v,T;return 32===e.byteLength&&(i=e.reduce((e,t,r)=>{let n;return`${1===(n=(31===r?-129&t:t).toString(16)).length?`0${n}`:n}${e}`},""),t=BigInt(`0x${i}`),r=e[31],a=Q(t*t),s=Q(a-1n),o=Q(0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3n*a+1n),c=Q(o*o*o),d=ee(l=(n=s*Q(c*c*o))*n%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn*n%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,2n)*l%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,_=ee(d,1n)*n%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,f=ee(_,5n)*_%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,u=ee(f,10n)*f%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,h=ee(u,20n)*u%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,p=ee(h,40n)*h%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,y=ee(p,80n)*p%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,E=ee(y,80n)*p%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,A=ee(E,10n)*f%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn,g=Q(s*c*(ee(A,2n)*n%0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedn)),R=Q(o*g*g),S=g,I=Q(0x2b8324804fc1df0b2b4d00993dfbd7a72f431806ad2fe478c4ee1b274a0ea0b0n*g),m=R===s,O=R===Q(-s),v=R===Q(-(0x2b8324804fc1df0b2b4d00993dfbd7a72f431806ad2fe478c4ee1b274a0ea0b0n*s)),null!==(m&&(g=S),(O||v)&&(g=I),(1n&Q(g))===1n&&(g=Q(-g)),T=m||O?g:null)&&(0n!==T||(128&r)==0))}(c))throw new i.SolanaError(i.SOLANA_ERROR__ADDRESSES__INVALID_SEEDS_POINT_ON_CURVE);return a.decode(c)}async function en({programAddress:e,seeds:t}){let r=255;for(;r>0;)try{return[await er({programAddress:e,seeds:[...t,new Uint8Array([r])]}),r]}catch(e){if((0,i.isSolanaError)(e,i.SOLANA_ERROR__ADDRESSES__INVALID_SEEDS_POINT_ON_CURVE))r--;else throw e}throw new i.SolanaError(i.SOLANA_ERROR__ADDRESSES__FAILED_TO_FIND_VIABLE_PDA_BUMP_SEED)}async function ei(e){if(W(),"public"!==e.type||"Ed25519"!==e.algorithm.name)throw new i.SolanaError(i.SOLANA_ERROR__ADDRESSES__INVALID_ED25519_PUBLIC_KEY);let t=await crypto.subtle.exportKey("raw",e);return X().decode(new Uint8Array(t))}async function ea(e){let t=$().encode(e);return await crypto.subtle.importKey("raw",t,{name:"Ed25519"},!0,["verify"])}e.s(["address",()=>J,"assertIsAddress",()=>q,"getAddressComparator",()=>Z,"getAddressDecoder",()=>X,"getAddressEncoder",()=>$,"getAddressFromPublicKey",()=>ei,"getProgramDerivedAddress",()=>en,"getPublicKeyFromAddress",()=>ea,"isAddress",()=>Y],912440)},810657,e=>{"use strict";var t=e.i(503403),r=e.i(642108);e.i(994999);var n=Object.freeze({name:"Ed25519"});async function i(e,t=!1){let a=e.byteLength;if(32!==a)throw new r.SolanaError(r.SOLANA_ERROR__KEYS__INVALID_PRIVATE_KEY_BYTE_LENGTH,{actualLength:a});let s=new Uint8Array([48,46,2,1,0,48,5,6,3,43,101,112,4,34,4,32,...e]);return await crypto.subtle.importKey("pkcs8",s,n,t,["sign"])}async function a(e,n=!1){if((0,t.assertKeyExporterIsAvailable)(),!1===e.extractable)throw new r.SolanaError(r.SOLANA_ERROR__SUBTLE_CRYPTO__CANNOT_EXPORT_NON_EXTRACTABLE_KEY,{key:e});let i=await crypto.subtle.exportKey("jwk",e);return await crypto.subtle.importKey("jwk",{crv:"Ed25519",ext:n,key_ops:["verify"],kty:"OKP",x:i.x},"Ed25519",n,["verify"])}async function s(e,r){return(0,t.assertSigningCapabilityIsAvailable)(),new Uint8Array(await crypto.subtle.sign(n,e,r))}async function o(e,r,i){return(0,t.assertVerificationCapabilityIsAvailable)(),await crypto.subtle.verify(n,e,r,i)}async function c(){return await (0,t.assertKeyGenerationIsAvailable)(),await crypto.subtle.generateKey(n,!1,["sign","verify"])}async function l(e,a=!1){if((0,t.assertPRNGIsAvailable)(),64!==e.byteLength)throw new r.SolanaError(r.SOLANA_ERROR__KEYS__INVALID_KEY_PAIR_BYTE_LENGTH,{byteLength:e.byteLength});let[c,d]=await Promise.all([crypto.subtle.importKey("raw",e.slice(32),n,!0,["verify"]),i(e.slice(0,32),a)]),_=new Uint8Array(32);crypto.getRandomValues(_);let f=await s(d,_);if(!await o(c,f,_))throw new r.SolanaError(r.SOLANA_ERROR__KEYS__PUBLIC_KEY_MUST_MATCH_PRIVATE_KEY);return{privateKey:d,publicKey:c}}async function d(e,t=!1){let r=i(e,t),[n,s]=await Promise.all([(t?r:i(e,!0)).then(async e=>await a(e,!0)),r]);return{privateKey:s,publicKey:n}}e.s(["createKeyPairFromBytes",()=>l,"createKeyPairFromPrivateKeyBytes",()=>d,"generateKeyPair",()=>c,"signBytes",()=>s,"verifySignature",()=>o])},631157,38340,850631,e=>{"use strict";var t,r,n,i=e.i(587896),a=e.i(642108);function s(e,t,r,n){if(n<t||n>r)throw new a.SolanaError(a.SOLANA_ERROR__CODECS__NUMBER_OUT_OF_RANGE,{codecDescription:e,max:r,min:t,value:n})}var o=((t=o||{})[t.Little=0]="Little",t[t.Big=1]="Big",t);function c(e){return e?.endian!==1}function l(e){return(0,i.createEncoder)({fixedSize:e.size,write(t,r,n){e.range&&s(e.name,e.range[0],e.range[1],t);let i=new ArrayBuffer(e.size);return e.set(new DataView(i),t,c(e.config)),r.set(new Uint8Array(i),n),n+e.size}})}function d(e){return(0,i.createDecoder)({fixedSize:e.size,read(t,r=0){var n,a,s;let o,l;(0,i.assertByteArrayIsNotEmptyForCodec)(e.name,t,r),(0,i.assertByteArrayHasEnoughBytesForCodec)(e.name,e.size,t,r);let d=new DataView((n=t,a=r,s=e.size,o=n.byteOffset+(a??0),l=s??n.byteLength,n.buffer.slice(o,o+l)));return[e.get(d,c(e.config)),r+e.size]}})}var _=(e={})=>l({config:e,name:"f64",set:(e,t,r)=>e.setFloat64(0,Number(t),r),size:8}),f=(e={})=>d({config:e,get:(e,t)=>e.getFloat64(0,t),name:"f64",size:8}),u=(e={})=>l({config:e,name:"i16",range:[-Number("0x7fff")-1,Number("0x7fff")],set:(e,t,r)=>e.setInt16(0,Number(t),r),size:2}),h=(e={})=>d({config:e,get:(e,t)=>e.getInt16(0,t),name:"i16",size:2}),p=(e={})=>l({config:e,name:"i64",range:[-BigInt("0x7fffffffffffffff")-1n,BigInt("0x7fffffffffffffff")],set:(e,t,r)=>e.setBigInt64(0,BigInt(t),r),size:8}),y=(e={})=>d({config:e,get:(e,t)=>e.getBigInt64(0,t),name:"i64",size:8}),E=()=>l({name:"i8",range:[-Number("0x7f")-1,Number("0x7f")],set:(e,t)=>e.setInt8(0,Number(t)),size:1}),A=()=>d({get:e=>e.getInt8(0),name:"i8",size:1}),g=()=>(0,i.createEncoder)({getSizeFromValue:e=>e<=127?1:e<=16383?2:3,maxSize:3,write:(e,t,r)=>{s("shortU16",0,65535,e);let n=[0];for(let t=0;;t+=1){let r=Number(e)>>7*t;if(0===r)break;let i=127&r;n[t]=i,t>0&&(n[t-1]|=128)}return t.set(n,r),r+n.length}}),R=()=>(0,i.createDecoder)({maxSize:3,read:(e,t)=>{let r=0,n=0;for(;++n;){let i=n-1,a=e[t+i];if(r|=(127&a)<<7*i,(128&a)==0)break}return[r,t+n]}}),S=(e={})=>l({config:e,name:"u128",range:[0n,BigInt("0xffffffffffffffffffffffffffffffff")],set:(e,t,r)=>{let n=8*!!r,i=8*!r;e.setBigUint64(n,BigInt(t)>>64n,r),e.setBigUint64(i,0xffffffffffffffffn&BigInt(t),r)},size:16}),I=(e={})=>d({config:e,get:(e,t)=>{let r=8*!!t,n=8*!t;return(e.getBigUint64(r,t)<<64n)+e.getBigUint64(n,t)},name:"u128",size:16}),m=(e={})=>l({config:e,name:"u16",range:[0,Number("0xffff")],set:(e,t,r)=>e.setUint16(0,Number(t),r),size:2}),O=(e={})=>d({config:e,get:(e,t)=>e.getUint16(0,t),name:"u16",size:2}),v=(e={})=>l({config:e,name:"u32",range:[0,Number("0xffffffff")],set:(e,t,r)=>e.setUint32(0,Number(t),r),size:4}),T=(e={})=>d({config:e,get:(e,t)=>e.getUint32(0,t),name:"u32",size:4}),w=(e={})=>l({config:e,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,r)=>e.setBigUint64(0,BigInt(t),r),size:8}),N=(e={})=>d({config:e,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),C=(e={})=>(0,i.combineCodec)(w(e),N(e)),b=()=>l({name:"u8",range:[0,Number("0xff")],set:(e,t)=>e.setUint8(0,Number(t)),size:1}),D=()=>d({get:e=>e.getUint8(0),name:"u8",size:1});function L(e,t,r){if(t!==r)throw new a.SolanaError(a.SOLANA_ERROR__CODECS__INVALID_NUMBER_OF_ITEMS,{actual:r,codecDescription:e,expected:t})}function k(e){return e.reduce((e,t)=>null===e||null===t?null:e+t,0)}function P(e){return(0,i.isFixedSize)(e)?e.fixedSize:null}function U(e){return(0,i.isFixedSize)(e)?e.fixedSize:e.maxSize??null}function x(e,t={}){let r=t.size??v(),n=z(r,P(e)),a=z(r,U(e))??void 0;return(0,i.createEncoder)({...null!==n?{fixedSize:n}:{getSizeFromValue:t=>("object"==typeof r?(0,i.getEncodedSize)(t.length,r):0)+[...t].reduce((t,r)=>t+(0,i.getEncodedSize)(r,e),0),maxSize:a},write:(t,n,i)=>("number"==typeof r&&L("array",r,t.length),"object"==typeof r&&(i=r.write(t.length,n,i)),t.forEach(t=>{i=e.write(t,n,i)}),i)})}function M(e,t={}){let r=t.size??T(),n=z(r,P(e)),a=z(r,U(e))??void 0;return(0,i.createDecoder)({...null!==n?{fixedSize:n}:{maxSize:a},read:(t,n)=>{let i=[];if("object"==typeof r&&0===t.slice(n).length)return[i,n];if("remainder"===r){for(;n<t.length;){let[r,a]=e.read(t,n);n=a,i.push(r)}return[i,n]}let[a,s]="number"==typeof r?[r,n]:r.read(t,n);n=s;for(let r=0;r<a;r+=1){let[r,a]=e.read(t,n);n=a,i.push(r)}return[i,n]}})}function F(e,t={}){return(0,i.combineCodec)(x(e,t),M(e,t))}function z(e,t){return"number"!=typeof e?null:0===e?0:null===t?null:t*e}function G(e={}){return(0,i.transformEncoder)(e.size??b(),e=>+!!e)}function B(e={}){return(0,i.transformDecoder)(e.size??D(),e=>1===Number(e))}function V(){return(0,i.createEncoder)({getSizeFromValue:e=>e.length,write:(e,t,r)=>(t.set(e,r),r+e.length)})}function W(){return(0,i.createDecoder)({read:(e,t)=>{let r=e.slice(t);return[r,t+r.length]}})}function H(e){return(0,i.createEncoder)({fixedSize:e.length,write:(t,r,n)=>(r.set(e,n),n+e.length)})}function K(e){return(0,i.createDecoder)({fixedSize:e.length,read:(t,r)=>{let n=(0,i.createDecoder)({read:(e,t)=>[e.slice(t).reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),e.length]});if(!(0,i.containsBytes)(t,e,r))throw new a.SolanaError(a.SOLANA_ERROR__CODECS__INVALID_CONSTANT,{constant:e,data:t,hexConstant:n.decode(e),hexData:n.decode(t),offset:r});return[void 0,r+e.length]}})}function j(e){let t=k(e.map(P)),r=k(e.map(U))??void 0;return(0,i.createEncoder)({...null===t?{getSizeFromValue:t=>e.map((e,r)=>(0,i.getEncodedSize)(t[r],e)).reduce((e,t)=>e+t,0),maxSize:r}:{fixedSize:t},write:(t,r,n)=>(L("tuple",e.length,t.length),e.forEach((e,i)=>{n=e.write(t[i],r,n)}),n)})}function Y(e){let t=k(e.map(P)),r=k(e.map(U))??void 0;return(0,i.createDecoder)({...null===t?{maxSize:r}:{fixedSize:t},read:(t,r)=>{let n=[];return e.forEach(e=>{let[i,a]=e.read(t,r);n.push(i),r=a}),[n,r]}})}function q(e,t){let r=X(e),n=(r,n,i)=>{let a=t(r);return $(e,a),e[a].write(r,n,i)};if(null!==r)return(0,i.createEncoder)({fixedSize:r,write:n});let a=Z(e);return(0,i.createEncoder)({...null!==a?{maxSize:a}:{},getSizeFromValue:r=>{let n=t(r);return $(e,n),(0,i.getEncodedSize)(r,e[n])},write:n})}function J(e,t){let r=X(e),n=(r,n)=>{let i=t(r,n);return $(e,i),e[i].read(r,n)};if(null!==r)return(0,i.createDecoder)({fixedSize:r,read:n});let a=Z(e);return(0,i.createDecoder)({...null!==a?{maxSize:a}:{},read:n})}function $(e,t){if(void 0===e[t])throw new a.SolanaError(a.SOLANA_ERROR__CODECS__UNION_VARIANT_OUT_OF_RANGE,{maxRange:e.length-1,minRange:0,variant:t})}function X(e){if(0===e.length)return 0;if(!(0,i.isFixedSize)(e[0]))return null;let t=e[0].fixedSize;return e.every(e=>(0,i.isFixedSize)(e)&&e.fixedSize===t)?t:null}function Z(e){return e.map(e=>U(e)).reduce((e,t)=>null===e||null===t?null:Math.max(e,t),0)}function Q(e,t={}){let r=t.discriminator??"__kind",n=t.size??b();return q(e.map(([,e],t)=>(0,i.transformEncoder)(j([n,e]),e=>[t,e])),t=>(function(e,t){let r=e.findIndex(([e])=>t===e);if(r<0)throw new a.SolanaError(a.SOLANA_ERROR__CODECS__INVALID_DISCRIMINATED_UNION_VARIANT,{value:t,variants:e.map(([e])=>e)});return r})(e,t[r]))}function ee(e,t={}){let r=t.discriminator??"__kind",n=t.size??D();return J(e.map(([e,t])=>(0,i.transformDecoder)(Y([n,t]),([,t])=>({[r]:e,...t}))),(e,t)=>Number(n.read(e,t)[0]))}function et(e){let t=[...new Set(Object.values(e).filter(e=>"number"==typeof e))].sort(),r=Object.fromEntries(Object.entries(e).slice(t.length)),n=Object.keys(r),i=Object.values(r),a=[...new Set([...n,...i.filter(e=>"string"==typeof e)])];return{enumKeys:n,enumRecord:r,enumValues:i,numericalValues:t,stringValues:a}}function er(e,t){let r=e.length;for(;r--;)if(t(e[r],r,e))return r;return -1}function en(e){if(0===e.length)return"";let t=[e[0],e[0]],r=[];for(let n=1;n<e.length;n++){let i=e[n];t[1]+1===i?t[1]=i:(r.push(t[0]===t[1]?`${t[0]}`:`${t[0]}-${t[1]}`),t=[i,i])}return r.push(t[0]===t[1]?`${t[0]}`:`${t[0]}-${t[1]}`),r.join(", ")}function ei(e,t={}){let r=t.size??b(),n=t.useValuesAsDiscriminators??!1,{enumKeys:s,enumValues:o,numericalValues:c,stringValues:l}=et(e);if(n&&o.some(e=>"string"==typeof e))throw new a.SolanaError(a.SOLANA_ERROR__CODECS__CANNOT_USE_LEXICAL_VALUES_AS_ENUM_DISCRIMINATORS,{stringValues:o.filter(e=>"string"==typeof e)});return(0,i.transformEncoder)(r,e=>{let t=function({enumKeys:e,enumValues:t,variant:r}){let n=er(t,e=>e===r);return n>=0?n:e.findIndex(e=>e===r)}({enumKeys:s,enumValues:o,variant:e});if(t<0)throw new a.SolanaError(a.SOLANA_ERROR__CODECS__INVALID_ENUM_VARIANT,{formattedNumericalValues:en(c),numericalValues:c,stringValues:l,variant:e});return n?o[t]:t})}function ea(e,t={}){let r=t.size??D(),n=t.useValuesAsDiscriminators??!1,{enumKeys:s,enumValues:o,numericalValues:c}=et(e);if(n&&o.some(e=>"string"==typeof e))throw new a.SolanaError(a.SOLANA_ERROR__CODECS__CANNOT_USE_LEXICAL_VALUES_AS_ENUM_DISCRIMINATORS,{stringValues:o.filter(e=>"string"==typeof e)});return(0,i.transformDecoder)(r,e=>{let t=Number(e),r=function({discriminator:e,enumKeys:t,enumValues:r,useValuesAsDiscriminators:n}){return n?er(r,t=>t===e):e>=0&&e<t.length?e:-1}({discriminator:t,enumKeys:s,enumValues:o,useValuesAsDiscriminators:n});if(r<0){let e=n?c:[...Array(s.length).keys()];throw new a.SolanaError(a.SOLANA_ERROR__CODECS__ENUM_DISCRIMINATOR_OUT_OF_RANGE,{discriminator:t,formattedValidDiscriminators:en(e),validDiscriminators:e})}return o[r]})}function es(e,t){return(0,i.transformEncoder)(j([...t,e]),e=>[...t.map(()=>void 0),e])}function eo(e,t){return(0,i.transformDecoder)(Y([...t,e]),e=>e[e.length-1])}function ec(e,t,r={}){return(0,i.transformEncoder)(x(j([e,t]),r),e=>[...e.entries()])}function el(e,t,r={}){return(0,i.transformDecoder)(M(Y([e,t]),r),e=>new Map(e))}function ed(){return(0,i.createEncoder)({fixedSize:0,write:(e,t,r)=>r})}function e_(){return(0,i.createDecoder)({fixedSize:0,read:(e,t)=>[void 0,t]})}function ef(e){let t=e.map(([,e])=>e),r=k(t.map(P)),n=k(t.map(U))??void 0;return(0,i.createEncoder)({...null===r?{getSizeFromValue:t=>e.map(([e,r])=>(0,i.getEncodedSize)(t[e],r)).reduce((e,t)=>e+t,0),maxSize:n}:{fixedSize:r},write:(t,r,n)=>(e.forEach(([e,i])=>{n=i.write(t[e],r,n)}),n)})}function eu(e){let t=e.map(([,e])=>e),r=k(t.map(P)),n=k(t.map(U))??void 0;return(0,i.createDecoder)({...null===r?{maxSize:n}:{fixedSize:r},read:(t,r)=>{let n={};return e.forEach(([e,i])=>{let[a,s]=i.read(t,r);r=s,n[e]=a}),[n,r]}})}e.s(["getF64Decoder",()=>f,"getF64Encoder",()=>_,"getI16Decoder",()=>h,"getI16Encoder",()=>u,"getI64Decoder",()=>y,"getI64Encoder",()=>p,"getI8Decoder",()=>A,"getI8Encoder",()=>E,"getShortU16Decoder",()=>R,"getShortU16Encoder",()=>g,"getU128Decoder",()=>I,"getU128Encoder",()=>S,"getU16Decoder",()=>O,"getU16Encoder",()=>m,"getU32Decoder",()=>T,"getU32Encoder",()=>v,"getU64Codec",()=>C,"getU64Decoder",()=>N,"getU64Encoder",()=>w,"getU8Decoder",()=>D,"getU8Encoder",()=>b],38340),e.s(["getArrayCodec",()=>F,"getArrayDecoder",()=>M,"getArrayEncoder",()=>x,"getBooleanDecoder",()=>B,"getBooleanEncoder",()=>G,"getBytesDecoder",()=>W,"getBytesEncoder",()=>V,"getConstantDecoder",()=>K,"getConstantEncoder",()=>H,"getDiscriminatedUnionDecoder",()=>ee,"getDiscriminatedUnionEncoder",()=>Q,"getEnumDecoder",()=>ea,"getEnumEncoder",()=>ei,"getHiddenPrefixDecoder",()=>eo,"getHiddenPrefixEncoder",()=>es,"getMapDecoder",()=>el,"getMapEncoder",()=>ec,"getStructDecoder",()=>eu,"getStructEncoder",()=>ef,"getTupleDecoder",()=>Y,"getTupleEncoder",()=>j,"getUnionDecoder",()=>J,"getUnionEncoder",()=>q,"getUnitDecoder",()=>e_,"getUnitEncoder",()=>ed],631157);var eh=e.i(912440);function ep(e){return(0,eh.isAddress)(e)}function ey(){let e=(0,eh.getAddressEncoder)();return(0,i.createEncoder)({fixedSize:32,write:(t,r,n)=>{try{(0,eh.assertIsAddress)(t)}catch(e){if((0,a.isSolanaError)(e,a.SOLANA_ERROR__ADDRESSES__STRING_LENGTH_OUT_OF_RANGE))throw new a.SolanaError(a.SOLANA_ERROR__BLOCKHASH_STRING_LENGTH_OUT_OF_RANGE,e.context);if((0,a.isSolanaError)(e,a.SOLANA_ERROR__ADDRESSES__INVALID_BYTE_LENGTH))throw new a.SolanaError(a.SOLANA_ERROR__INVALID_BLOCKHASH_BYTE_LENGTH,e.context);throw e}return e.write(t,r,n)}})}function eE(){return(0,eh.getAddressDecoder)()}function eA(e){return e}function eg(e){return e}function eR(e){switch(e){case"finalized":return 2;case"confirmed":return 1;case"processed":return 0;default:throw new a.SolanaError(a.SOLANA_ERROR__INVARIANT_VIOLATION__SWITCH_MUST_BE_EXHAUSTIVE,{unexpectedValue:e})}}function eS(e,t){return e===t?0:eR(e)<eR(t)?-1:1}function eI(){return r||(r=w()),r}function em(){var e;return e=(n||(n=N()),n),(0,i.transformDecoder)(e,e=>(function(e){if(e<0||e>0xffffffffffffffffn)throw new a.SolanaError(a.SOLANA_ERROR__LAMPORTS_OUT_OF_RANGE);return e})("bigint"==typeof e?e:BigInt(e)))}e.s(["commitmentComparator",()=>eS,"devnet",()=>eg,"getBlockhashDecoder",()=>eE,"getBlockhashEncoder",()=>ey,"getDefaultLamportsDecoder",()=>em,"getDefaultLamportsEncoder",()=>eI,"isBlockhash",()=>ep,"mainnet",()=>eA],850631)},421720,631985,e=>{"use strict";var t,r,n,i,a,s,o=e.i(642108),c=e.i(850631),l=e.i(912440),d=e.i(587896),_=e.i(631157),f=e.i(38340),u=e.i(441960);function h(e,...t){return t.reduce((e,t)=>t(e),e)}function p(e){return"lifetimeConstraint"in e&&"string"==typeof e.lifetimeConstraint.blockhash&&"bigint"==typeof e.lifetimeConstraint.lastValidBlockHeight&&(0,c.isBlockhash)(e.lifetimeConstraint.blockhash)}function y(e,t){return"lifetimeConstraint"in t&&t.lifetimeConstraint&&"blockhash"in t.lifetimeConstraint&&t.lifetimeConstraint.blockhash===e.blockhash&&t.lifetimeConstraint.lastValidBlockHeight===e.lastValidBlockHeight?t:Object.freeze({...t,lifetimeConstraint:Object.freeze(e)})}function E(e,t){let[r,n]=e.split(RegExp(`((?!${t}).*)`));return[r,n]}function A(e,t){let r=BigInt(t.length),n=0n;for(let i of e)n*=r,n+=BigInt(t.indexOf(i));return n}e.s(["pipe",()=>h],631985);var g="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";function R(){return n||(n=(0,f.getU8Encoder)()),n}function S(){return i||(i=(0,f.getU8Decoder)()),i}function I(){return(0,d.createDecoder)({maxSize:1,read:(e,t)=>{let r=e[t];if((128&r)==0)return["legacy",t];{let e=128^r;if(e>0)throw new o.SolanaError(o.SOLANA_ERROR__TRANSACTION__VERSION_NUMBER_NOT_SUPPORTED,{unsupportedVersion:e});return[e,t+1]}}})}function m(){return(0,_.getStructEncoder)(v())}function O(){return(0,d.transformEncoder)((0,_.getStructEncoder)([...v(),["addressTableLookups",(0,_.getArrayEncoder)(function(){if(!t){let e=(0,_.getArrayEncoder)((0,f.getU8Encoder)(),{size:(0,f.getShortU16Encoder)()});t=(0,_.getStructEncoder)([["lookupTableAddress",(0,l.getAddressEncoder)()],["writableIndexes",e],["readonlyIndexes",e]])}return t}(),{size:(0,f.getShortU16Encoder)()})]]),e=>"legacy"===e.version?e:{...e,addressTableLookups:e.addressTableLookups??[]})}function v(){let e=(0,_.getUnionEncoder)([(0,_.getConstantEncoder)(new Uint8Array(32)),(0,d.fixEncoderSize)((0,d.createEncoder)({getSizeFromValue:e=>{let[t,r]=E(e,g[0]);if(!r)return e.length;let n=A(r,g);return t.length+Math.ceil(n.toString(16).length/2)},write(e,t,r){if(!function(e,t,r=t){if(!t.match(RegExp(`^[${e}]*$`)))throw new o.SolanaError(o.SOLANA_ERROR__CODECS__INVALID_STRING_FOR_BASE,{alphabet:e,base:e.length,value:r})}(g,e),""===e)return r;let[n,i]=E(e,g[0]);if(!i)return t.set(new Uint8Array(n.length).fill(0),r),r+n.length;let a=A(i,g),s=[];for(;a>0n;)s.unshift(Number(a%256n)),a/=256n;let c=[...Array(n.length).fill(0),...s];return t.set(c,r),r+c.length}}),32)],e=>+(void 0!==e));return[["version",(0,d.createEncoder)({getSizeFromValue:e=>+("legacy"!==e),maxSize:1,write:(e,t,r)=>{if("legacy"===e)return r;if(e<0||e>127)throw new o.SolanaError(o.SOLANA_ERROR__TRANSACTION__VERSION_NUMBER_OUT_OF_RANGE,{actualVersion:e});if(e>0)throw new o.SolanaError(o.SOLANA_ERROR__TRANSACTION__VERSION_NUMBER_NOT_SUPPORTED,{unsupportedVersion:e});return t.set([128|e],r),r+1}})],["header",(0,_.getStructEncoder)([["numSignerAccounts",R()],["numReadonlySignerAccounts",R()],["numReadonlyNonSignerAccounts",R()]])],["staticAccounts",(0,_.getArrayEncoder)((0,l.getAddressEncoder)(),{size:(0,f.getShortU16Encoder)()})],["lifetimeToken",e],["instructions",(0,_.getArrayEncoder)((a||(a=(0,d.transformEncoder)((0,_.getStructEncoder)([["programAddressIndex",(0,f.getU8Encoder)()],["accountIndices",(0,_.getArrayEncoder)((0,f.getU8Encoder)(),{size:(0,f.getShortU16Encoder)()})],["data",(0,d.addEncoderSizePrefix)((0,_.getBytesEncoder)(),(0,f.getShortU16Encoder)())]]),e=>void 0!==e.accountIndices&&void 0!==e.data?e:{...e,accountIndices:e.accountIndices??[],data:e.data??new Uint8Array(0)})),a),{size:(0,f.getShortU16Encoder)()})]]}function T(){return(0,d.createEncoder)({getSizeFromValue:e=>"legacy"===e.version?m().getSizeFromValue(e):O().getSizeFromValue(e),write:(e,t,r)=>"legacy"===e.version?m().write(e,t,r):O().write(e,t,r)})}function w(){return(0,d.transformDecoder)((0,_.getStructDecoder)([["version",I()],["header",(0,_.getStructDecoder)([["numSignerAccounts",S()],["numReadonlySignerAccounts",S()],["numReadonlyNonSignerAccounts",S()]])],["staticAccounts",(0,_.getArrayDecoder)((0,l.getAddressDecoder)(),{size:(0,f.getShortU16Decoder)()})],["lifetimeToken",(0,d.fixDecoderSize)((0,d.createDecoder)({read(e,t){let r=0===t?e:e.slice(t);if(0===r.length)return["",0];let n=r.findIndex(e=>0!==e);n=-1===n?r.length:n;let i=g[0].repeat(n);return n===r.length?[i,e.length]:[i+function(e,t){let r=BigInt(t.length),n=[];for(;e>0n;)n.unshift(t[Number(e%r)]),e/=r;return n.join("")}(r.slice(n).reduce((e,t)=>256n*e+BigInt(t),0n),g),e.length]}}),32)],["instructions",(0,_.getArrayDecoder)((s||(s=(0,d.transformDecoder)((0,_.getStructDecoder)([["programAddressIndex",(0,f.getU8Decoder)()],["accountIndices",(0,_.getArrayDecoder)((0,f.getU8Decoder)(),{size:(0,f.getShortU16Decoder)()})],["data",(0,d.addDecoderSizePrefix)((0,_.getBytesDecoder)(),(0,f.getShortU16Decoder)())]]),e=>{if(e.accountIndices.length&&e.data.byteLength)return e;let{accountIndices:t,data:r,...n}=e;return{...n,...t.length?{accountIndices:t}:null,...r.byteLength?{data:r}:null}})),s),{size:(0,f.getShortU16Decoder)()})],["addressTableLookups",(0,_.getArrayDecoder)(function(){if(!r){let e=(0,_.getArrayDecoder)((0,f.getU8Decoder)(),{size:(0,f.getShortU16Decoder)()});r=(0,_.getStructDecoder)([["lookupTableAddress",(0,l.getAddressDecoder)()],["writableIndexes",e],["readonlyIndexes",e]])}return r}(),{size:(0,f.getShortU16Decoder)()})]]),({addressTableLookups:e,...t})=>"legacy"!==t.version&&e?.length?{...t,addressTableLookups:e}:t)}function N(e,t,r){e[t]=r(e[t]??{role:u.AccountRole.READONLY})}var C=Symbol("AddressMapTypeProperty");function b(e){var t;let r,n,i,a=Object.entries(function(e,t){let r={[e]:{[C]:0,role:u.AccountRole.WRITABLE_SIGNER}},n=new Set;for(let e of t){let t;if(N(r,e.programAddress,t=>{if(n.add(e.programAddress),C in t){if((0,u.isWritableRole)(t.role))if(0===t[C])throw new o.SolanaError(o.SOLANA_ERROR__TRANSACTION__INVOKED_PROGRAMS_CANNOT_PAY_FEES,{programAddress:e.programAddress});else throw new o.SolanaError(o.SOLANA_ERROR__TRANSACTION__INVOKED_PROGRAMS_MUST_NOT_BE_WRITABLE,{programAddress:e.programAddress});if(2===t[C])return t}return{[C]:2,role:u.AccountRole.READONLY}}),e.accounts)for(let i of e.accounts)N(r,i.address,e=>{let{address:r,...a}=i;if(C in e)switch(e[C]){case 0:return e;case 1:{let r=(0,u.mergeRoles)(e.role,a.role);if("lookupTableAddress"in a){if(e.lookupTableAddress!==a.lookupTableAddress&&0>(t||=(0,l.getAddressComparator)())(a.lookupTableAddress,e.lookupTableAddress))return{[C]:1,...a,role:r}}else if((0,u.isSignerRole)(a.role))return{[C]:2,role:r};if(e.role!==r)return{...e,role:r};return e}case 2:{let t=(0,u.mergeRoles)(e.role,a.role);if(n.has(i.address)){if((0,u.isWritableRole)(a.role))throw new o.SolanaError(o.SOLANA_ERROR__TRANSACTION__INVOKED_PROGRAMS_MUST_NOT_BE_WRITABLE,{programAddress:i.address});if(e.role!==t)return{...e,role:t};return e}if("lookupTableAddress"in a&&!(0,u.isSignerRole)(e.role))return{...a,[C]:1,role:t};if(e.role!==t)return{...e,role:t};else return e}}return"lookupTableAddress"in a?{...a,[C]:1}:{...a,[C]:2}})}return r}(e.feePayer.address,e.instructions)).sort(([e,t],[n,i])=>{if(t[C]!==i[C]){if(0===t[C])return -1;else if(0===i[C])return 1;else if(2===t[C])return -1;else if(2===i[C])return 1}let a=(0,u.isSignerRole)(t.role);if(a!==(0,u.isSignerRole)(i.role))return a?-1:1;let s=(0,u.isWritableRole)(t.role);return s!==(0,u.isWritableRole)(i.role)?s?-1:1:(r||=(0,l.getAddressComparator)(),1===t[C]&&1===i[C]&&t.lookupTableAddress!==i.lookupTableAddress)?r(t.lookupTableAddress,i.lookupTableAddress):r(e,n)}).map(([e,t])=>({address:e,...t})),s=e.lifetimeConstraint;return{..."legacy"!==e.version?{addressTableLookups:function(e){let t={};for(let r of e){if(!("lookupTableAddress"in r))continue;let e=t[r.lookupTableAddress]||={readonlyIndexes:[],writableIndexes:[]};r.role===u.AccountRole.WRITABLE?e.writableIndexes.push(r.addressIndex):e.readonlyIndexes.push(r.addressIndex)}return Object.keys(t).sort((0,l.getAddressComparator)()).map(e=>({lookupTableAddress:e,...t[e]}))}(a)}:null,...s?{lifetimeToken:"nonce"in s?s.nonce:s.blockhash}:null,header:function(e){let t=0,r=0,n=0;for(let i of e){if("lookupTableAddress"in i)break;let e=(0,u.isWritableRole)(i.role);(0,u.isSignerRole)(i.role)?(n++,!e&&r++):!e&&t++}return{numReadonlyNonSignerAccounts:t,numReadonlySignerAccounts:r,numSignerAccounts:n}}(a),instructions:(t=e.instructions,n=function(e){let t={};for(let[r,n]of e.entries())t[n.address]=r;return t}(a),t.map(({accounts:e,data:t,programAddress:r})=>({programAddressIndex:n[r],...e?{accountIndices:e.map(({address:e})=>n[e])}:null,...t?{data:t}:null}))),staticAccounts:(-1===(i=a.findIndex(e=>"lookupTableAddress"in e))?a:a.slice(0,i)).map(({address:e})=>e),version:e.version}}function D(e){return Object.freeze({instructions:Object.freeze([]),version:e.version})}var L="SysvarRecentB1ockHashes11111111111111111111",k="11111111111111111111111111111111";function P(e,t){return{accounts:[{address:e,role:u.AccountRole.WRITABLE},{address:L,role:u.AccountRole.READONLY},{address:t,role:u.AccountRole.READONLY_SIGNER}],data:new Uint8Array([4,0,0,0]),programAddress:k}}function U(e){var t;return e.programAddress===k&&null!=e.data&&4===(t=e.data).byteLength&&4===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&e.accounts?.length===3&&null!=e.accounts[0].address&&e.accounts[0].role===u.AccountRole.WRITABLE&&e.accounts[1].address===L&&e.accounts[1].role===u.AccountRole.READONLY&&null!=e.accounts[2].address&&(0,u.isSignerRole)(e.accounts[2].role)}function x(e){return"lifetimeConstraint"in e&&"string"==typeof e.lifetimeConstraint.nonce&&null!=e.instructions[0]&&U(e.instructions[0])}function M(e,t){var r;if("feePayer"in t&&e===t.feePayer?.address&&(r=t.feePayer)&&"address"in r&&"string"==typeof r.address&&1===Object.keys(r).length)return t;let n={...t,feePayer:Object.freeze({address:e})};return Object.freeze(n),n}function F(e,t){return z([e],t)}function z(e,t){return Object.freeze({...t,instructions:Object.freeze([...t.instructions,...e])})}function G(e,t){var r,n;return r=[e],Object.freeze({...n=t,instructions:Object.freeze([...r,...n.instructions])})}function B(e,t){let r=e.staticAccounts[0];if(!r)throw new o.SolanaError(o.SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_FEE_PAYER_MISSING);let n=[...function(e){let{header:t}=e,r=t.numSignerAccounts-t.numReadonlySignerAccounts,n=e.staticAccounts.length-t.numSignerAccounts-t.numReadonlyNonSignerAccounts,i=[],a=0;for(let t=0;t<r;t++)i.push({address:e.staticAccounts[a],role:u.AccountRole.WRITABLE_SIGNER}),a++;for(let r=0;r<t.numReadonlySignerAccounts;r++)i.push({address:e.staticAccounts[a],role:u.AccountRole.READONLY_SIGNER}),a++;for(let t=0;t<n;t++)i.push({address:e.staticAccounts[a],role:u.AccountRole.WRITABLE}),a++;for(let r=0;r<t.numReadonlyNonSignerAccounts;r++)i.push({address:e.staticAccounts[a],role:u.AccountRole.READONLY}),a++;return i}(e),..."addressTableLookups"in e&&void 0!==e.addressTableLookups&&e.addressTableLookups.length>0?function(e,t){let r=e.map(e=>e.lookupTableAddress).filter(e=>void 0===t[e]);if(r.length>0)throw new o.SolanaError(o.SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_ADDRESS_LOOKUP_TABLE_CONTENTS_MISSING,{lookupTableAddresses:r});let n=[],i=[];for(let r of e){let e=t[r.lookupTableAddress],a=r.readonlyIndexes,s=r.writableIndexes,c=Math.max(...a,...s);if(c>=e.length)throw new o.SolanaError(o.SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_ADDRESS_LOOKUP_TABLE_INDEX_OUT_OF_RANGE,{highestKnownIndex:e.length-1,highestRequestedIndex:c,lookupTableAddress:r.lookupTableAddress});let l=a.map(t=>({address:e[t],addressIndex:t,lookupTableAddress:r.lookupTableAddress,role:u.AccountRole.READONLY}));n.push(...l);let d=s.map(t=>({address:e[t],addressIndex:t,lookupTableAddress:r.lookupTableAddress,role:u.AccountRole.WRITABLE}));i.push(...d)}return[...i,...n]}(e.addressTableLookups,t?.addressesByLookupTableAddress??{}):[]],i=e.instructions.map(e=>(function(e,t){let r=t[e.programAddressIndex]?.address;if(!r)throw new o.SolanaError(o.SOLANA_ERROR__TRANSACTION__FAILED_TO_DECOMPILE_INSTRUCTION_PROGRAM_ADDRESS_NOT_FOUND,{index:e.programAddressIndex});let n=e.accountIndices?.map(e=>t[e]),{data:i}=e;return Object.freeze({programAddress:r,...n&&n.length?{accounts:Object.freeze(n)}:{},...i&&i.length?{data:i}:{}})})(e,n)),a=i[0],s=function(e,t,r){if(!t||!U(t))return{blockhash:e,lastValidBlockHeight:r??2n**64n-1n};{let r=t.accounts[0].address;(0,l.assertIsAddress)(r);let n=t.accounts[2].address;return(0,l.assertIsAddress)(n),{nonce:e,nonceAccountAddress:r,nonceAuthorityAddress:n}}}(e.lifetimeToken,a,t?.lastValidBlockHeight);return h(D({version:e.version}),e=>M(r,e),e=>i.reduce((e,t)=>F(t,e),e),e=>"blockhash"in s?y(s,e):function({nonce:e,nonceAccountAddress:t,nonceAuthorityAddress:r},n){let i,a=n.instructions[0];if(a&&U(a))if(a.accounts[0].address===t&&a.accounts[2].address===r)if(x(n)&&n.lifetimeConstraint.nonce===e)return n;else i=[a,...n.instructions.slice(1)];else i=[Object.freeze(P(t,r)),...n.instructions.slice(1)];else i=[Object.freeze(P(t,r)),...n.instructions];return Object.freeze({...n,instructions:Object.freeze(i),lifetimeConstraint:Object.freeze({nonce:e})})}(s,e))}e.s(["appendTransactionMessageInstruction",()=>F,"appendTransactionMessageInstructions",()=>z,"compileTransactionMessage",()=>b,"createTransactionMessage",()=>D,"decompileTransactionMessage",()=>B,"getCompiledTransactionMessageDecoder",()=>w,"getCompiledTransactionMessageEncoder",()=>T,"getTransactionVersionDecoder",()=>I,"isTransactionMessageWithBlockhashLifetime",()=>p,"isTransactionMessageWithDurableNonceLifetime",()=>x,"prependTransactionMessageInstruction",()=>G,"setTransactionMessageFeePayer",()=>M,"setTransactionMessageLifetimeUsingBlockhash",()=>y],421720)},648328,e=>{"use strict";var t,r=e.i(912440),n=e.i(587896),i=e.i(631157),a=e.i(38340),s=e.i(642108),o=e.i(421720);e.i(850631);var c=e.i(994999),l=e.i(810657);function d(e){let t=Object.values(e);if(0===t.length)throw new s.SolanaError(s.SOLANA_ERROR__TRANSACTION__CANNOT_ENCODE_WITH_EMPTY_SIGNATURES);return t.map(e=>e||new Uint8Array(64).fill(0))}function _(){return(0,i.getStructEncoder)([["signatures",(0,n.transformEncoder)((0,i.getArrayEncoder)((0,n.fixEncoderSize)((0,i.getBytesEncoder)(),64),{size:(0,a.getShortU16Encoder)()}),d)],["messageBytes",(0,i.getBytesEncoder)()]])}function f(){return(0,n.transformDecoder)((0,i.getStructDecoder)([["signatures",(0,i.getArrayDecoder)((0,n.fixDecoderSize)((0,i.getBytesDecoder)(),64),{size:(0,a.getShortU16Decoder)()})],["messageBytes",(0,i.getBytesDecoder)()]]),u)}function u(e){let{messageBytes:t,signatures:c}=e,[l,d,_]=(0,i.getTupleDecoder)([(0,o.getTransactionVersionDecoder)(),(0,n.padRightDecoder)((0,a.getU8Decoder)(),2),(0,i.getArrayDecoder)((0,r.getAddressDecoder)(),{size:(0,a.getShortU16Decoder)()})]).decode(t),f=_.slice(0,d);if(f.length!==c.length)throw new s.SolanaError(s.SOLANA_ERROR__TRANSACTION__MESSAGE_SIGNATURES_MISMATCH,{numRequiredSignatures:d,signaturesLength:c.length,signerAddresses:f});let u={};return f.forEach((e,t)=>{let r=c[t];r.every(e=>0===e)?u[e]=null:u[e]=r}),{messageBytes:t,signatures:Object.freeze(u)}}function h(e){let t,r=(0,o.compileTransactionMessage)(e),n=(0,o.getCompiledTransactionMessageEncoder)().encode(r),i=r.staticAccounts.slice(0,r.header.numSignerAccounts),a={};for(let e of i)a[e]=null;return(0,o.isTransactionMessageWithBlockhashLifetime)(e)?t={blockhash:e.lifetimeConstraint.blockhash,lastValidBlockHeight:e.lifetimeConstraint.lastValidBlockHeight}:(0,o.isTransactionMessageWithDurableNonceLifetime)(e)&&(t={nonce:e.lifetimeConstraint.nonce,nonceAccountAddress:e.instructions[0].accounts[0].address}),Object.freeze({...t?{lifetimeConstraint:t}:void 0,messageBytes:n,signatures:Object.freeze(a)})}function p(e){t||(t=(0,c.getBase58Decoder)());let r=Object.values(e.signatures)[0];if(!r)throw new s.SolanaError(s.SOLANA_ERROR__TRANSACTION__FEE_PAYER_SIGNATURE_MISSING);return t.decode(r)}async function y(e,t){let i,a;if(await Promise.all(e.map(async e=>{let s=await (0,r.getAddressFromPublicKey)(e.publicKey),o=t.signatures[s];if(void 0===o)return void(a||=new Set).add(s);if(a)return;let c=await (0,l.signBytes)(e.privateKey,t.messageBytes);null!==o&&(0,n.bytesEqual)(c,o)||((i||={})[s]=c)})),a&&a.size>0){let e=Object.keys(t.signatures);throw new s.SolanaError(s.SOLANA_ERROR__TRANSACTION__ADDRESSES_CANNOT_SIGN_TRANSACTION,{expectedAddresses:e,unexpectedAddresses:[...a]})}return i?Object.freeze({...t,signatures:Object.freeze({...t.signatures,...i})}):t}function E(e){let t=[];if(Object.entries(e.signatures).forEach(([e,r])=>{r||t.push(e)}),t.length>0)throw new s.SolanaError(s.SOLANA_ERROR__TRANSACTION__SIGNATURES_MISSING,{addresses:t})}function A(e){let t=_().encode(e);return(0,c.getBase64Decoder)().decode(t)}function g(e){var t;return t=h(e),_().getSizeFromValue(t)}e.s(["TRANSACTION_SIZE_LIMIT",()=>1232,"assertIsFullySignedTransaction",()=>E,"compileTransaction",()=>h,"getBase64EncodedWireTransaction",()=>A,"getSignatureFromTransaction",()=>p,"getTransactionDecoder",()=>f,"getTransactionEncoder",()=>_,"getTransactionMessageSize",()=>g,"partiallySignTransaction",()=>y])},654312,e=>{"use strict";var t,r=e.i(642108);e.i(441960);var n=e.i(912440),i=e.i(810657),a=e.i(648328);e.i(587896),e.i(631157),e.i(38340),e.i(994999),new Uint8Array([255,115,111,108,97,110,97,32,111,102,102,99,104,97,105,110]);var s=((t=s||{})[t.RESTRICTED_ASCII_1232_BYTES_MAX=0]="RESTRICTED_ASCII_1232_BYTES_MAX",t[t.UTF8_1232_BYTES_MAX=1]="UTF8_1232_BYTES_MAX",t[t.UTF8_65535_BYTES_MAX=2]="UTF8_65535_BYTES_MAX",t);function o(e){let t={};return e.forEach(e=>{if(t[e.address]){if(t[e.address]!==e)throw new r.SolanaError(r.SOLANA_ERROR__SIGNER__ADDRESS_CANNOT_HAVE_MULTIPLE_SIGNERS,{address:e.address})}else t[e.address]=e}),Object.values(t)}function c(e){return"modifyAndSignTransactions"in e&&"function"==typeof e.modifyAndSignTransactions}function l(e){return"signTransactions"in e&&"function"==typeof e.signTransactions}function d(e){return"signAndSendTransactions"in e&&"function"==typeof e.signAndSendTransactions}function _(e){return l(e)||c(e)||d(e)}function f(e){return o((e.accounts??[]).flatMap(e=>"signer"in e?e.signer:[]))}function u(e,t){Object.freeze(e);let r={...t,feePayer:e};return Object.freeze(r),r}async function h(e){let t=await (0,n.getAddressFromPublicKey)(e.publicKey);return Object.freeze({address:t,keyPair:e,signMessages:r=>Promise.all(r.map(async r=>Object.freeze({[t]:await (0,i.signBytes)(e.privateKey,r.content)}))),signTransactions:r=>Promise.all(r.map(async r=>Object.freeze({[t]:(await (0,a.partiallySignTransaction)([e],r)).signatures[t]})))})}async function p(e,t){return await h(await (0,i.createKeyPairFromBytes)(e,t))}async function y(e,t){return await h(await (0,i.createKeyPairFromPrivateKeyBytes)(e,t))}async function E(e,t){let{partialSigners:r,modifyingSigners:n}=function(e,t={}){let r=t.identifySendingSigner??!0?function(e){let t=e.filter(d);if(0===t.length)return null;let r=t.filter(e=>!c(e)&&!l(e));return r.length>0?r[0]:t[0]}(e):null,n=e.filter(e=>e!==r&&(c(e)||l(e))),i=function(e){let t=e.filter(c);if(0===t.length)return[];let r=t.filter(e=>!l(e));return r.length>0?r:[t[0]]}(n),a=n.filter(l).filter(e=>!i.includes(e));return Object.freeze({modifyingSigners:i,partialSigners:a,sendingSigner:r})}(o(o([...e.feePayer&&_(e.feePayer)?[e.feePayer]:[],...e.instructions.flatMap(f)]).filter(_)),{identifySendingSigner:!1});return await A(e,n,r,t)}async function A(e,t=[],r=[],n){let i=(0,a.compileTransaction)(e),s=await t.reduce(async(e,t)=>{n?.abortSignal?.throwIfAborted();let[r]=await t.modifyAndSignTransactions([await e],n);return Object.freeze(r)},Promise.resolve(i));n?.abortSignal?.throwIfAborted();let o=await Promise.all(r.map(async e=>{let[t]=await e.signTransactions([s],n);return t}));return Object.freeze({...s,signatures:Object.freeze(o.reduce((e,t)=>({...e,...t}),s.signatures??{}))})}e.s(["createKeyPairSignerFromBytes",()=>p,"createKeyPairSignerFromPrivateKeyBytes",()=>y,"isTransactionModifyingSigner",()=>c,"isTransactionPartialSigner",()=>l,"isTransactionSigner",()=>_,"partiallySignTransactionMessageWithSigners",()=>E,"setTransactionMessageFeePayerSigner",()=>u],654312)},391791,e=>{"use strict";function t(e){return null!==e&&("object"==typeof e||"function"==typeof e)}var r=new WeakMap;async function n(e){let n,i=new Promise((i,a)=>{for(let s of(n={reject:a,resolve:i},e)){if(!t(s)){Promise.resolve(s).then(i,a);continue}let e=r.get(s);void 0===e?((e=function(e){let t=new Set,r={deferreds:t,settled:!1};return Promise.resolve(e).then(e=>{for(let{resolve:r}of t)r(e);t.clear(),r.settled=!0},e=>{for(let{reject:r}of t)r(e);t.clear(),r.settled=!0}),r}(s)).deferreds.add(n),r.set(s,e)):e.settled?Promise.resolve(s).then(i,a):e.deferreds.add(n)}});return await i.finally(()=>{for(let i of e)t(i)&&r.get(i).deferreds.delete(n)})}function i(e,t){return t?n([new Promise((e,r)=>{t.aborted?r(t.reason):t.addEventListener("abort",function(){r(this.reason)})}),e]):e}e.s(["getAbortablePromise",()=>i,"safeRace",()=>n])},27408,e=>{"use strict";var t=e.i(587896),r=e.i(631157),n=e.i(38340),i=e=>({__option:"Some",value:e}),a=()=>({__option:"None"}),s=e=>!!(e&&"object"==typeof e&&"__option"in e&&("Some"===e.__option&&"value"in e||"None"===e.__option)),o=e=>"None"===e.__option;function c(e,t){return"Some"===e.__option?e.value:t?t():null}var l=e=>null!==e?i(e):a();function d(e,i={}){let a=null===i.prefix?(0,t.transformEncoder)((0,r.getUnitEncoder)(),e=>void 0):(0,r.getBooleanEncoder)({size:i.prefix??(0,n.getU8Encoder)()}),o="zeroes"===i.noneValue?((0,t.assertIsFixedSize)(e),(0,t.fixEncoderSize)((0,r.getUnitEncoder)(),e.fixedSize)):i.noneValue?(0,r.getConstantEncoder)(i.noneValue):(0,r.getUnitEncoder)();return(0,r.getUnionEncoder)([(0,t.transformEncoder)((0,r.getTupleEncoder)([a,o]),e=>[!1,void 0]),(0,t.transformEncoder)((0,r.getTupleEncoder)([a,e]),e=>[!0,s(e)&&"Some"===e.__option?e.value:e])],e=>Number("Some"===(s(e)?e:l(e)).__option))}function _(e,s={}){let o=null===s.prefix?(0,t.transformDecoder)((0,r.getUnitDecoder)(),()=>!1):(0,r.getBooleanDecoder)({size:s.prefix??(0,n.getU8Decoder)()}),c="zeroes"===s.noneValue?((0,t.assertIsFixedSize)(e),(0,t.fixDecoderSize)((0,r.getUnitDecoder)(),e.fixedSize)):s.noneValue?(0,r.getConstantDecoder)(s.noneValue):(0,r.getUnitDecoder)();return(0,r.getUnionDecoder)([(0,t.transformDecoder)((0,r.getTupleDecoder)([o,c]),()=>a()),(0,t.transformDecoder)((0,r.getTupleDecoder)([o,e]),([,e])=>i(e))],(e,r)=>{if(null===s.prefix&&!s.noneValue)return Number(r<e.length);if(null===s.prefix&&null!=s.noneValue){let n="zeroes"===s.noneValue?new Uint8Array(c.fixedSize).fill(0):s.noneValue;return+!(0,t.containsBytes)(e,n,r)}return Number(o.read(e,r)[0])})}e.s(["getOptionDecoder",()=>_,"getOptionEncoder",()=>d,"isNone",()=>o,"isOption",()=>s,"none",()=>a,"unwrapOption",()=>c,"wrapNullable",()=>l])},696319,634583,e=>{"use strict";var t=e.i(642108),r=e.i(994999);function n(e,r){try{if("exists"in e&&!e.exists)return e;return Object.freeze({...e,data:r.decode(e.data)})}catch{throw new t.SolanaError(t.SOLANA_ERROR__ACCOUNTS__FAILED_TO_DECODE_ACCOUNT,{address:e.address})}}function i(e){let r=e.filter(e=>(!("exists"in e)||"exists"in e&&e.exists)&&e.data instanceof Uint8Array);if(r.length>0){let e=r.map(e=>e.address);throw new t.SolanaError(t.SOLANA_ERROR__ACCOUNTS__EXPECTED_ALL_ACCOUNTS_TO_BE_DECODED,{addresses:e})}}function a(e,t){if(!t)return Object.freeze({address:e,exists:!1});let n=(0,r.getBase64Encoder)().encode(t.data[0]);return Object.freeze({...o(t),address:e,data:n,exists:!0})}function s(e,t){if(!t)return Object.freeze({address:e,exists:!1});let r=t.data.parsed.info;return Object.freeze({...o(t),address:e,data:r,exists:!0})}function o(e){return Object.freeze({executable:e.executable,lamports:e.lamports,programAddress:e.owner,space:e.space})}async function c(e,t,r={}){let{abortSignal:n,...i}=r,s=await e.getAccountInfo(t,{...i,encoding:"base64"}).send({abortSignal:n});return a(t,s.value)}async function l(e,t,r={}){let{abortSignal:n,...i}=r,{value:o}=await e.getAccountInfo(t,{...i,encoding:"jsonParsed"}).send({abortSignal:n});return o&&"object"==typeof o&&"parsed"in o.data?s(t,o):a(t,o)}async function d(e,t,r={}){let{abortSignal:n,...i}=r;return(await e.getMultipleAccounts(t,{...i,encoding:"base64"}).send({abortSignal:n})).value.map((e,r)=>a(t[r],e))}async function _(e,t,r={}){let{abortSignal:n,...i}=r;return(await e.getMultipleAccounts(t,{...i,encoding:"jsonParsed"}).send({abortSignal:n})).value.map((e,r)=>e&&"object"==typeof e&&"parsed"in e.data?s(t[r],e):a(t[r],e))}function f(e){if(!e.exists)throw new t.SolanaError(t.SOLANA_ERROR__ACCOUNTS__ACCOUNT_NOT_FOUND,{address:e.address})}function u(e){let r=e.filter(e=>!e.exists);if(r.length>0){let e=r.map(e=>e.address);throw new t.SolanaError(t.SOLANA_ERROR__ACCOUNTS__ONE_OR_MORE_ACCOUNTS_NOT_FOUND,{addresses:e})}}function h(e,r,n,i){if(!(0,t.isSolanaError)(e,t.SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM))return!1;let a=r.instructions[e.context.index]?.programAddress;return!!a&&a===n&&(void 0===i||e.context.code===i)}e.s(["BASE_ACCOUNT_SIZE",()=>128,"assertAccountExists",()=>f,"assertAccountsDecoded",()=>i,"assertAccountsExist",()=>u,"decodeAccount",()=>n,"fetchEncodedAccount",()=>c,"fetchEncodedAccounts",()=>d,"fetchJsonParsedAccount",()=>l,"fetchJsonParsedAccounts",()=>_],696319),e.s(["isProgramError",()=>h],634583)},104076,e=>{"use strict";e.i(247167);var t,r,n,i,a,s=e.i(631157);e.i(27408);var o=e.i(912440),c=e.i(38340),l=e.i(587896);e.i(696319),e.i(634583);var d=e.i(441960);e.i(994999),e.i(642108),e.i(421720),e.i(648328),e.i(391791);var _=e.i(654312),f=((t=f||{})[t.Uninitialized=0]="Uninitialized",t[t.Initialized=1]="Initialized",t[t.Frozen=2]="Frozen",t),u=((r=u||{})[r.MintTokens=0]="MintTokens",r[r.FreezeAccount=1]="FreezeAccount",r[r.AccountOwner=2]="AccountOwner",r[r.CloseAccount=3]="CloseAccount",r),h=((n=h||{})[n.CreateAssociatedToken=0]="CreateAssociatedToken",n[n.CreateAssociatedTokenIdempotent=1]="CreateAssociatedTokenIdempotent",n[n.RecoverNestedAssociatedToken=2]="RecoverNestedAssociatedToken",n),p="TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",y=((i=y||{})[i.Mint=0]="Mint",i[i.Token=1]="Token",i[i.Multisig=2]="Multisig",i),E=((a=E||{})[a.InitializeMint=0]="InitializeMint",a[a.InitializeAccount=1]="InitializeAccount",a[a.InitializeMultisig=2]="InitializeMultisig",a[a.Transfer=3]="Transfer",a[a.Approve=4]="Approve",a[a.Revoke=5]="Revoke",a[a.SetAuthority=6]="SetAuthority",a[a.MintTo=7]="MintTo",a[a.Burn=8]="Burn",a[a.CloseAccount=9]="CloseAccount",a[a.FreezeAccount=10]="FreezeAccount",a[a.ThawAccount=11]="ThawAccount",a[a.TransferChecked=12]="TransferChecked",a[a.ApproveChecked=13]="ApproveChecked",a[a.MintToChecked=14]="MintToChecked",a[a.BurnChecked=15]="BurnChecked",a[a.InitializeAccount2=16]="InitializeAccount2",a[a.SyncNative=17]="SyncNative",a[a.InitializeAccount3=18]="InitializeAccount3",a[a.InitializeMultisig2=19]="InitializeMultisig2",a[a.InitializeMint2=20]="InitializeMint2",a[a.GetAccountDataSize=21]="GetAccountDataSize",a[a.InitializeImmutableOwner=22]="InitializeImmutableOwner",a[a.AmountToUiAmount=23]="AmountToUiAmount",a[a.UiAmountToAmount=24]="UiAmountToAmount",a);function A(e,t){return t=>{if(!t.value)return Object.freeze({address:e,role:d.AccountRole.READONLY});let r=t.isWritable?d.AccountRole.WRITABLE:d.AccountRole.READONLY;return Object.freeze({address:function(e){if(!e)throw Error("Expected a Address.");return"object"==typeof e&&"address"in e?e.address:Array.isArray(e)?e[0]:e}(t.value),role:g(t.value)?(0,d.upgradeRoleToSigner)(r):r,...g(t.value)?{signer:t.value}:{}})}}function g(e){return!!e&&"object"==typeof e&&"address"in e&&(0,_.isTransactionSigner)(e)}async function R(e,t={}){let{programAddress:r="ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}=t;return await (0,o.getProgramDerivedAddress)({programAddress:r,seeds:[(0,o.getAddressEncoder)().encode(e.owner),(0,o.getAddressEncoder)().encode(e.tokenProgram),(0,o.getAddressEncoder)().encode(e.mint)]})}function S(e,t){let r=t?.programAddress??"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",n={payer:{value:e.payer??null,isWritable:!0},ata:{value:e.ata??null,isWritable:!0},owner:{value:e.owner??null,isWritable:!1},mint:{value:e.mint??null,isWritable:!1},systemProgram:{value:e.systemProgram??null,isWritable:!1},tokenProgram:{value:e.tokenProgram??null,isWritable:!1}};n.tokenProgram.value||(n.tokenProgram.value="TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),n.systemProgram.value||(n.systemProgram.value="11111111111111111111111111111111");let i=A(r);return Object.freeze({accounts:[i(n.payer),i(n.ata),i(n.owner),i(n.mint),i(n.systemProgram),i(n.tokenProgram)],data:(0,l.transformEncoder)((0,s.getStructEncoder)([["discriminator",(0,c.getU8Encoder)()]]),e=>({...e,discriminator:1})).encode({}),programAddress:r})}function I(e,t){let r=t?.programAddress??p,n={source:{value:e.source??null,isWritable:!0},destination:{value:e.destination??null,isWritable:!0},authority:{value:e.authority??null,isWritable:!1}},i={...e},a=(i.multiSigners??[]).map(e=>({address:e.address,role:d.AccountRole.READONLY_SIGNER,signer:e})),o=A(r);return Object.freeze({accounts:[o(n.source),o(n.destination),o(n.authority),...a],data:(0,l.transformEncoder)((0,s.getStructEncoder)([["discriminator",(0,c.getU8Encoder)()],["amount",(0,c.getU64Encoder)()]]),e=>({...e,discriminator:3})).encode(i),programAddress:r})}e.s(["TOKEN_PROGRAM_ADDRESS",()=>p,"findAssociatedTokenPda",()=>R,"getCreateAssociatedTokenIdempotentInstruction",()=>S,"getTransferInstruction",()=>I],104076)}]);