(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,292656,e=>{"use strict";var t=e.i(271645),r=e.i(403555),a=e.i(944406),s=e.i(31557);async function i(e,t,{wallet_id:r,...i}){let n={version:1,url:e.getCompiledPath(a.WalletRawSign,{params:{wallet_id:r}}),method:a.WalletRawSign.method,headers:{"privy-app-id":e.app.appId},body:{...i}},{signature:l}=await (0,s.generateAuthorizationSignature)(t,n);return await e.fetchPrivyRoute(a.WalletRawSign,{body:i,params:{wallet_id:r},headers:{"privy-authorization-signature":l}})}e.i(733821);var n=e.i(515502),l=e.i(814925);e.i(484916);var o=e.i(110043);e.i(843476),e.i(123287);let d=()=>{let{refreshSessionAndUser:e,privy:a}=(0,n.u)();return(0,t.useMemo)(()=>({async createWallet(t){let s=await (0,r.create)(a,{request:{chain_type:t.chainType}}),i=await e();if(!i)throw Error("User must be authenticated before creating a Privy wallet");return{user:i,wallet:s}}}),[e,a])},c=()=>{let{user:e}=(0,l.u)(),{privy:r}=(0,n.u)(),{signWithUserSigner:a}=(0,o.u)();return(0,t.useMemo)(()=>({async signRawHash({address:t,chainType:s,hash:n}){if(!e)throw Error("User must be authenticated before signing");let o=(0,l.n)(e,s).filter(e=>(0,l.d)(e)).find(e=>e.address===t);if(!o)throw Error("Wallet not found");let d=await i(r,a,{wallet_id:o.id,params:{hash:n}});if(d.data&&"signature"in d.data&&"hex"===d.data.encoding)return{signature:d.data.signature};throw Error("Failed to sign")}}),[r,a,e])};e.s(["useCreateWallet",()=>d,"useSignRawHash",()=>c],292656)},254878,e=>{"use strict";var t=e.i(843476),r=e.i(271645),a=e.i(444785),s=e.i(48673),s=s,i=e.i(292656),n=e.i(407398);async function l(e,t){try{let r=e?.linkedAccounts?.find(e=>"wallet"===e.type&&"aptos"===e.chainType);if(r)return console.log("Movement wallet already exists:",r.address),r;console.log("Creating new Movement wallet for user...");let a=await t({chainType:"aptos"});return console.log("Movement wallet created successfully:",a.address),a}catch(e){throw console.error("Error creating Movement wallet:",e),e}}function o({onClose:e}){let[o,d]=(0,r.useState)(!1),{authenticated:c,user:u}=(0,a.usePrivy)(),{createWallet:m}=(0,i.useCreateWallet)(),h=u?.linkedAccounts?.find(e=>"wallet"===e.type&&"aptos"===e.chainType),p=async t=>{try{d(!0);let r=await l(t,m);return e(),r}catch(e){console.error("Wallet creation error:",e)}finally{d(!1)}},{login:g}=(0,s.y)({onComplete:async({user:e})=>{try{await p(e)}catch(e){console.error("Error in login completion:",e),d(!1)}},onError:e=>{console.error("Login failed:",e),d(!1)}}),x=async()=>{try{d(!0),c?await p(u):await g({loginMethods:["email","twitter","google","github","discord"],prefill:{type:"email",value:""},disableSignup:!1})}catch(e){console.error("Privy login error:",e),d(!1)}};return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Login with Privy"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Secure social login with automatic wallet creation"})]}),(0,t.jsx)(n.Button,{variant:"default",className:"w-full justify-center h-12 font-medium",onClick:x,disabled:o||c,children:o?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-foreground"}),(0,t.jsx)("span",{children:"Setting up wallet..."})]}):c?(0,t.jsx)("span",{children:"Setup Movement Wallet"}):(0,t.jsx)("span",{children:"Continue with Privy"})}),c&&u&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground text-center bg-muted/50 p-3 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-600 rounded-full"}),(0,t.jsxs)("span",{children:["Authenticated as: ",u.email?.address||u.phone?.number||"User"]})]})}),h?(0,t.jsxs)("div",{className:"text-sm text-center bg-muted border border-border p-3 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-1",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-primary rounded-full"}),(0,t.jsx)("span",{className:"font-medium text-foreground",children:"Movement Wallet Connected"})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground font-mono",children:[h.address?.slice(0,6),"...",h.address?.slice(-4)]})]}):(0,t.jsx)("div",{className:"text-sm text-center bg-muted border border-border p-3 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-yellow-600 rounded-full"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Movement Wallet Not Created"})]})})]})]})}e.s(["default",()=>o],254878)},157773,e=>{e.n(e.i(254878))}]);