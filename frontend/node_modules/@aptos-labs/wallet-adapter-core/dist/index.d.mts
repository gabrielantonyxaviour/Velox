import { AptosWallet, AccountInfo, NetworkInfo, AptosSignInInput, AptosSignInOutput, AptosSignAndSubmitTransactionOutput, AptosSignMessageInput, AptosSignMessageOutput, AptosChangeNetworkOutput, AptosSignInBoundFields } from '@aptos-labs/wallet-standard';
export { AccountInfo, AptosChangeNetworkOutput, AptosSignAndSubmitTransactionOutput, AptosSignInBoundFields, AptosSignInInput, AptosSignInOutput, AptosSignMessageInput, AptosSignMessageOutput, AptosSignTransactionOutputV1_1, NetworkInfo } from '@aptos-labs/wallet-standard';
import EventEmitter from 'eventemitter3';
import * as _aptos_labs_ts_sdk from '@aptos-labs/ts-sdk';
import { AccountAddressInput, InputGenerateTransactionPayloadData, InputGenerateTransactionOptions, InputTransactionPluginData, Network, TransactionSubmitter, AnyRawTransaction, AccountAuthenticator, InputSubmitTransactionData, PendingTransactionResponse, AptosConfig } from '@aptos-labs/ts-sdk';
export { AccountAddress, AccountAuthenticator, AnyPublicKey, AnyRawTransaction, InputGenerateTransactionOptions, InputSubmitTransactionData, Network, PendingTransactionResponse, TransactionSubmitter } from '@aptos-labs/ts-sdk';
import { AptosConnectWalletConfig } from '@aptos-connect/wallet-adapter-plugin';

declare enum WalletReadyState {
    /**
     * Wallet can only be in one of two states - installed or not installed
     * Installed: wallets are detected by the browser event listeners and means they are installed on the user's browser.
     * NotDetected: wallets are not detected by the browser event listeners and means they are not installed on the user's browser.
     */
    Installed = "Installed",
    NotDetected = "NotDetected"
}
declare enum NetworkName {
    Mainnet = "mainnet",
    Testnet = "testnet",
    Devnet = "devnet"
}
declare const ChainIdToAnsSupportedNetworkMap: Record<string, string>;
/**
 * The base URL for all Aptos Connect wallets.
 *
 * @deprecated Use {@link PETRA_WEB_BASE_URL} instead.
 */
declare const APTOS_CONNECT_BASE_URL = "https://aptosconnect.app";
/** The base URL for all Petra Web wallets. */
declare const PETRA_WEB_BASE_URL = "https://web.petra.app";
/**
 * The URL to the Aptos Connect account page if the user is signed in to Aptos Connect.
 *
 * @deprecated Use {@link PETRA_WEB_ACCOUNT_URL} instead.
 */
declare const APTOS_CONNECT_ACCOUNT_URL = "https://aptosconnect.app/dashboard/main-account";
/** The URL to the Petra Web account page if the user is signed in to Petra Web. */
declare const PETRA_WEB_ACCOUNT_URL = "https://web.petra.app/dashboard/main-account";

interface AptosStandardSupportedWallet {
    name: string;
    url: string;
    icon: `data:image/${"svg+xml" | "webp" | "png" | "gif"};base64,${string}`;
    readyState: WalletReadyState.NotDetected;
    isAIP62Standard: true;
    deeplinkProvider?: string;
    isAptosNativeWallet?: boolean;
}
type AvailableWallets = "Continue with Apple" | "Continue with Google" | "OKX Wallet" | "Petra" | "Nightly" | "Pontem Wallet" | "Backpack" | "MSafe" | "Bitget Wallet" | "Gate Wallet" | "Cosmostation Wallet";
type InputTransactionDataInner = {
    sender?: AccountAddressInput;
    data: InputGenerateTransactionPayloadData;
    options?: InputGenerateTransactionOptions & {
        expirationSecondsFromNow?: number;
        expirationTimestamp?: number;
    };
    /** This will always be set to true if a custom transaction submitter is provided. */
    withFeePayer?: boolean;
};
/**
 * If `transactionSubmitter` is set it will be used, and override any transaction
 * submitter configured in the DappConfig.
 *
 * The `pluginParams` parameter is used to provide additional parameters to a
 * transaction submitter plugin, whether provided here or configured in the
 * DappConfig.
 */
type InputTransactionData = InputTransactionDataInner & InputTransactionPluginData;
type WalletInfo = {
    name: string;
    icon: string;
    url: string;
};

type AdapterWallet = AptosWallet & {
    readyState?: WalletReadyState;
    isAptosNativeWallet?: boolean;
};
type AdapterNotDetectedWallet = Omit<AdapterWallet, "features" | "version" | "chains" | "accounts"> & {
    readyState: WalletReadyState.NotDetected;
};
interface DappConfig {
    network: Network;
    /**
     * If provided, the wallet adapter will submit transactions using the provided
     * transaction submitter rather than via the wallet.
     */
    transactionSubmitter?: TransactionSubmitter;
    aptosApiKeys?: Partial<Record<Network, string>>;
    aptosConnectDappId?: string;
    aptosConnect?: Omit<AptosConnectWalletConfig, "network">;
    /**
     * @deprecated will be removed in a future version
     */
    mizuwallet?: {
        manifestURL: string;
        appId?: string;
    };
    /**
     * @deprecated will be removed in a future version
     */
    msafeWalletConfig?: {
        appId?: string;
        appUrl?: string;
    };
    crossChainWallets?: boolean;
}
declare interface WalletCoreEvents {
    connect(account: AccountInfo | null): void;
    disconnect(): void;
    standardWalletsAdded(wallets: AdapterWallet): void;
    standardNotDetectedWalletAdded(wallets: AdapterNotDetectedWallet): void;
    networkChange(network: NetworkInfo | null): void;
    accountChange(account: AccountInfo | null): void;
}
type AdapterAccountInfo = Omit<AccountInfo, "ansName"> & {
    ansName?: string;
};
declare class WalletCore extends EventEmitter<WalletCoreEvents> {
    private _wallet;
    private readonly _sdkWallets;
    private _standard_wallets;
    private _standard_not_detected_wallets;
    private _network;
    private _connected;
    private _connecting;
    private _account;
    private _dappConfig;
    private _optInWallets;
    private _disableTelemetry;
    private readonly ga4;
    constructor(optInWallets?: ReadonlyArray<AvailableWallets>, dappConfig?: DappConfig, disableTelemetry?: boolean);
    private fetchExtensionAIP62AptosWallets;
    /**
     * Set AIP-62 extension wallets
     *
     * @param extensionwWallets
     */
    private setExtensionAIP62Wallets;
    /**
     * Set AIP-62 SDK wallets
     */
    private fetchSDKAIP62AptosWallets;
    private isAptosNativeWallet;
    private ensurePetraIsIncluded;
    private appendNotDetectedStandardSupportedWallets;
    /**
     * A function that excludes an AIP-62 compatible wallet the dapp doesnt want to include
     *
     * @param wallet AdapterWallet | AdapterNotDetectedWallet
     * @returns boolean
     */
    excludeWallet(wallet: AdapterWallet | AdapterNotDetectedWallet): boolean;
    private recordEvent;
    /**
     * Helper function to ensure wallet exists
     *
     * @param wallet A wallet
     */
    private ensureWalletExists;
    /**
     * Helper function to ensure account exists
     *
     * @param account An account
     */
    private ensureAccountExists;
    /**
     * Queries and sets ANS name for the current connected wallet account
     */
    private setAnsName;
    /**
     * Function to cleat wallet adapter data.
     *
     * - Removes current connected wallet state
     * - Removes current connected account state
     * - Removes current connected network state
     * - Removes autoconnect local storage value
     */
    private clearData;
    /**
     * Sets the connected wallet
     *
     * @param wallet A wallet
     */
    setWallet(wallet: AptosWallet | null): void;
    /**
     * Sets the connected account
     *
     * @param account An account
     */
    setAccount(account: AccountInfo | null): void;
    /**
     * Sets the connected network
     *
     * @param network A network
     */
    setNetwork(network: NetworkInfo | null): void;
    /**
     * Helper function to detect whether a wallet is connected
     *
     * @returns boolean
     */
    isConnected(): boolean;
    /**
     * Getter to fetch all detected wallets
     */
    get wallets(): ReadonlyArray<AptosWallet>;
    get notDetectedWallets(): ReadonlyArray<AdapterNotDetectedWallet>;
    /**
     * Getter for the current connected wallet
     *
     * @return wallet info
     * @throws WalletNotSelectedError
     */
    get wallet(): AptosWallet | null;
    /**
     * Getter for the current connected account
     *
     * @return account info
     * @throws WalletAccountError
     */
    get account(): AccountInfo | null;
    /**
     * Getter for the current wallet network
     *
     * @return network info
     * @throws WalletGetNetworkError
     */
    get network(): NetworkInfo | null;
    /**
     * Helper function to run some checks before we connect with a wallet.
     *
     * @param walletName. The wallet name we want to connect with.
     */
    connect(walletName: string): Promise<void | string>;
    /**
     * Signs into the wallet by connecting and signing an authentication messages.
     *
     * For more information, visit: https://siwa.aptos.dev
     *
     * @param args
     * @param args.input The AptosSignInInput which defines how the SIWA Message should be constructed
     * @param args.walletName The name of the wallet to sign into
     * @returns The AptosSignInOutput which contains the account and signature information
     */
    signIn(args: {
        input: AptosSignInInput;
        walletName: string;
    }): Promise<AptosSignInOutput>;
    /**
     * Connects a wallet to the dapp.
     * On connect success, we set the current account and the network, and keeping the selected wallet
     * name in LocalStorage to support autoConnect function.
     *
     * @param selectedWallet. The wallet we want to connect.
     * @emit emits "connect" event
     * @throws WalletConnectionError
     */
    private connectWallet;
    /**
     * Disconnect the current connected wallet. On success, we clear the
     * current account, current network and LocalStorage data.
     *
     * @emit emits "disconnect" event
     * @throws WalletDisconnectionError
     */
    disconnect(): Promise<void>;
    /**
     * Signs and submits a transaction to chain
     *
     * @param transactionInput InputTransactionData
     * @returns AptosSignAndSubmitTransactionOutput
     */
    signAndSubmitTransaction(transactionInput: InputTransactionData): Promise<AptosSignAndSubmitTransactionOutput>;
    /**
     * Signs a transaction
     *
     * This method supports 2 input types -
     * 1. A raw transaction that was already built by the dapp,
     * 2. A transaction data input as JSON. This is for the wallet to be able to simulate before signing
     *
     * @param transactionOrPayload AnyRawTransaction | InputTransactionData
     * @param asFeePayer optional. A flag indicates to sign the transaction as the fee payer
     * @param options optional. Transaction options
     *
     * @returns AccountAuthenticator
     */
    signTransaction(args: {
        transactionOrPayload: AnyRawTransaction | InputTransactionData;
        asFeePayer?: boolean;
    }): Promise<{
        authenticator: AccountAuthenticator;
        rawTransaction: Uint8Array;
    }>;
    /**
     * Sign a message (doesnt submit to chain).
     *
     * @param message - AptosSignMessageInput
     *
     * @return response from the wallet's signMessage function
     * @throws WalletSignMessageError
     */
    signMessage(message: AptosSignMessageInput): Promise<AptosSignMessageOutput>;
    /**
     * Submits transaction to chain
     *
     * @param transaction - InputSubmitTransactionData
     * @returns PendingTransactionResponse
     */
    submitTransaction(transaction: InputSubmitTransactionData): Promise<PendingTransactionResponse>;
    /**
     Event for when account has changed on the wallet
     @return the new account info
     @throws WalletAccountChangeError
     */
    onAccountChange(): Promise<void>;
    /**
     Event for when network has changed on the wallet
     @return the new network info
     @throws WalletNetworkChangeError
     */
    onNetworkChange(): Promise<void>;
    /**
     * Sends a change network request to the wallet to change the connected network
     *
     * @param network - Network
     * @returns AptosChangeNetworkOutput
     */
    changeNetwork(network: Network): Promise<AptosChangeNetworkOutput>;
    /**
     * Signs a message and verifies the signer
     * @param message - AptosSignMessageInput
     * @returns boolean
     */
    signMessageAndVerify(message: AptosSignMessageInput): Promise<boolean>;
}

declare function isMobile(): boolean;
declare function isInAppBrowser(): boolean;
declare function isRedirectable(): boolean;
declare function generalizedErrorMessage(error: any): string;
/**
 * Helper function to get AptosConfig that supports Aptos and Custom networks
 *
 * @param networkInfo
 * @param dappConfig
 * @returns AptosConfig
 */
declare const getAptosConfig: (networkInfo: NetworkInfo | null, dappConfig: DappConfig | undefined) => AptosConfig;
/**
 * Helper function to resolve if the current connected network is an Aptos network
 *
 * @param networkInfo
 * @returns boolean
 */
declare const isAptosNetwork: (networkInfo: NetworkInfo | NetworkInfo | null) => boolean;
declare const isAptosLiveNetwork: (networkInfo: Network) => boolean;
/**
 * Helper function to fetch Devnet chain id
 */
declare const fetchDevnetChainId: () => Promise<number>;
/**
 * A helper function to handle the publish package transaction.
 * The Aptos SDK expects the metadataBytes and byteCode to be Uint8Array, but in case the arguments are passed in
 * as a string, this function converts the string to Uint8Array.
 */
declare const handlePublishPackageTransaction: (transactionInput: InputTransactionData) => {
    metadataBytes: number | bigint | boolean | _aptos_labs_ts_sdk.AccountAddress | _aptos_labs_ts_sdk.Bool | _aptos_labs_ts_sdk.U8 | _aptos_labs_ts_sdk.U16 | _aptos_labs_ts_sdk.U32 | _aptos_labs_ts_sdk.U64 | _aptos_labs_ts_sdk.U128 | _aptos_labs_ts_sdk.U256 | _aptos_labs_ts_sdk.MoveVector<_aptos_labs_ts_sdk.EntryFunctionArgumentTypes> | _aptos_labs_ts_sdk.MoveOption<_aptos_labs_ts_sdk.EntryFunctionArgumentTypes> | _aptos_labs_ts_sdk.MoveString | _aptos_labs_ts_sdk.FixedBytes | Uint8Array<ArrayBufferLike> | ArrayBuffer | (_aptos_labs_ts_sdk.EntryFunctionArgumentTypes | _aptos_labs_ts_sdk.SimpleEntryFunctionArgumentTypes)[] | _aptos_labs_ts_sdk.MoveVector<_aptos_labs_ts_sdk.ScriptFunctionArgumentTypes> | _aptos_labs_ts_sdk.Serialized | null | undefined;
    byteCode: (_aptos_labs_ts_sdk.EntryFunctionArgumentTypes | _aptos_labs_ts_sdk.SimpleEntryFunctionArgumentTypes)[];
};
declare function convertNetwork(networkInfo: NetworkInfo | null): Network;

declare function setLocalStorage(walletName: string): void;
declare function removeLocalStorage(): void;
declare function getLocalStorage(): void;

/**
 * A function that will partition the provided wallets into two list â€” `defaultWallets` and `moreWallets`.
 * By default, the wallets will be partitioned by whether or not they are installed or loadable.
 * You can pass your own partition function if you wish to customize this behavior.
 */
declare function partitionWallets(wallets: ReadonlyArray<AdapterWallet | AdapterNotDetectedWallet>, partitionFunction?: (wallet: AdapterWallet | AdapterNotDetectedWallet) => boolean): {
    defaultWallets: AdapterWallet[];
    moreWallets: AdapterNotDetectedWallet[];
};
/** Returns true if the wallet is installed or loadable. */
declare function isInstalledOrLoadable(wallet: AdapterWallet | AdapterNotDetectedWallet): boolean;
/**
 * Returns true if the user is on desktop and the provided wallet requires installation of a browser extension.
 * This can be used to decide whether to show a "Connect" button or "Install" link in the UI.
 */
declare function isInstallRequired(wallet: AdapterWallet | AdapterNotDetectedWallet): boolean;
/** Truncates the provided wallet address at the middle with an ellipsis. */
declare function truncateAddress(address: string | undefined): string | undefined;
/**
 * Returns `true` if the provided wallet is an Aptos Connect wallet.
 *
 * @deprecated Use {@link isPetraWebWallet} instead.
 */
declare function isAptosConnectWallet(wallet: WalletInfo | AdapterWallet): boolean;
/** Returns `true` if the provided wallet is a Petra Web wallet. */
declare function isPetraWebWallet(wallet: WalletInfo | AdapterWallet): boolean;
/**
 * Partitions the `wallets` array so that Aptos Connect wallets are grouped separately from the rest.
 * Petra Web is a web wallet that uses social login to create accounts on the blockchain.
 *
 * @deprecated Use {@link getPetraWebWallets} instead.
 */
declare function getAptosConnectWallets(wallets: ReadonlyArray<AdapterWallet | AdapterNotDetectedWallet>): {
    aptosConnectWallets: AdapterWallet[];
    otherWallets: AdapterNotDetectedWallet[];
};
/**
 * Partitions the `wallets` array so that Petra Web wallets are grouped separately from the rest.
 * Petra Web is a web wallet that uses social login to create accounts on the blockchain.
 */
declare function getPetraWebWallets(wallets: ReadonlyArray<AdapterWallet | AdapterNotDetectedWallet>): {
    petraWebWallets: AdapterWallet[];
    otherWallets: AdapterNotDetectedWallet[];
};
interface WalletSortingOptions {
    /**
     * An optional function for sorting Aptos Connect wallets.
     *
     * @deprecated Use {@link sortPetraWebWallets} instead.
     */
    sortAptosConnectWallets?: (a: AdapterWallet, b: AdapterWallet) => number;
    /** An optional function for sorting Petra Web wallets. */
    sortPetraWebWallets?: (a: AdapterWallet, b: AdapterWallet) => number;
    /** An optional function for sorting wallets that are currently installed or loadable. */
    sortAvailableWallets?: (a: AdapterWallet | AdapterNotDetectedWallet, b: AdapterWallet | AdapterNotDetectedWallet) => number;
    /** An optional function for sorting wallets that are NOT currently installed or loadable. */
    sortInstallableWallets?: (a: AdapterWallet | AdapterNotDetectedWallet, b: AdapterWallet | AdapterNotDetectedWallet) => number;
}
/**
 * Partitions the `wallets` array into three distinct groups:
 *
 * `aptosConnectWallets` - Use {@link petraWebWallets} instead.
 *
 * `petraWebWallets` - Wallets that use social login to create accounts on
 * the blockchain via Petra Web.
 *
 * `availableWallets` - Wallets that are currently installed or loadable by the client.
 *
 * `installableWallets` - Wallets that are NOT current installed or loadable and
 * require the client to install a browser extension first.
 *
 * Additionally, these wallet groups can be sorted by passing sort functions via the `options` argument.
 */
declare function groupAndSortWallets(wallets: ReadonlyArray<AdapterWallet | AdapterNotDetectedWallet>, options?: WalletSortingOptions): {
    /** @deprecated Use {@link petraWebWallets} instead. */
    aptosConnectWallets: AdapterWallet[];
    /** Wallets that use social login to create an account on the blockchain */
    petraWebWallets: AdapterWallet[];
    /** Wallets that are currently installed or loadable. */
    availableWallets: AdapterWallet[];
    /** Wallets that are NOT currently installed or loadable. */
    installableWallets: AdapterNotDetectedWallet[];
};

declare function getSDKWallets(dappConfig?: DappConfig): AdapterWallet[];

/**
 * Registry of AIP-62 wallet standard supported wallets.
 * This list is used to show supported wallets even if they are not installed on the user machine.
 *
 * AIP-62 compatible wallets are required to add their wallet info here if they want to be detected by the adapter
 *
 * @param name - The name of your wallet cast to WalletName (Ex. "Petra" as WalletName<"Petra">)
 * @param url - The link to your chrome extension or main website where new users can create an account with your wallet.
 * @param icon - An icon for your wallet. Can be one of 4 data types. Be sure to follow the below format exactly (including the literal "," after base64).
 *        Format: `data:image/${"svg+xml" | "webp" | "png" | "gif"};base64,${string}`
 *        Note: ${...} data in the above format should be replaced. Other characters are literals (ex. ";")
 * @param deeplinkProvider optional - An optional deeplink provider for the wallet. If the wallet is not installed, we can redirect the user to the wallet's deeplink provider
 * @example "https://myWallet.app/explore?link="
 */
declare const aptosStandardSupportedWalletList: Array<AptosStandardSupportedWallet>;
declare const crossChainStandardSupportedWalletList: Array<AptosStandardSupportedWallet>;

/**
 * @deprecated Use `AptosSignInBoundFields` instead. This will be removed in future versions.
 */
type AptosSignInRequiredFields = AptosSignInBoundFields;

export { APTOS_CONNECT_ACCOUNT_URL, APTOS_CONNECT_BASE_URL, type AdapterAccountInfo, type AdapterNotDetectedWallet, type AdapterWallet, type AptosSignInRequiredFields, type AptosStandardSupportedWallet, type AvailableWallets, ChainIdToAnsSupportedNetworkMap, type DappConfig, type InputTransactionData, NetworkName, PETRA_WEB_ACCOUNT_URL, PETRA_WEB_BASE_URL, WalletCore, type WalletCoreEvents, type WalletInfo, WalletReadyState, type WalletSortingOptions, aptosStandardSupportedWalletList, convertNetwork, crossChainStandardSupportedWalletList, fetchDevnetChainId, generalizedErrorMessage, getAptosConfig, getAptosConnectWallets, getLocalStorage, getPetraWebWallets, getSDKWallets, groupAndSortWallets, handlePublishPackageTransaction, isAptosConnectWallet, isAptosLiveNetwork, isAptosNetwork, isInAppBrowser, isInstallRequired, isInstalledOrLoadable, isMobile, isPetraWebWallet, isRedirectable, partitionWallets, removeLocalStorage, setLocalStorage, truncateAddress };
